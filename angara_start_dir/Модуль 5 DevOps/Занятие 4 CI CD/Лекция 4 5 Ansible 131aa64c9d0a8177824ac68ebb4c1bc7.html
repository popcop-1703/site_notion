<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Лекция 4.5. Ansible</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
    margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-default_background {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-default_background {
	color: inherit;
	fill: inherit;
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-uiBlue { background-color: rgba(35, 131, 226, .07); }
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-transparentGray { background-color: rgba(227, 226, 224, 0); }
.select-value-color-translucentGray { background-color: rgba(0, 0, 0, 0.06); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }
.select-value-color-pageGlass { background-color: undefined; }
.select-value-color-washGlass { background-color: undefined; }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="131aa64c-9d0a-8177-824a-c68ebb4c1bc7" class="page sans"><header><div class="page-header-icon undefined"><img class="icon" src="https://www.notion.so/icons/slideshow_gray.svg"/></div><h1 class="page-title">Лекция 4.5. Ansible</h1><p class="page-description"></p></header><div class="page-body"><h1 id="131aa64c-9d0a-8154-9950-f96b9f9a3d13" class="">Оглавление</h1><nav id="131aa64c-9d0a-8190-92c8-d0a92f7dea3b" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#131aa64c-9d0a-8154-9950-f96b9f9a3d13">Оглавление</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#131aa64c-9d0a-81d6-980d-c4c0ef21be62">1. Теоретическая часть</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#131aa64c-9d0a-813d-b292-cb0a84420cac">1.1 Введение</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#131aa64c-9d0a-81fa-b983-fd476362be20">1.2 Структура Ansible</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#131aa64c-9d0a-813c-b85c-e65449595208"><mark class="highlight-default">1.2.1 Переменные</mark></a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#131aa64c-9d0a-81e3-9192-f2b19812635d">1.<mark class="highlight-default">2.2 Playbooks</mark></a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#131aa64c-9d0a-8103-ade1-f3ecd0956b04">1.<mark class="highlight-default">2.3 Roles</mark></a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#131aa64c-9d0a-810e-bd60-ed24dfabd870">1.<mark class="highlight-default">2.4 Inventory</mark></a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#131aa64c-9d0a-8103-ac34-d3b6453ab2ce">1.2.5 Inventory и переменные</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#131aa64c-9d0a-8124-b407-cd050381a5a0">1.<mark class="highlight-default">3 Инфраструктура как код</mark></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#131aa64c-9d0a-8188-8786-e90b5eed5688">1.<mark class="highlight-default">4 Обнаружение как код</mark></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#131aa64c-9d0a-8154-a746-df1eb89ed15d">1.5 Дополнительные материалы:</a></div></nav><h1 id="131aa64c-9d0a-81d6-980d-c4c0ef21be62" class="">1. Теоретическая часть</h1><h2 id="131aa64c-9d0a-813d-b292-cb0a84420cac" class="">1.1 Введение</h2><p id="131aa64c-9d0a-81b1-8e20-febe90d7671b" class="">Ansible - это ПО с открытым исходным кодом, которое автоматизирует поставку программного обеспечения, управление конфигурацией и развёртывание приложений. Ansible помогает DevOps-специалистам автоматизировать задачи.</p><p id="131aa64c-9d0a-81bf-bae6-cec525197cd0" class="">Документация по Ansible:</p><figure id="131aa64c-9d0a-81c3-86ce-d9a10f3c4c60"><a href="https://docs.ansible.com/ansible/latest/" class="bookmark source"><div class="bookmark-info"><div class="bookmark-text"><div class="bookmark-title">Ansible Documentation — Ansible Documentation</div><div class="bookmark-description">Welcome to Ansible community documentation!
This documentation covers the version of Ansible noted in the upper left corner of this page.
We maintain multiple versions of Ansible and of the documentation, so please be sure you are using the version of the documentation that covers the version of Ansible you’re using.
For recent features, we note the version of Ansible where the feature was added.</div></div><div class="bookmark-href"><img src="https://docs.ansible.com/ansible/latest/_static/images/Ansible-Mark-RGB_Black.png" class="icon bookmark-icon"/>https://docs.ansible.com/ansible/latest/</div></div></a></figure><p id="131aa64c-9d0a-815f-baa8-d3c385d70707" class="">Особенности программы:</p><ul id="131aa64c-9d0a-81b5-bae0-dda086a947b0" class="bulleted-list"><li style="list-style-type:disc">В клиенте не установлено программное обеспечение или агент, который общается с сервером.</li></ul><ul id="131aa64c-9d0a-81fe-92f0-fff1b24de232" class="bulleted-list"><li style="list-style-type:disc">Независимо от того, сколько раз вы вызываете операцию, результат будет одинаковым.</li></ul><ul id="131aa64c-9d0a-81a1-b5c6-f285802af9ac" class="bulleted-list"><li style="list-style-type:disc">Программа Ansible написанa на Python и использует YAML для написания команд.</li></ul><p id="131aa64c-9d0a-816a-9043-c56583611adf" class="">С помощью Ansible можно решать следующие задачи:</p><ul id="131aa64c-9d0a-8137-8b84-cc44033cdae7" class="bulleted-list"><li style="list-style-type:disc">установка/удаление и конфигурирование ПО;</li></ul><ul id="131aa64c-9d0a-8176-97ae-d24ea50cd9e5" class="bulleted-list"><li style="list-style-type:disc">создание/удаление пользователей;</li></ul><ul id="131aa64c-9d0a-814f-bad9-d265c5c64897" class="bulleted-list"><li style="list-style-type:disc">контроль пользовательских паролей/ключей;</li></ul><ul id="131aa64c-9d0a-813c-91f6-f6d807f90ad9" class="bulleted-list"><li style="list-style-type:disc">создание/удаление контейнеров/виртуальных машин;</li></ul><ul id="131aa64c-9d0a-8113-a558-cd7cbf2fccfb" class="bulleted-list"><li style="list-style-type:disc">запуск различных скриптов/тестов.</li></ul><h2 id="131aa64c-9d0a-81fa-b983-fd476362be20" class="">1.2 Структура Ansible</h2><p id="131aa64c-9d0a-8128-8ef0-d31535128c61" class="">В общем виде проект Ansible может включать в себя:</p><ul id="131aa64c-9d0a-81a0-afed-e545cba00821" class="bulleted-list"><li style="list-style-type:disc">переменные;</li></ul><ul id="131aa64c-9d0a-8185-b588-c0056697bb93" class="bulleted-list"><li style="list-style-type:disc">playbook (сценарии);</li></ul><ul id="131aa64c-9d0a-81ea-afd0-dab3d86de395" class="bulleted-list"><li style="list-style-type:disc">роли;</li></ul><ul id="131aa64c-9d0a-81a6-b325-caeef80987c3" class="bulleted-list"><li style="list-style-type:disc">inventory (списки групп хостов).</li></ul><p id="131aa64c-9d0a-8156-b1f4-d7bd927db201" class="">
</p><h3 id="131aa64c-9d0a-813c-b85c-e65449595208" class=""><mark class="highlight-default">1.2.1 Переменные</mark></h3><p id="131aa64c-9d0a-81f4-a68f-f227548168d5" class=""><mark class="highlight-default"><strong>Переменные</strong></mark><mark class="highlight-default"> используются для хранения значений, которые могут применяться в playbook.</mark></p><p id="131aa64c-9d0a-81e7-8ab9-cec5daed0de9" class=""><mark class="highlight-default">Переменные можно определять:</mark></p><ul id="131aa64c-9d0a-8186-8bf7-e49f22f76756" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-default">в специальных файлах для группы/устройства;</mark></li></ul><ul id="131aa64c-9d0a-8185-b1d1-d97b7d1a2f26" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-default">в inventory;</mark></li></ul><ul id="131aa64c-9d0a-81bc-9f67-c0916da48c5a" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-default">в playbook;</mark></li></ul><ul id="131aa64c-9d0a-814e-b651-fc5d9240b6d9" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-default">в ролях, которые затем используются;</mark></li></ul><ul id="131aa64c-9d0a-81be-a5dc-fa64ba0e07a5" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-default">переменные, передаваемые при вызове playbook.</mark></li></ul><p id="131aa64c-9d0a-8197-b0d8-dc1cb4380ce7" class=""><mark class="highlight-default">Специальные файлы с переменными могут хранится в 2 директориях:</mark></p><ul id="131aa64c-9d0a-81c8-8e20-d0e3aebb34d0" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-red"><code>group_vars/</code></mark><mark class="highlight-default"> — групповые переменные(общие). При необходимости можно создать файл all, содержащий переменные, относящиеся ко всем группам.</mark></li></ul><ul id="131aa64c-9d0a-8195-a865-f84e7774cb2d" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-red"><code>host_vars/ </code></mark><mark class="highlight-default">— переменные отдельных хостов (частные). В них имена файлов должны совпадать с именем или адресом хоста.</mark></li></ul><p id="131aa64c-9d0a-81bb-a5a6-fc16a07c8ece" class=""><mark class="highlight-default">Названия файлов в директориях не принципиальны, главное, чтобы имя директории совпадало с именами в inventory.</mark></p><p id="131aa64c-9d0a-815e-820d-df05cb22f534" class=""><mark class="highlight-default">Файлы переменных должны быть в формате YAML.</mark></p><p id="131aa64c-9d0a-81aa-b0cb-d0d798b724ee" class=""><mark class="highlight-default">Для каждой группы или хоста можно не создавать отдельную директорию, можно просто создать файл и записать в нем все необходимые переменные.</mark></p><p id="131aa64c-9d0a-8126-8e48-ef7b1fc6fcc1" class=""><mark class="highlight-default">Приоритеты переменных (в порядке возрастания):</mark></p><ul id="131aa64c-9d0a-8167-9a5f-e35d0de3e1d1" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-default">установленные в ролях;</mark></li></ul><ul id="131aa64c-9d0a-814f-8d37-c77ad4a7cbf8" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-default">заданные в inventory;</mark></li></ul><ul id="131aa64c-9d0a-8153-964b-c6b1afc1ed67" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-default">групповые переменные (общие);</mark></li></ul><ul id="131aa64c-9d0a-81c0-9775-ca9d7253eeb3" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-default">групповые переменные (частные);</mark></li></ul><ul id="131aa64c-9d0a-81c7-8147-db14641db12d" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-default">переданные из playbook;</mark></li></ul><ul id="131aa64c-9d0a-812a-bb67-f1a2092db3c0" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-default">передаваемые из команды (-e / —extra-vars).</mark></li></ul><h3 id="131aa64c-9d0a-81e3-9192-f2b19812635d" class="">1.<mark class="highlight-default">2.2 Playbooks</mark></h3><p id="131aa64c-9d0a-81eb-bc08-dcad98d2a2ce" class="">Именно он используется для выполнения сценария. Это основной способ автоматизировать набор задач, которые нам нужно выполнить на удаленной машине.</p><p id="131aa64c-9d0a-8196-a478-fdb2bb1cc470" class="">Playbook представляет собой файл с расширением *.yml, в котором указаны необходимые действия для выполнения конкретного сценария.</p><p id="131aa64c-9d0a-8107-8966-f8e2f09bbedc" class="">Плейбук состоит из сценариев (play), которые выполняются в заданном порядке. Сценарий представляет собой список задач для определённой группы хостов.</p><p id="131aa64c-9d0a-8191-829f-d4ae20cad9d0" class="">Каждая задача связана с модулем, отвечающим за действие, и параметрами конфигурации. <mark class="highlight-default">Playbook</mark> можно спокойно запускать несколько раз, т.к. большинство наших задач идемпотентны.</p><p id="131aa64c-9d0a-8144-8828-c08b9aa2fb5c" class="">Плейбуки пишутся в <a href="https://docs.ansible.com/ansible/latest/reference_appendices/YAMLSyntax.html#yaml-syntax"><span style="border-bottom:0.05em solid">YAML</span></a> со стандартным расширением <strong>.yml</strong> с минимальным синтаксисом.</p><p id="131aa64c-9d0a-81f0-9d78-de43b38602e3" class="">Мы делаем одинаковые отступы для элементов на одном уровне иерархии, используя пробелы. У дочернего элемента отступ должен быть больше, чем у родительского. Количество пробелов может быть любым, но обычно их два. Tab использовать нельзя.</p><p id="131aa64c-9d0a-81e8-92e0-c6f6a97bb7cd" class="">Структура playbook минимально должна выглядеть следующим образом</p><ul id="131aa64c-9d0a-8195-a76f-d651d545c295" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-default">hosts — указывается целевая группа хостов; также можно задать исключения по маске или указать несколько групп через двоеточие</mark></li></ul><ul id="131aa64c-9d0a-811f-9d6b-f3f919f26061" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-default">tasks или roles — выполняемое действие или роль.</mark></li></ul><p id="131aa64c-9d0a-81a5-b309-d34ccddaefb5" class="">Простой плейбук с двумя сценариями, в каждом по две задачи:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8135-9bbc-fbf6f7c5d66d" class="code"><code class="language-Bash">- name: Example Simple Playbook
  hosts: all
  become: yes

  tasks:
  - name: Copy file example_file to /tmp with permissions
    ansible.builtin.copy:
      src: ./example_file
      dest: /tmp/example_file
      mode: &#x27;0644&#x27;

  - name: Add the user &#x27;bob&#x27; with a specific uid 
    ansible.builtin.user:
      name: bob
      state: present
      uid: 1040

- name: Update postgres servers
  hosts: databases
  become: yes

  tasks:
  - name: Ensure postgres DB is at the latest version
    ansible.builtin.yum:
      name: postgresql
      state: latest

  - name: Ensure that postgresql is started
    ansible.builtin.service:
      name: postgresql
      state: started</code></pre><p id="131aa64c-9d0a-814f-8efb-e0ae61cedb28" class=""><mark class="highlight-default">Также можно указать:</mark></p><ul id="131aa64c-9d0a-81c5-9811-eef3a0eb1ba5" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-default">become_user — пользователь, указывается пользователь, под которым будет выполняться действие; обычно это пользователь с привилегиями sudo</mark></li></ul><ul id="131aa64c-9d0a-815c-814c-cd5acbc44d0a" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-default">remote_user — пользователь для ssh-соединения;</mark></li></ul><ul id="131aa64c-9d0a-8124-b1b2-da23e2158cfe" class="bulleted-list"><li style="list-style-type:disc"><mark class="highlight-default">include — дополнительно вызываемый сценарий, например валидация параметров приложения.</mark></li></ul><p id="131aa64c-9d0a-81a1-b6df-c927e66443b0" class="">При запуске плейбука, Ansible выполняет задачи последовательно для всех указанных хостов. По умолчанию, задачи выполняются по очереди, одна за раз. Однако, поведение по умолчанию может быть скорректировано при необходимости с использованием стратегий.</p><p id="131aa64c-9d0a-81a6-8cfc-c001658fab47" class="">Если при выполнении задачи возникает ошибка, Ansible прекращает выполнение плейбука для данного хоста, но продолжает работу с другими хостами, где задача была выполнена успешно. В процессе выполнения, Ansible отображает информацию о статусе подключения, названиях задач, статусе выполнения и наличии изменений.</p><p id="131aa64c-9d0a-81d5-a886-c6111967e514" class="">По окончании работы Ansible предоставляет сводку выполнения плейбука, включающую информацию о выполненных и невыполненных задачах. Давайте рассмотрим пример для лучшего понимания. Для выполнения примера плейбука, используйте команду ansible-playbook.</p><h3 id="131aa64c-9d0a-8103-ade1-f3ecd0956b04" class="">1.<mark class="highlight-default">2.3 Roles</mark></h3><p id="131aa64c-9d0a-8180-9536-f50c142e5991" class=""><mark class="highlight-default"><strong>Роль </strong></mark><mark class="highlight-default">является структурированным плейбуком, содержащий набор задач, обработчиков событий, переменных, файлов, шаблонов и описанных зависимостей.</mark></p><p id="131aa64c-9d0a-8102-b64c-f30323045cf8" class="">В архитектуре проекта обычно сервера разделяются по своему предназначению и выполняют определенную роль - web-сервер, сервер баз данных, почтовый сервер и т. д. Каждому из серверов требуется отличающийся набор пакетов и настроек для правильного выполнения своей роли. С ростом количества серверов будет расти количество наборов инструкций (playbook), которые будут использоваться повторно.</p><p id="131aa64c-9d0a-812f-a835-e5cf4c2e3d3a" class=""><code>Ansible</code> позволяет удобно организовать и структурировать наборы инструкций в соответствии с ролями серверов.</p><p id="131aa64c-9d0a-81a9-8273-f113ee4e8b1c" class="">Пример структуры набора инструкций с ролями выглядит так:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81e8-9a01-d6005bc393ec" class="code"><code class="language-YAML">- hosts: servers 
  roles: 
	   - web
	   - db
	   - post</code></pre><p id="131aa64c-9d0a-8132-8bc7-cc4927c56a15" class="">Файловая структура ролей может выглядеть таким образом:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8191-a724-ee3a294d2204" class="code"><code class="language-Bash">site.yml
servers.yml
roles/
   web/
     files/
     templates/
     tasks/
     handlers/
     vars/
     defaults/
     meta/
   db/
     files/
     templates/
     tasks/
     handlers/
     vars/
     defaults/
     meta/
   post/
     files/
     templates/
     tasks/
     handlers/
     vars/
     defaults/
     meta/</code></pre><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-813e-b6d4-f2977f22af17"><div style="font-size:1.5em"><span class="icon">💡</span></div><div style="width:100%">Файловая структура не обязательно должна выглядеть так - если какой-либо каталог отсутствует в роли, то он будет проигнорирован и набор инструкций будет выполняться дальше.</div></figure><p id="131aa64c-9d0a-817f-8186-c727debb23d4" class="">О ролях можно писать очень много и долго, поэтому я лучше порекомендую <a href="https://galaxy.ansible.com/list#/roles?page=1&amp;page_size=10">Ansible Galaxy</a> - крупнейший репозиторий ролей <code>Ansible</code>, там можно брать уже готовые роли (например, для обучения) или делиться своими ролями.</p><h3 id="131aa64c-9d0a-810e-bd60-ed24dfabd870" class="">1.<mark class="highlight-default">2.4 Inventory</mark></h3><p id="131aa64c-9d0a-8184-abd4-fc912ca36aa3" class="">Inventory - это файл, который содержит информацию о устройствах, подключаемых к Ansible. В этом файле можно указывать устройства с использованием их IP-адресов или имен. Устройства могут быть перечислены как по одному, так и в виде групп. Формат файла - INI.</p><p id="131aa64c-9d0a-81a6-99d4-e65275babdc5" class="">По умолчанию inventory хранится в <code>/etc/ansible/hosts</code>, но вы можете указать другое расположение с помощью флага <code>-i</code> или конфигурационного файла <code>ansible.cfg</code>.</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-811e-823a-e4c268f9a473" class="code"><code class="language-Bash">[webservers]
host01.example.ru
host02.example.ru

[PC]
host03.example.ru
host04.example.ru</code></pre><p id="131aa64c-9d0a-81f4-a913-d6099833a507" class="">В этом примере мы используем формат INI, определяем четыре управляемых хоста и группируем их в две группы хостов</p><p id="131aa64c-9d0a-81bc-baed-d91f8ea2e4d7" class="">Ещё возможность определять псевдонимы для хостов в inventory. Например, мы можем использовать <code>host01</code>, если определим его в inventory следующим образом:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-816a-a42e-d24b7415ca69" class="code"><code class="language-Bash">host01 ansible_host=host01.example.ru</code></pre><h3 id="131aa64c-9d0a-8103-ac34-d3b6453ab2ce" class="">1.2.5 Inventory и переменные</h3><p id="131aa64c-9d0a-8105-b03f-d54935945812" class="">Ansible предлагает множество различных способов установки переменных, и одним из них является их определение в inventory.<br/>Давайте определим одну переменную для разной версии приложения для каждого хоста в нашем фиктивном inventory из предыдущего примера.<br/><br/></p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-815e-ba67-c37ca4b4a6fd" class="code"><code class="language-Bash">[webservers]
host01.example.ru app_version=1.1
host02.example.ru app_version=1.2</code></pre><p id="131aa64c-9d0a-8168-b970-d26d71ac6838" class="">Хотя установка переменных в inventory возможна, этот способ обычно не является предпочтительным. Лучше храните отдельные файлы переменных хоста и группы для улучшения организации и ясности ваших проектов Ansible.</p><p id="131aa64c-9d0a-8112-a7d5-ec077705fc20" class="">В том же каталоге, где мы храним наш файл inventory, мы можем создать две папки с именами <code>group_vars</code> и <code>host_vars</code>, содержащие наши файлы переменных. Например, у нас может быть файл <code>group_vars/webservers</code>, который содержит все переменные для веб-серверов:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-817b-b606-cdb29187533c" class="code"><code class="language-Bash">http_post: 80
ansible_user: automation_user</code></pre><p id="131aa64c-9d0a-81ad-91af-fc7e24514bcd" class="">
</p><h2 id="131aa64c-9d0a-8124-b407-cd050381a5a0" class="">1.<mark class="highlight-default">3 Инфраструктура как код</mark></h2><p id="131aa64c-9d0a-8195-8fae-d4762ff10997" class="">Модель &quot;инфраструктура как код (IaC)&quot;, иногда называемая &quot;программируемой инфраструктурой&quot;, отражает подход, при котором настройка инфраструктуры осуществляется аналогично процессу программирования. Это подход, который по сути размывает границы между разработкой приложений и созданием окружения для этих приложений. Приложения могут содержать собственные скрипты, которые создают и управляют виртуальными машинами. Именно этот подход лежит в основе облачных вычислений и является неотъемлемой частью DevOps.</p><p id="131aa64c-9d0a-816e-82d8-c34f85448b6c" class="">Популярность модели обусловлена двумя факторами:</p><ul id="131aa64c-9d0a-8153-8284-fd34dec8b2d4" class="bulleted-list"><li style="list-style-type:disc">Вследствие растущей сложности облачной архитектуры работа вручную отнимает слишком много времени(не говоря о количестве ошибок);</li></ul><ul id="131aa64c-9d0a-81f6-9ed5-eaef375e7cb0" class="bulleted-list"><li style="list-style-type:disc">ручные изменения необходимо повторять по несколько раз, что ведет к неэффективному использованию финансов и времени команды инженеров.</li></ul><p id="131aa64c-9d0a-8193-b2ee-f38bcab25f50" class="">&quot;Инфраструктура как код&quot; позволяет управлять виртуальными машинами на программном уровне, исключая необходимость ручной настройки и обновлений компонентов оборудования. Благодаря этому инфраструктура становится крайне &quot;эластичной&quot;, то есть масштабируемой и воспроизводимой. Один и тот же набор кода может быть использован для развертывания и управления как одной, так и тысячами виртуальных машин. Преимуществами подхода &quot;инфраструктура как код&quot; являются скорость, экономичность и уменьшение рисков.</p><p id="131aa64c-9d0a-8103-980d-cfb517ceb583" class="">Одно из решений, которое необходимо принять перед применением IaC, — выбор подхода для автоматизации изменений окружения: императивный или декларативный. Чаще всего применяется декларативный подход. Главное отличие между ними заключается в том, что при императивном подходе программа указывает, как выполнить задачу, а при декларативном просто указывается конечная цель.</p><p id="131aa64c-9d0a-81a1-8e46-cfb93184461a" class="">Для автоматического внесения изменений в инфраструктуру при императивном подходе можно использовать интерфейс командной строки (CLI). В соответствии с заданным скриптом изменения будут последовательно применяться к контейнерам, виртуальным машинам и виртуальным частным облакам. Этот подход позволяет подробно описать требуемые изменения, но если понадобится изменить конфигурацию после доставки на множество машин, придется вносить изменения в скрипт.</p><p id="131aa64c-9d0a-81e8-96b9-e6e971237b51" class="">При декларативном подходе для автоматического внесения изменений указывается только конечная цель. Например, вместо перечисления всех шагов для создания конфигурации виртуальной машины через интерфейс командной строки, просто запрашивается создание виртуальной машины в определенном домене. Задача будет автоматически выполнена. Декларативный подход позволяет просто указать, что именно должно быть выполнено с помощью средств автоматизации.</p><h2 id="131aa64c-9d0a-8188-8786-e90b5eed5688" class="">1.<mark class="highlight-default">4 Обнаружение как код</mark></h2><p id="131aa64c-9d0a-8150-8517-faed90ad79fb" class="">«Обнаружение как код» (DaC) — это концепция, которая расширяет принципы инфраструктуры как кода (IaC) и практики DevOps на область безопасности и обнаружения угроз. Он включает в себя автоматизацию настройки, развертывания и управления инструментами обнаружения и мониторинга безопасности, а также наборами правил с использованием кода и инструментов автоматизации.</p><p id="131aa64c-9d0a-811c-8e03-e1c675edea27" class="">Вот ключевые компоненты и идеи, связанные с «Обнаружение как код»:</p><ol type="1" id="131aa64c-9d0a-81a9-8a45-d54df378fc0f" class="numbered-list" start="1"><li><strong>Автоматизация</strong> . Точно так же, как «Инфраструктура как код» автоматизирует предоставление ресурсов инфраструктуры, «Обнаружение как код» автоматизирует развертывание и управление инструментами мониторинга и обнаружения безопасности. Это может включать настройку систем обнаружения вторжений (IDS), систем предотвращения вторжений (IPS), решений для управления журналами, платформ SIEM (управление информацией о безопасности и событиями) и т. д.</li></ol><ol type="1" id="131aa64c-9d0a-81c7-adb5-c82c73e2008c" class="numbered-list" start="2"><li><strong>Код</strong> : конфигурации безопасности и наборы правил определяются в коде (обычно с использованием декларативных языков или сценариев). Этот код может контролироваться версиями, проверяться и тестироваться точно так же, как код приложения или код инфраструктуры. Это позволяет группам безопасности определять правила обнаружения, пороговые значения оповещений и ответы структурированным и воспроизводимым образом.</li></ol><ol type="1" id="131aa64c-9d0a-81a3-abab-ef77521ad1f8" class="numbered-list" start="3"><li><strong>Интеграция</strong> : DaC интегрируется с существующими конвейерами и рабочими процессами DevOps. Это означает, что конфигурации безопасности и правила мониторинга могут быть легко интегрированы в процессы разработки и развертывания программного обеспечения. Безопасность становится неотъемлемой частью жизненного цикла разработки, а не отдельным этапом.</li></ol><ol type="1" id="131aa64c-9d0a-8181-9053-f7bf049b37f4" class="numbered-list" start="4"><li><strong>Непрерывный мониторинг</strong> : DaC продвигает идею непрерывного мониторинга и обнаружения угроз в реальном времени. Это гарантирует, что правила безопасности последовательно применяются и контролируются по мере развития инфраструктуры и приложений.</li></ol><ol type="1" id="131aa64c-9d0a-819e-b55f-fb641a38ee70" class="numbered-list" start="5"><li><strong>Масштабируемость</strong> : автоматизация позволяет легко масштабировать возможности мониторинга безопасности по мере роста инфраструктуры. По мере выделения новых ресурсов автоматически применяются необходимые конфигурации безопасности.</li></ol><ol type="1" id="131aa64c-9d0a-81e3-b816-d37061f6551d" class="numbered-list" start="6"><li><strong>Соответствие требованиям и аудит</strong> . DaC может помочь в обеспечении соответствия, гарантируя, что политики и конфигурации безопасности последовательно применяются во всей среде. Он также предоставляет журналы аудита и документацию по конфигурациям и изменениям безопасности.</li></ol><ol type="1" id="131aa64c-9d0a-8186-91c6-fe7aa677476b" class="numbered-list" start="7"><li><strong>Устойчивость</strong> . Автоматизируя обнаружение нарушений безопасности и реагирование на них, организации могут быстрее и эффективнее реагировать на инциденты безопасности, снижая потенциальное воздействие нарушений.</li></ol><h2 id="131aa64c-9d0a-8154-a746-df1eb89ed15d" class="">1.5 Дополнительные материалы:</h2><p id="131aa64c-9d0a-815e-91a5-e659e562af3e" class=""><a href="https://docs.ansible.com/ansible/latest/">https://docs.ansible.com/ansible/latest/</a></p><p id="131aa64c-9d0a-819d-8339-d36e6907de43" class=""><mark class="highlight-default"><a href="https://rba.community/dac/">https://rba.community/dac/</a></mark></p><p id="131aa64c-9d0a-81c4-9b73-fd24bf8a6714" class=""><a href="https://www.atlassian.com/ru/microservices/cloud-computing/infrastructure-as-code">https://www.atlassian.com/ru/microservices/cloud-computing/infrastructure-as-code</a></p><p id="131aa64c-9d0a-8150-b395-ddb048a47a9f" class=""><a href="https://habr.com/ru/companies/otus/articles/515078/">https://habr.com/ru/companies/otus/articles/515078/</a></p><p id="131aa64c-9d0a-81f0-b883-c3231c59597f" class=""><a href="https://timeweb.cloud/tutorials/ci-cd/pajplajn-ci-cd-chto-ehto-takoe">https://timeweb.cloud/tutorials/ci-cd/pajplajn-ci-cd-chto-ehto-takoe</a></p><p id="131aa64c-9d0a-810e-8933-c73f671552fb" class=""><a href="https://jazzteam.ru/technical-articles/devops-ansible-and-docker/">https://jazzteam.ru/technical-articles/devops-ansible-and-docker/</a></p><p id="131aa64c-9d0a-81ac-9bb5-e0a799dd0277" class=""><a href="https://habr.com/ru/companies/slurm/articles/786700/">https://habr.com/ru/companies/slurm/articles/786700/</a></p><p id="131aa64c-9d0a-8160-bd65-caef7b9fc94a" class="">
</p></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>