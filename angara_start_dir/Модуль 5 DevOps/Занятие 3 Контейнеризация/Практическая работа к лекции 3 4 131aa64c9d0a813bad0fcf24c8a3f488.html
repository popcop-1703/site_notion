<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Практическая работа к лекции 3.4</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
    margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-default_background {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-default_background {
	color: inherit;
	fill: inherit;
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-uiBlue { background-color: rgba(35, 131, 226, .07); }
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-transparentGray { background-color: rgba(227, 226, 224, 0); }
.select-value-color-translucentGray { background-color: rgba(0, 0, 0, 0.06); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }
.select-value-color-pageGlass { background-color: undefined; }
.select-value-color-washGlass { background-color: undefined; }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="131aa64c-9d0a-813b-ad0f-cf24c8a3f488" class="page sans"><header><div class="page-header-icon undefined"><img class="icon" src="https://www.notion.so/icons/compose_gray.svg"/></div><h1 class="page-title">Практическая работа к лекции 3.4</h1><p class="page-description"></p></header><div class="page-body"><h1 id="131aa64c-9d0a-8110-8390-d6e4c78df242" class="">2. Практическая часть</h1><h2 id="131aa64c-9d0a-8182-9e1e-fe08cb558576" class="">2.1 <strong>Kubernetes Dashboard</strong></h2><h3 id="131aa64c-9d0a-815c-bdc5-eaa82f79ec3e" class="">2.1.1 <strong>Установка dashboard</strong></h3><figure class="block-color-purple_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-8121-93f2-f4acf866d69d"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Выполнять необходимо только на одном сервере, который является мастер нодой!</div></figure><ol type="1" id="131aa64c-9d0a-8101-8067-ed8692a82917" class="numbered-list" start="1"><li>Для установки dashboard в кластер нужно выполнить<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81d1-a4f4-e8eb3c121f13" class="code"><code class="language-Python">kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.6.1/aio/deploy/recommended.yaml</code></pre><figure id="131aa64c-9d0a-811f-9275-f69f7aef5783" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled.png"><img style="width:1453px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled.png"/></a></figure></li></ol><ol type="1" id="131aa64c-9d0a-812f-a5e4-da61bae8bb8f" class="numbered-list" start="2"><li>Проверка<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81c9-88f6-e54e520af4f8" class="code"><code class="language-Python">kubectl get all -n kubernetes-dashboard</code></pre><figure id="131aa64c-9d0a-816f-9806-c4dc7462a253" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%201.png"><img style="width:1137px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%201.png"/></a></figure></li></ol><h3 id="131aa64c-9d0a-81f6-b11a-db36ece7597a" class="">2.1.2 <strong>Подключение к dashboard</strong></h3><ol type="1" id="131aa64c-9d0a-818e-93ed-db888348a476" class="numbered-list" start="1"><li>Сервис kubernetes-dashboard для доступа к dashboard имеет по умолчанию тип ClusterIP, чтобы можно было получить доступ, нужно изменить тип на NodePort<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81f2-8974-fe361dcce3f6" class="code"><code class="language-Bash">kubectl edit service/kubernetes-dashboard -n kubernetes-dashboard</code></pre><figure id="131aa64c-9d0a-817e-9393-d186a26161e5" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%202.png"><img style="width:1005px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%202.png"/></a></figure><figure id="131aa64c-9d0a-81bb-82fb-d3895d3afa1c" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%203.png"><img style="width:818px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%203.png"/></a></figure><p id="131aa64c-9d0a-811d-bba8-e8e2467b3dd3" class="">Сохранить изменения и выйти:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8186-bcc3-f5a38cd49fbf" class="code"><code class="language-Python">:w
:q</code></pre></li></ol><ol type="1" id="131aa64c-9d0a-81bd-b810-db59be3d9b77" class="numbered-list" start="2"><li>Узнать по какому порту подключаться можно командой<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8192-a6c1-d778cecb9a27" class="code"><code class="language-Python">kubectl get service/kubernetes-dashboard -n kubernetes-dashboard</code></pre><figure id="131aa64c-9d0a-81dc-b663-d5c197c695be" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%204.png"><img style="width:1068px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%204.png"/></a></figure></li></ol><ol type="1" id="131aa64c-9d0a-8108-b572-d025984f94c3" class="numbered-list" start="3"><li>Открыть web-страницу можно будет по адресу <strong>https://&lt;node-ip&gt;:&lt;port&gt;</strong><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8108-8c9c-cf5fd5bb42a5" class="code"><code class="language-Python">https://192.168.133.166:31305/</code></pre><figure class="block-color-orange_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-81d8-98d2-f8d2d176b4b7"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">IP-адрес и порт могут отличаться. При копировании команды необходимо перепроверить соответствие IP-адреса и порта вашей конфигурации.</div></figure><figure class="block-color-orange_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-815c-b92e-d331080fb2ab"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Dashboard не работает через http, если обращение осуществляется не с localhost.</div></figure><figure id="131aa64c-9d0a-8127-b317-fb5b93faf1e4" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%205.png"><img style="width:1763px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%205.png"/></a></figure></li></ol><h3 id="131aa64c-9d0a-81b8-b449-e048d0cf0e91" class="">2.1.3 <strong>Создание пользователя</strong></h3><p id="131aa64c-9d0a-8197-b502-c0faa99be69b" class="">Dashboard использует встроенную систему RBAC Kubernetes, поэтому требуется создать пользователя и дать ему права на Dashboard.</p><ol type="1" id="131aa64c-9d0a-81ac-bf84-c9980f619ded" class="numbered-list" start="1"><li>Создание аккаунта<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8172-b403-da5d1f4f9de9" class="code"><code class="language-Python">cat &lt;&lt;EOF | kubectl apply -f -
apiVersion: v1
kind: ServiceAccount
metadata:
  name: kubernetes-admin
  namespace: kubernetes-dashboard
EOF</code></pre><figure id="131aa64c-9d0a-8182-8df8-f02e54c23364" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%206.png"><img style="width:599px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%206.png"/></a></figure></li></ol><ol type="1" id="131aa64c-9d0a-81c2-a0ad-f0f31d553f57" class="numbered-list" start="2"><li>Определение роли созданного пользователя<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8179-89e4-f99af336d107" class="code"><code class="language-Python">cat &lt;&lt;EOF | kubectl apply -f -
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: kubernetes-admin
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cluster-admin
subjects:
- kind: ServiceAccount
  name: kubernetes-admin
  namespace: kubernetes-dashboard
EOF</code></pre><figure id="131aa64c-9d0a-81ba-9a86-ffd6a5582ad7" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%207.png"><img style="width:854px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%207.png"/></a></figure></li></ol><h3 id="131aa64c-9d0a-81c5-a916-c989c5524c2d" class="">2.1.4 <strong>Вход в dashboard</strong></h3><p id="131aa64c-9d0a-8172-8f5a-df1f7e7fb8e5" class="">Войти в dashboard можно или с помощью токена или с используя файл с конфигом.</p><ul id="131aa64c-9d0a-81b5-bef2-eeb03ac04f36" class="bulleted-list"><li style="list-style-type:disc"><strong>Вход с помощью токена</strong><p id="131aa64c-9d0a-8198-a4e0-cca7456bd263" class="">Этот токен доступа существует в секретном хранилище созданного пользователя. Он автоматически генерируется при создании пользователя, и нужно получить его для входа в dashboard.</p><ol type="1" id="131aa64c-9d0a-810f-8813-dafff8287fed" class="numbered-list" start="1"><li>Для получения токена нужно выполнить<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8112-b2f2-caf2cb77eb7f" class="code"><code class="language-Python">kubectl -n kubernetes-dashboard create token kubernetes-admin</code></pre><figure id="131aa64c-9d0a-81aa-ad3d-c0cba6fd8fbd" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%208.png"><img style="width:1460px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%208.png"/></a></figure></li></ol><ol type="1" id="131aa64c-9d0a-8193-a953-f1011b7f620a" class="numbered-list" start="2"><li>По-умолчанию срок службы такого токена небольшой. Можно задать срок службы при создании, например<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-815b-8896-e58878853b82" class="code"><code class="language-Python">kubectl -n kubernetes-dashboard create token kubernetes-admin --duration=24h</code></pre></li></ol><ol type="1" id="131aa64c-9d0a-8173-8544-fc08a27e6edb" class="numbered-list" start="3"><li>Вход<p id="131aa64c-9d0a-81af-bf1c-f0ed8306fe7e" class="">Необходимо ввести токен, который был сгенерирован в соответсвующее поле.</p><figure id="131aa64c-9d0a-8170-addf-c19bff0efe06" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%209.png"><img style="width:1779px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%209.png"/></a></figure><figure id="131aa64c-9d0a-815d-bbbc-f6adb0f674fc" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2010.png"><img style="width:1761px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2010.png"/></a></figure></li></ol></li></ul><ul id="131aa64c-9d0a-8149-b45b-ffe6e69f157e" class="bulleted-list"><li style="list-style-type:disc"><strong>Вход с помощью kubeconfig</strong><ol type="1" id="131aa64c-9d0a-8102-a9f7-c45600e8bf38" class="numbered-list" start="1"><li>Нужно создать пустой файл, пусть будет называться <strong>kuberconfig</strong> в него скопировать вывод команды<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81bc-abd8-f3ae79735bd4" class="code"><code class="language-Bash">kubectl config view</code></pre><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81bc-bb52-d00619fc0b88" class="code"><code class="language-Bash">nano kuberconfig </code></pre><figure id="131aa64c-9d0a-81fd-8212-ffac86d71bda" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2011.png"><img style="width:819px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2011.png"/></a></figure></li></ol><ol type="1" id="131aa64c-9d0a-8183-9052-d4443b7e6b6c" class="numbered-list" start="2"><li>Чтобы не создавать каждый раз новый токен нужно создать secret<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81d3-aed4-cb973846d019" class="code"><code class="language-Bash">kubectl apply -f - &lt;&lt;EOF
apiVersion: v1
kind: Secret
metadata:
  namespace: kubernetes-dashboard
  name: kubernetes-admin
  annotations:
    kubernetes.io/service-account.name: kubernetes-admin
type: kubernetes.io/service-account-token
EOF</code></pre><figure id="131aa64c-9d0a-815f-98b6-fed4203730fb" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2012.png"><img style="width:717px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2012.png"/></a></figure></li></ol><ol type="1" id="131aa64c-9d0a-81d5-9acd-c27e031e8eb3" class="numbered-list" start="3"><li>Затем выполнить<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8191-90d4-d8f2b920d6cb" class="code"><code class="language-Bash">kubectl get secrets/kubernetes-admin -n kubernetes-dashboard -o json</code></pre><figure id="131aa64c-9d0a-81fd-bb43-d712f2622ec8" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2013.png"><img style="width:1671px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2013.png"/></a></figure></li></ol><ol type="1" id="131aa64c-9d0a-8103-961b-fdea620536db" class="numbered-list" start="4"><li>Из вывода взять без кавычек значение поля<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-812a-a99f-e8f52073b016" class="code"><code class="language-Bash">&quot;data&quot;: {
  &quot;ca.crt&quot;:</code></pre><figure id="131aa64c-9d0a-811f-9796-e24c41aa4aa7" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2014.png"><img style="width:1615px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2014.png"/></a></figure></li></ol><ol type="1" id="131aa64c-9d0a-81c6-a22b-c6f7f741c616" class="numbered-list" start="5"><li>И вставить это значение в файл <strong>kuberconfig</strong> в поле <strong>certificate-authority-data</strong> вместо <strong>DATA+OMITTED</strong> <figure id="131aa64c-9d0a-81cb-838c-eaf63a06c92c" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2015.png"><img style="width:1667px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2015.png"/></a></figure></li></ol><ol type="1" id="131aa64c-9d0a-816a-a446-fa9f9428e666" class="numbered-list" start="6"><li>Выполнить<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8179-b571-f1c1f6d649b5" class="code"><code class="language-Bash">kubectl get secret/kubernetes-admin -o jsonpath=&#x27;{.data.token}&#x27; -n kubernetes-dashboard | base64 --decode</code></pre><figure id="131aa64c-9d0a-813b-8975-ffc4d610d1b6" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2016.png"><img style="width:1660px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2016.png"/></a></figure></li></ol><ol type="1" id="131aa64c-9d0a-81ea-8747-f3e51f0e297e" class="numbered-list" start="7"><li>В файле <strong>kuberconfig</strong> добавить поле token в конце и вставить в него полученное значение<figure id="131aa64c-9d0a-8126-bccb-e63fecaa8e8e" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2017.png"><img style="width:1655px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2017.png"/></a></figure></li></ol><ol type="1" id="131aa64c-9d0a-8147-81d5-fe21e7f60635" class="numbered-list" start="8"><li>Подключение<p id="131aa64c-9d0a-8165-a93f-c5c2715b0073" class="">Необходимо выбрать файл конфигурации и войти в Dashboard</p></li></ol></li></ul><h3 id="131aa64c-9d0a-81c8-a9e6-c49878bb4028" class="">2.1.5 Обзор Dashboard</h3><p id="131aa64c-9d0a-8180-9110-facdbd75eec7" class="">В верхней части Dashboard можно увидеть строку поиска и выподающий список namespaces.</p><figure id="131aa64c-9d0a-8186-be98-c977eb6584e8" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2018.png"><img style="width:1340px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2018.png"/></a></figure><figure id="131aa64c-9d0a-817f-a01d-dd59c6438ec7" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2019.png"><img style="width:336px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2019.png"/></a></figure><p id="131aa64c-9d0a-8136-ad46-e84856569348" class="">default - namespace, к которому относят все объекты, созданные пользователем</p><p id="131aa64c-9d0a-8152-ac07-d4492715ded9" class="">все остальные это сервисные namespace.</p><p id="131aa64c-9d0a-819a-b31f-d62bf3b7c67e" class="">Слева можно увидеть меню, в котором находятся все страницы.</p><figure id="131aa64c-9d0a-81dc-b4be-f473f31e8b06" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2020.png"><img style="width:312px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2020.png"/></a></figure><ol type="1" id="131aa64c-9d0a-811b-bca6-d9f717ede7c0" class="numbered-list" start="1"><li>Workload <p id="131aa64c-9d0a-8169-9622-e603b42a81cb" class="">Показывает все приложения, работающие в выбранном пространстве имен. В представлении перечислены приложения по типу рабочей нагрузки (например: Deployments, ReplicaSets, StatefulSets). Каждый вид рабочей нагрузки можно просмотреть отдельно. В списках суммируется полезная информация о рабочих нагрузках, например количество готовых модулей для ReplicaSet или текущее использование памяти для модуля.</p><p id="131aa64c-9d0a-81c0-ae4f-f825086188c1" class="">Подробные представления для рабочих нагрузок показывают информацию о состоянии и спецификациях, а также поверхностные связи между объектами. Например, модули, которыми управляет ReplicaSet, или новые наборы ReplicaSet и HorizontalPodAutoscalers для развертываний.</p></li></ol><ol type="1" id="131aa64c-9d0a-81a0-a429-de2f26af4720" class="numbered-list" start="2"><li>Services<p id="131aa64c-9d0a-8142-b7f4-dba922604404" class="">Показывает ресурсы Kubernetes, которые позволяют предоставлять сервисы внешнему миру и обнаруживать их внутри кластера. По этой причине в представлениях «Сервис» и «Ingrees» отображаются целевые модули, внутренние конечные точки для подключений к кластеру и внешние конечные точки для внешних пользователей.</p></li></ol><ol type="1" id="131aa64c-9d0a-816c-80b4-d4da03901f8c" class="numbered-list" start="3"><li>Config and Storage<br/>В представлении «Storage» отображаются ресурсы PersistentVolumeClaim, которые используются приложениями для хранения данных.<br/>Показывает все ресурсы Kubernetes, которые используются для динамической настройки приложений, работающих в кластерах. Представление позволяет редактировать и управлять объектами конфигурации и отображает секреты, скрытые по умолчанию.<br/></li></ol><ol type="1" id="131aa64c-9d0a-8194-9bde-d97a13bcd2e7" class="numbered-list" start="4"><li>Cluster<p id="131aa64c-9d0a-81cd-a8b5-e3ee4ada7e0c" class="">Предоставляет информацию о кластере: роли, события, сетевые политики и другие.</p><p id="131aa64c-9d0a-811c-9cf7-d978628e1954" class="">Как видите, навигация по веб-интерфейсу Kubernetes интуитивно понятна и предсказуема. Каждый раздел слева разделен на подразделы, которые позволяют легко визуализировать активные ресурсы. Так, например, если вам нужен обзор всех ресурсов в кластере, вы можете щелкнуть раздел «Кластер», но если вы хотите просмотреть только пространства имен, вы можете щелкнуть непосредственно по этому представлению.</p></li></ol><ol type="1" id="131aa64c-9d0a-8155-a9a0-e25c182816ef" class="numbered-list" start="5"><li>Custom Resource Definitions<p id="131aa64c-9d0a-81e9-a7bb-dfff9240fac7" class="">В том случае, если в кластере появится ресурсы, которые были определены пользователем, и, если они не относят ни к одному из выше перечисленных, то они будут отображаться здесь.</p></li></ol><ol type="1" id="131aa64c-9d0a-815a-8868-f13dce9ed0b9" class="numbered-list" start="6"><li>Settings<p id="131aa64c-9d0a-8101-a2b9-cc7ce7c0ef59" class="">Здесь находятся настройки Dashboard, например, можно изменить язык, количество отображаемых элементов на странице и другие настройки.</p></li></ol><ol type="1" id="131aa64c-9d0a-813b-8f93-d1a164dc3f95" class="numbered-list" start="7"><li>About<p id="131aa64c-9d0a-81ea-bd4f-d0c7f9cafaff" class="">Содержит информацию о Dashboard.</p></li></ol><h2 id="131aa64c-9d0a-8101-b74b-d81f1da792ce" class="">2.2 М<strong>ониторинга кластеров K8s</strong></h2><h3 id="131aa64c-9d0a-81c2-94bd-d9999df6c446" class="">2.2.1 Установка <strong>cAdvisor</strong></h3><ol type="1" id="131aa64c-9d0a-8116-b069-ce6c6a3c6e90" class="numbered-list" start="1"><li>Необходимо создать namespace<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-811f-96ad-d6903804c233" class="code"><code class="language-Bash">kubectl create ns monitoring</code></pre></li></ol><ol type="1" id="131aa64c-9d0a-81fb-bcfb-ea6cf2bb54c7" class="numbered-list" start="2"><li>Создадим файл с конфигурацией<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8132-8947-c7c3a34dcdd3" class="code"><code class="language-Bash">nano cadvisor.yaml</code></pre></li></ol><ol type="1" id="131aa64c-9d0a-8188-80de-d8f49ce3f094" class="numbered-list" start="3"><li>Добавим в него следующие строки:<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-817b-8ece-d71dc8d2a27e" class="code"><code class="language-Bash">apiVersion: apps/v1
kind: DaemonSet
metadata:
  name: cadvisor
  namespace: monitoring
spec:
  selector:
    matchLabels:
      name: cadvisor
  template:
    metadata:
      labels:
        name: cadvisor
    spec:
      hostNetwork: true
      containers:
      - name: cadvisor
        image: gcr.io/cadvisor/cadvisor:v0.49.1
        ports:
        - containerPort: 8080
          hostPort: 8080
        resources:
          limits:
            cpu: 100m
            memory: 200Mi
          requests:
            cpu: 100m
            memory: 200Mi
        volumeMounts:
        - mountPath: /rootfs
          name: rootfs
          readOnly: true
        - mountPath: /var/run
          name: var-run
          readOnly: false
      volumes:
      - name: rootfs
        hostPath:
          path: /
      - name: var-run
        hostPath:
          path: /var/run      </code></pre></li></ol><ol type="1" id="131aa64c-9d0a-8134-86d1-f291d25b76ed" class="numbered-list" start="4"><li>Применим конфигурацию<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81bc-be9b-d8def309f73c" class="code"><code class="language-Bash">kubectl apply -f cadvisor.yaml</code></pre></li></ol><ol type="1" id="131aa64c-9d0a-8199-903b-e630f6ca1fee" class="numbered-list" start="5"><li>Проверим, что необходимые поды создались:<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8159-8e27-f337e91f9922" class="code"><code class="language-Bash">kubectl get pods -n monitoring</code></pre><figure class="block-color-orange_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-81de-88b5-f9b02371b36f"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Важно указать namespace (-n monitoring), так как если этого не сделать, то будут выведены поды, которые относятся к namespace по умолчанию.</div></figure><figure id="131aa64c-9d0a-8115-88a6-d2d57c063958" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2021.png"><img style="width:672px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2021.png"/></a></figure></li></ol><ol type="1" id="131aa64c-9d0a-8121-9a38-f3afef5a8f10" class="numbered-list" start="6"><li>Перейдем по пути <code><strong>http://&lt;node-ip&gt;:&lt;port&gt;</strong></code><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-813a-9cdc-f40b49a53479" class="code"><code class="language-Bash">http://192.168.133.166:8080/</code></pre><figure class="block-color-orange_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-81c2-8087-d79d1b7cc2d0"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">IP-адрес и порт могут отличаться. При копировании команды необходимо перепроверить соответствие IP-адреса и порта вашей конфигурации.</div></figure><figure id="131aa64c-9d0a-813b-b134-e05fb272d943" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2022.png"><img style="width:1466px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2022.png"/></a></figure><p id="131aa64c-9d0a-8125-9c7b-c4bcf330c79d" class="">cAdvisor дает возможность получить информацию о загруженности CPU узла, использовании оперативной памяти узла, сетевому трафику на узле и использованию файловой системы узла.</p></li></ol><h3 id="131aa64c-9d0a-8185-9632-f6c346f061fb" class="">2.2.2 Установка <strong>Prometheus</strong></h3><p id="131aa64c-9d0a-81a2-af30-caa6ecd26d1a" class="">По умолчанию cAdvisor предоставляет метрики Prometheus в конечной точке /metrics.<br/>Поскольку метрики уже находятся в формате Prometheus, и cAdvisor автоматически экспортирует их на общеизвестную конечную точку, нам не нужно изменять существующее развертывание cAdvisor. Вместо этого мы можем установить и настроить Prometheus для сбора метрик из конечной точки /metrics.<br/></p><ol type="1" id="131aa64c-9d0a-81f4-b36f-e6f985ba50f3" class="numbered-list" start="1"><li>Склонируем репозиторий kube-prometheus:<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8153-92d8-c291d518173f" class="code"><code class="language-Bash">git clone https://github.com/prometheus-operator/kube-prometheus.git</code></pre><figure id="131aa64c-9d0a-816b-8020-f052e5c8f547" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2023.png"><img style="width:1090px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2023.png"/></a></figure></li></ol><ol type="1" id="131aa64c-9d0a-81e6-ae18-db99afd41d2d" class="numbered-list" start="2"><li>Перейдем в папку kube-prometheus и развернем CRD:<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-815d-9cbb-d2438a7a5622" class="code"><code class="language-Bash">cd kube-prometheus/
kubectl apply --server-side -f manifests/setup</code></pre></li></ol><ol type="1" id="131aa64c-9d0a-81e8-8237-ce56327afde7" class="numbered-list" start="3"><li>Подождем немного, пока CRD будут применены, а затем создайте deployment:<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8174-a958-f92f8e062f62" class="code"><code class="language-Bash">kubectl wait \
	--for condition=Established \
	--all CustomResourceDefinition \
	--namespace=monitoring

kubectl apply -f manifests/</code></pre></li></ol><ol type="1" id="131aa64c-9d0a-81bd-9bd6-f79725892307" class="numbered-list" start="4"><li>Проверим запуск deployment:<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81f2-8289-f7478c7a2275" class="code"><code class="language-Bash">kubectl get pod -n monitoring</code></pre></li></ol><ol type="1" id="131aa64c-9d0a-81a2-9694-d5d843b5c92a" class="numbered-list" start="5"><li>Сервис prometheus-k8s для доступа к web-интерфесу имеет по умолчанию тип ClusterIP, чтобы можно было получить доступ, нужно изменить тип на NodePort<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81f7-bc80-f7fb52a707c9" class="code"><code class="language-Bash">kubectl edit svc/prometheus-k8s -n monitoring</code></pre><figure id="131aa64c-9d0a-8198-81f8-c3e8dc13493d" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2024.png"><img style="width:1206px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2024.png"/></a></figure></li></ol><ol type="1" id="131aa64c-9d0a-8110-bd29-f9ae57891189" class="numbered-list" start="6"><li>Чтобы узнать, к какому порту подключаться необходимо выполнить команду:<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81b5-bb40-f9f15672ced1" class="code"><code class="language-Bash">kubectl get svc/prometheus-k8s -n monitoring</code></pre><figure id="131aa64c-9d0a-8154-978a-f17a061ab2ce" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2025.png"><img style="width:1147px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2025.png"/></a></figure></li></ol><ol type="1" id="131aa64c-9d0a-810a-925f-fc9bfabd1907" class="numbered-list" start="7"><li>После того, как вы все развернули, вы можете открыть пользовательский интерфейс Prometheus<code><strong>http://&lt;node-ip&gt;:&lt;port&gt;</strong></code><strong> :</strong><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81de-81e1-f35a22dc6025" class="code"><code class="language-Bash">http://192.168.133.166:31439/</code></pre><figure class="block-color-orange_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-8175-b1f9-c3655d1f9a97"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">IP-адрес и порт могут отличаться. При копировании команды необходимо перепроверить соответствие IP-адреса и порта вашей конфигурации.</div></figure><figure id="131aa64c-9d0a-817d-a2c6-e8985937a986" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2026.png"><img style="width:1733px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2026.png"/></a></figure></li></ol><h3 id="131aa64c-9d0a-815c-84d1-e1176a2018d4" class="">2.2.3 Установка Grafana</h3><p id="131aa64c-9d0a-8141-8913-e23abc971543" class="">Grafana устанавливается как часть оператора kube-prometheus. </p><ol type="1" id="131aa64c-9d0a-811c-b253-fc198d93a671" class="numbered-list" start="1"><li>Чтобы можно было получить доступ к пользовательскому интерфейсу <strong>Grafana</strong>, нужно изменить тип на NodePort:<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81c1-b4be-df25fabd9bc2" class="code"><code class="language-Bash">kubectl edit svc/grafana -n monitoring</code></pre><figure id="131aa64c-9d0a-81ed-bf26-e4c6baa56ad3" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2027.png"><img style="width:1168px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2027.png"/></a></figure></li></ol><ol type="1" id="131aa64c-9d0a-8128-ade6-db3465f383e6" class="numbered-list" start="2"><li>Чтобы узнать, к какому порту подключаться необходимо выполнить команду:<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-812b-b74b-db199820bc42" class="code"><code class="language-Bash">kubectl get svc/grafana -n monitoring</code></pre><figure id="131aa64c-9d0a-8147-a3a2-e32b4d52e82e" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2028.png"><img style="width:873px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2028.png"/></a></figure></li></ol><ol type="1" id="131aa64c-9d0a-8104-88ae-cb45b3b645a3" class="numbered-list" start="3"><li>После того, как вы все развернули, вы можете открыть пользовательский интерфейс <strong>Grafana </strong><code><strong>http://&lt;node-ip&gt;:&lt;port&gt;</strong></code><strong> :</strong><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-814c-b9d7-edd7e8fc46a4" class="code"><code class="language-Bash">http://192.168.133.166:30543/</code></pre><figure class="block-color-orange_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-8186-9a6a-e617c1198467"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">IP-адрес и порт могут отличаться. При копировании команды необходимо перепроверить соответствие IP-адреса и порта вашей конфигурации.</div></figure><figure id="131aa64c-9d0a-8103-95ba-cf4c3a4fabf8" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2029.png"><img style="width:1262px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2029.png"/></a></figure><figure class="block-color-purple_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-8196-8fed-da8f358d0230"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Данные пользователя по умолчанию: admin:admin</div></figure></li></ol><h3 id="131aa64c-9d0a-815b-88e8-d4f1650f6e95" class="">2.2.4 Настройка</h3><p id="131aa64c-9d0a-8101-8d00-e040d61dbce6" class="">Для проверки работоспособности необходимо открыть боковую панель, выбрать Dashboards.</p><p id="131aa64c-9d0a-8116-b1a8-f4733d512e6f" class="">Открыть папку default и выбрать любой.</p><figure id="131aa64c-9d0a-81bb-aa0c-db862a6ef16c" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2030.png"><img style="width:1794px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2030.png"/></a></figure><p id="131aa64c-9d0a-818e-88a6-dbdf29134f9e" class="">В том случае, если Grafana не подтягивает данные необходимо перейти во вкладку Connections на боковой панели. Перейти во вкладку Data Sources и нажать кнопку <strong>Add data source. </strong>В открывшемся меню выбрать <strong>Prometheus. </strong></p><p id="131aa64c-9d0a-8151-9a3b-da3fd9cfadc4" class="">Далее необходимо указать ClusterIP-адрес сервиса <strong>Prometheus </strong>и порт. Также можно выбрать этот источник данных по умолчанию (переключатель рядом с названием)</p><figure id="131aa64c-9d0a-816b-a171-f0a43c7c0dac" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2031.png"><img style="width:1295px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2031.png"/></a></figure><figure class="block-color-orange_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-8114-a30e-c77e5fb524d1"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">IP-адрес и порт могут отличаться. При копировании команды необходимо перепроверить соответствие IP-адреса и порта вашей конфигурации.</div></figure><figure class="block-color-purple_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-815a-91f9-ca7722445159"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Это проблема возникает из-за того, что мы для подключения к Web-интерфейсу <strong>Prometheus </strong>указали тип сети NodePort. В этом случае внутри кластера сервисы не могут обратиться к сервису <strong>Prometheus </strong>по имени, а источник данных по умолчанию обращается именно по имени. </div></figure><p id="131aa64c-9d0a-81e2-84a7-e698756a1bf8" class="">Чтобы получить метрики cAdvisor в Grafana, мы установим панель мониторинга кластера Kubernetes (через Prometheus) из Grafana.</p><ol type="1" id="131aa64c-9d0a-8139-8205-cf825afcda6f" class="numbered-list" start="1"><li>В Grafana перейдите к кнопке «+» на боковой панели.</li></ol><ol type="1" id="131aa64c-9d0a-81cf-88c8-ef86deb614dd" class="numbered-list" start="2"><li>Нажмите импортировать<ol type="a" id="131aa64c-9d0a-8154-a8c1-e7961129f0fd" class="numbered-list" start="1"><li>Указать id (315)<figure id="131aa64c-9d0a-8151-a9d2-cb5e60c25d30" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2032.png"><img style="width:862px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2032.png"/></a></figure></li></ol><ol type="a" id="131aa64c-9d0a-81ce-ac1b-cd930ceb45f4" class="numbered-list" start="2"><li>Можно перейти на сайт <a href="https://grafana.com/grafana/dashboards/315/revisions">Kubernetes cluster monitoring (via Prometheus)</a> и скачать JSON-файл с конфигурацией dashboard и загрузить его.<figure id="131aa64c-9d0a-81ef-b42e-e372ae2b8b86" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2033.png"><img style="width:944px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2033.png"/></a></figure></li></ol></li></ol><ol type="1" id="131aa64c-9d0a-81aa-8405-e70a2b4dd679" class="numbered-list" start="3"><li>Просмотр dashboard<figure id="131aa64c-9d0a-8112-8fcd-df1716c4864b" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2034.png"><img style="width:1779px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2034.png"/></a></figure></li></ol><h2 id="131aa64c-9d0a-818b-b7c8-e5644b9970a3" class="">2.3 М<strong>ониторинга контейнеров Docker</strong></h2><p id="131aa64c-9d0a-8134-8fd7-f279aa08e7ec" class="">Для мониторинга Docker инфрастуктуры будем использовать следующий набор сервисов</p><figure id="131aa64c-9d0a-811f-af08-e8b12d552ab1" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled.jpeg"><img style="width:1673px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled.jpeg"/></a></figure><h3 id="131aa64c-9d0a-8122-9d90-e771acbf69d1" class="">2.3.1 Подготовка</h3><ol type="1" id="131aa64c-9d0a-81b9-a08b-f643a60bb3db" class="numbered-list" start="1"><li>Создадим директорию и переходим в нее<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-813d-8104-f6e579d60a26" class="code"><code class="language-Bash">mkdir monitoring
cd monitoring</code></pre></li></ol><ol type="1" id="131aa64c-9d0a-8107-b0d1-d0257a5129fa" class="numbered-list" start="2"><li>Внутри директории создаем поддиректорий, в которых будут храниться конфигурационные файлы соответсвующих сервисов<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-818a-a3df-c136d57885cb" class="code"><code class="language-Bash">mkdir alertmanager caddy grafana loki promtail prometheus</code></pre><figure id="131aa64c-9d0a-81d6-8ea1-e9568fbbd87e" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2035.png"><img style="width:1025px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2035.png"/></a></figure></li></ol><h3 id="131aa64c-9d0a-81b9-b7db-fe79cdc8c682" class="">2.3.2 Конфигурирование prometheus</h3><ol type="1" id="131aa64c-9d0a-814d-970d-f165a0ede8f5" class="numbered-list" start="1"><li>Переходим в директорию prometheus<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81ab-8be5-c3e1305649e0" class="code"><code class="language-Bash">cd prometheus</code></pre></li></ol><ol type="1" id="131aa64c-9d0a-81a7-865d-d9cea124cd81" class="numbered-list" start="2"><li>Открываем для редактирования конфигурационный файл<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81be-8e38-ed7db642c479" class="code"><code class="language-Bash">nano prometheus.yml</code></pre><p id="131aa64c-9d0a-8119-9f0f-d2c9015ca904" class="">Вносим в него слеудющие строки:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81b8-a084-f708ea9fecca" class="code"><code class="language-Bash">global:
  scrape_interval:     15s
  evaluation_interval: 15s

  external_labels:
    monitor: &#x27;docker-host-alpha&#x27;

rule_files:
  - &quot;alert.rules&quot;
  
scrape_configs:
  - job_name: &#x27;nodeexporter&#x27;
    scrape_interval: 5s
    static_configs:
      - targets: [&#x27;nodeexporter:9100&#x27;]

  - job_name: &#x27;cadvisor&#x27;
    scrape_interval: 5s
    static_configs:
      - targets: [&#x27;cadvisor:8080&#x27;]

  - job_name: &#x27;prometheus&#x27;
    scrape_interval: 10s
    static_configs:
      - targets: [&#x27;localhost:9090&#x27;]

  - job_name: &#x27;loki&#x27;
    scrape_interval: 5s
    static_configs:
      - targets: [&#x27;loki:3100&#x27;]

  - job_name: &#x27;pushgateway&#x27;
    scrape_interval: 10s
    honor_labels: true
    static_configs:
      - targets: [&#x27;pushgateway:9091&#x27;]


alerting:
  alertmanagers:
  - scheme: http
    static_configs:
    - targets: 
      - &#x27;alertmanager:9093&#x27;</code></pre><figure class="block-color-orange_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-81f0-af94-f583a95acdad"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Обратите внимание что в языке разметки YAML необходимо соблюдать отступы строк, иначе файл станет невалидным.</div></figure><p id="131aa64c-9d0a-818b-bbe5-ee12004210ba" class="">В нем описаны следующие настройки:</p><ol type="1" id="131aa64c-9d0a-819e-b8cc-c1ba1e1954ed" class="numbered-list" start="1"><li><strong>Глобальные настройки:</strong><ul id="131aa64c-9d0a-81c3-b77b-f6e3e2e37397" class="bulleted-list"><li style="list-style-type:disc"><code><strong>scrape_interval</strong></code>: Интервал времени между последовательными запросами к целям для сбора метрик.</li></ul><ul id="131aa64c-9d0a-8130-9b93-cdfa457b39a8" class="bulleted-list"><li style="list-style-type:disc"><code><strong>evaluation_interval</strong></code>: Интервал времени, с которым выполняется оценка правил предупреждения.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-812c-9468-c4687ab66c28" class="numbered-list" start="2"><li><strong>Внешние метки:</strong><ul id="131aa64c-9d0a-8169-9a2f-ff8bdc5b4532" class="bulleted-list"><li style="list-style-type:disc">Здесь определены внешние метки, которые будут добавляться ко всем метрикам. Например, &quot;monitor: &#x27;docker-host-alpha&#x27;&quot;.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-81de-b5ee-f0f13578546b" class="numbered-list" start="3"><li><strong>Файлы правил:</strong><ul id="131aa64c-9d0a-81c0-86e4-c1afefa72810" class="bulleted-list"><li style="list-style-type:disc">Указывается файл, содержащий правила предупреждения (<code><strong>alert.rules</strong></code>).</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-81b4-a583-fe60d4d9a7bd" class="numbered-list" start="4"><li><strong>Конфигурации сбора:</strong><ul id="131aa64c-9d0a-8106-b986-c04cd1eeb7e9" class="bulleted-list"><li style="list-style-type:disc">Каждая секция <code><strong>scrape_configs</strong></code> определяет цели сбора метрик для различных сервисов.</li></ul><ul id="131aa64c-9d0a-81a3-9e06-dcf827636e42" class="bulleted-list"><li style="list-style-type:disc">В данном файле определены цели для Node Exporter, cAdvisor, Prometheus, Loki и Pushgateway.</li></ul><ul id="131aa64c-9d0a-8103-90ce-c926fc7164d0" class="bulleted-list"><li style="list-style-type:disc">Для каждого сервиса указывается имя работы (<code><strong>job_name</strong></code>), интервал сбора метрик (<code><strong>scrape_interval</strong></code>) и список целей (<code><strong>targets</strong></code>).</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-817d-9192-cc15ccb89b0d" class="numbered-list" start="5"><li><strong>Оповещения:</strong><ul id="131aa64c-9d0a-81a2-b65d-f289e86660b1" class="bulleted-list"><li style="list-style-type:disc">Определяется конфигурация для оповещений.</li></ul><ul id="131aa64c-9d0a-81ee-9ff3-ea0756fc9d42" class="bulleted-list"><li style="list-style-type:disc">Здесь указываются Alertmanagers, куда будут отправляться оповещения.</li></ul><ul id="131aa64c-9d0a-81a3-8ee2-e0933ac4f2cd" class="bulleted-list"><li style="list-style-type:disc">Схема (например, HTTP) и цели Alertmanager&#x27;ов указываются здесь.</li></ul></li></ol></li></ol><ol type="1" id="131aa64c-9d0a-8166-bf15-f1f2901245af" class="numbered-list" start="3"><li>Создадим файл, содержащий правила предупрждения<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8103-9b1e-cdddcb6f56c4" class="code"><code class="language-Bash">nano alert.rules</code></pre><p id="131aa64c-9d0a-81ae-a49b-e8d90ac592be" class="">Внесем в него следующие строки:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-812c-90c1-d935f17b2cd0" class="code"><code class="language-Bash">groups:
- name: targets
  rules:
  - alert: monitor_service_down
    expr: up == 0
    for: 30s
    labels:
      severity: critical
    annotations:
      summary: &quot;Monitor service non-operational&quot;
      description: &quot;Service {{ $labels.instance }} is down.&quot;
      
      
- name: test
  rules:
  - alert: PrometheusTargetMissing
    expr: up == 0
    for: 0m
    labels:
      severity: critical
    annotations:
      summary: &quot;Prometheus target missing (instance {{ $labels.instance }})&quot;
      description: &quot;A Prometheus target has disappeared. An exporter might be crashed. VALUE = {{ $value }}  LABELS: {{ $labels }}&quot;

- name: host
  rules:
  - alert: high_cpu_load
    expr: node_load1 &gt; 1.5
    for: 30s
    labels:
      severity: warning
    annotations:
      summary: &quot;Server under high load&quot;
      description: &quot;Docker host is under high load, the avg load 1m is at {{ $value}}. Reported by instance {{ $labels.instance }} of job {{ $labels.job }}.&quot;

  - alert: high_memory_load
    expr: (sum(node_memory_MemTotal_bytes) - sum(node_memory_MemFree_bytes + node_memory_Buffers_bytes + node_memory_Cached_bytes) ) / sum(node_memory_MemTotal_bytes) * 100 &gt; 85
    for: 30s
    labels:
      severity: warning
    annotations:
      summary: &quot;Server memory is almost full&quot;
      description: &quot;Docker host memory usage is {{ humanize $value}}%. Reported by instance {{ $labels.instance }} of job {{ $labels.job }}.&quot;

  - alert: high_storage_load
    expr: (node_filesystem_avail_bytes{mountpoint=&quot;/&quot;} - node_filesystem_avail_bytes{mountpoint=&quot;/&quot;}) / node_filesystem_avail_bytes{mountpoint=&quot;/&quot;}  * 100 &gt; 85
    for: 30s
    labels:
      severity: warning
    annotations:
      summary: &quot;Server storage is almost full&quot;
      description: &quot;Docker host storage usage is {{ humanize $value}}%. Reported by instance {{ $labels.instance }} of job {{ $labels.job }}.&quot;</code></pre><figure class="block-color-orange_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-8173-827f-f84a40fb84dc"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Обратите внимание что в языке разметки YAML необходимо соблюдать отступы строк, иначе файл станет невалидным.</div></figure><p id="131aa64c-9d0a-814e-a408-cf5a29f14bee" class="">Файл <code><strong>alert.rules</strong></code> содержит определения правил тревог.</p><p id="131aa64c-9d0a-81b6-a75e-f6e99d39c259" class=""><strong>Описание параметров:</strong><div class="indented"><ul id="131aa64c-9d0a-81a0-a62a-f4b240dd8ca8" class="bulleted-list"><li style="list-style-type:disc">Имя оповещения (например, monitor_service_down)</li></ul><ul id="131aa64c-9d0a-8128-8e00-c630e6879fea" class="bulleted-list"><li style="list-style-type:disc">Выражение для срабатывания оповещения (например, up == 0)</li></ul><ul id="131aa64c-9d0a-811c-9e5d-fc6954e63500" class="bulleted-list"><li style="list-style-type:disc">Продолжительность, в течение которой условие должно сохраняться, прежде чем сработать (например, 30s)</li></ul><ul id="131aa64c-9d0a-81aa-b9e6-f7d6956db0fe" class="bulleted-list"><li style="list-style-type:disc">Уровень серьезности (критический или предупреждение)</li></ul><ul id="131aa64c-9d0a-8169-8fcf-fb13a959ef76" class="bulleted-list"><li style="list-style-type:disc">Метки для категоризации оповещений</li></ul><ul id="131aa64c-9d0a-819a-9ffc-dbdf6215c1f8" class="bulleted-list"><li style="list-style-type:disc">Аннотации для сводки и описания</li></ul></div></p><p id="131aa64c-9d0a-81a2-99da-d2c5bec2ed4a" class=""><strong>Конкретные оповещения:</strong></p><ul id="131aa64c-9d0a-8190-af51-d3ac217b66a3" class="bulleted-list"><li style="list-style-type:disc"><strong>Группа targets:</strong><ul id="131aa64c-9d0a-8107-b589-c1bfe65fafaa" class="bulleted-list"><li style="list-style-type:circle"><code>monitor_service_down</code>: Срабатывает, когда отслеживаемая служба не работает в течение 30 секунд.</li></ul><ul id="131aa64c-9d0a-812d-82d5-c78901827292" class="bulleted-list"><li style="list-style-type:circle"><code>PrometheusTargetMissing</code>: Срабатывает сразу, когда цель Prometheus становится недоступной.</li></ul></li></ul><ul id="131aa64c-9d0a-81c5-bba2-d2a8c3ab4d47" class="bulleted-list"><li style="list-style-type:disc"><strong>Группа host:</strong><ul id="131aa64c-9d0a-8105-8f9a-ec359bb6e431" class="bulleted-list"><li style="list-style-type:circle"><code>high_cpu_load</code>: Срабатывает, когда нагрузка на CPU превышает 1,5 в течение 30 секунд.</li></ul><ul id="131aa64c-9d0a-81d4-9802-c11610ce0536" class="bulleted-list"><li style="list-style-type:circle"><code>high_memory_load</code>: Срабатывает, когда использование памяти превышает 85% в течение 30 секунд.</li></ul><ul id="131aa64c-9d0a-817e-a067-e3b8122f18ff" class="bulleted-list"><li style="list-style-type:circle"><code>high_storage_load</code>: Срабатывает, когда использование хранилища на файловой системе AUFS превышает 85% в течение 30 секунд.</li></ul></li></ul></li></ol><h3 id="131aa64c-9d0a-8143-b914-d294694360fb" class="">2.3.3 Конфигурирование loki</h3><ol type="1" id="131aa64c-9d0a-81e7-9d22-ce8fbd51e937" class="numbered-list" start="1"><li>Переходим в директорию loki<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8120-bea3-d6342ea90926" class="code"><code class="language-Bash">cd ../loki</code></pre></li></ol><ol type="1" id="131aa64c-9d0a-81a5-834c-f568394cf460" class="numbered-list" start="2"><li>Создаем файл конфигурации<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81ec-b543-e32fa9e558a2" class="code"><code class="language-Bash">nano loki-config.yaml</code></pre><p id="131aa64c-9d0a-819c-af00-c167963cb6a3" class="">Внесем в него следующие строки:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81c3-aa93-d64c87f5fdfd" class="code"><code class="language-Bash">auth_enabled: false

server:
  http_listen_address: 0.0.0.0
  grpc_listen_address: 0.0.0.0
  http_listen_port: 3100
  grpc_listen_port: 9095
  log_level: info

common:
  path_prefix: /tmp/loki
  storage:
    filesystem:
      chunks_directory: /tmp/loki/chunks
      rules_directory: /tmp/loki/rules
  replication_factor: 1
  ring:
    instance_addr: 127.0.0.1
    kvstore:
      store: inmemory

schema_config:
  configs:
    - from: 2020-10-24
      store: boltdb-shipper
      object_store: filesystem
      schema: v11
      index:
        prefix: index_
        period: 24h

limits_config:
  ingestion_rate_mb: 1024
  ingestion_burst_size_mb: 1024

ruler:
  alertmanager_url: http://localhost:9093</code></pre><figure class="block-color-orange_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-81fa-8b9b-cf58f6335681"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Обратите внимание что в языке разметки YAML необходимо соблюдать отступы строк, иначе файл станет невалидным.</div></figure><ol type="1" id="131aa64c-9d0a-8116-b10d-f99b26c9bf93" class="numbered-list" start="1"><li><strong>Аутентификация:</strong><ul id="131aa64c-9d0a-8175-973f-ff0db1c0d94e" class="bulleted-list"><li style="list-style-type:disc"><code><strong>auth_enabled: false</strong></code> указывает, что аутентификация отключена.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-8103-b74a-c4f632d81afa" class="numbered-list" start="2"><li><strong>Настройки сервера:</strong><ul id="131aa64c-9d0a-8123-bd15-f36b316f410a" class="bulleted-list"><li style="list-style-type:disc"><code><strong>http_listen_address</strong></code> и <code><strong>grpc_listen_address</strong></code> определяют адреса, на которых будет прослушиваться HTTP и gRPC.</li></ul><ul id="131aa64c-9d0a-81c3-b22e-ee933bcd6ff0" class="bulleted-list"><li style="list-style-type:disc"><code><strong>http_listen_port</strong></code> и <code><strong>grpc_listen_port</strong></code> задают порты для HTTP и gRPC соответственно.</li></ul><ul id="131aa64c-9d0a-815a-8df8-f8ff141bcd5a" class="bulleted-list"><li style="list-style-type:disc"><code><strong>log_level: info</strong></code> устанавливает уровень журналирования на info.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-81af-897e-daf5baed584f" class="numbered-list" start="3"><li><strong>Общие настройки:</strong><ul id="131aa64c-9d0a-818e-a62a-e955ee5febaa" class="bulleted-list"><li style="list-style-type:disc"><code><strong>path_prefix</strong></code> указывает префикс для путей к файлам, используемым Loki.</li></ul><ul id="131aa64c-9d0a-819e-9505-e680b8426f01" class="bulleted-list"><li style="list-style-type:disc">Настройки хранения определяют расположение каталогов для хранения кусков и правил.</li></ul><ul id="131aa64c-9d0a-8191-8b98-c06364376e78" class="bulleted-list"><li style="list-style-type:disc"><code><strong>replication_factor: 1</strong></code> устанавливает коэффициент репликации для данных.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-8137-b47b-f666ea81ce0e" class="numbered-list" start="4"><li><strong>Конфигурация схемы:</strong><ul id="131aa64c-9d0a-816e-af28-d99d1fbdc9ee" class="bulleted-list"><li style="list-style-type:disc"><code><strong>schema_config</strong></code> определяет настройки схемы для индексирования журнальных данных.</li></ul><ul id="131aa64c-9d0a-81f8-88ab-f53867eab7b1" class="bulleted-list"><li style="list-style-type:disc"><code><strong>from</strong></code> указывает начальную дату для схемы.</li></ul><ul id="131aa64c-9d0a-81bf-958e-ff9e334bc921" class="bulleted-list"><li style="list-style-type:disc"><code><strong>store</strong></code> и <code><strong>object_store</strong></code> определяют хранилище данных.</li></ul><ul id="131aa64c-9d0a-8146-8d7c-c23a0be05477" class="bulleted-list"><li style="list-style-type:disc"><code><strong>schema: v11</strong></code> определяет версию схемы.</li></ul><ul id="131aa64c-9d0a-8166-8106-d9209c97d2e3" class="bulleted-list"><li style="list-style-type:disc">Настройки индексации определяют префикс и период индексации.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-8151-a41a-f1d3e4d4d263" class="numbered-list" start="5"><li><strong>Ограничения конфигурации:</strong><ul id="131aa64c-9d0a-8188-9bb6-dca0bff2d23d" class="bulleted-list"><li style="list-style-type:disc"><code><strong>limits_config</strong></code> задает ограничения на скорость приема данных и размер буфера для приема данных.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-8150-a304-c383e19a345c" class="numbered-list" start="6"><li><strong>Настройки правил:</strong><ul id="131aa64c-9d0a-81f1-bbd1-f4bd3ebbc705" class="bulleted-list"><li style="list-style-type:disc"><code><strong>ruler</strong></code> указывает URL Alertmanager для отправки правил.</li></ul></li></ol></li></ol><h3 id="131aa64c-9d0a-816d-9a17-d7c49c802bca" class="">2.3.4 Конфигурирование promtail</h3><ol type="1" id="131aa64c-9d0a-8114-b33b-f8a14ce48af7" class="numbered-list" start="1"><li>Переходим в директорию promtail<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-817b-8212-ca10a03c478d" class="code"><code class="language-Bash">cd ../promtail</code></pre></li></ol><ol type="1" id="131aa64c-9d0a-816e-bb6c-d55ca22f3b08" class="numbered-list" start="2"><li>Создаем файл конфигурации:<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-812d-978e-ef5913a4611a" class="code"><code class="language-Bash">nano promtail-config.yaml</code></pre><p id="131aa64c-9d0a-813d-ae0b-cc353b949478" class="">Внесем в него следующие строки:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-810f-af5f-df9de52b12a1" class="code"><code class="language-Bash">server:
  http_listen_port: 9080
  grpc_listen_port: 0

positions:
  filename: /tmp/positions.yaml

clients:
  - url: http://loki:3100/loki/api/v1/push
    external_labels:
      host: docker

scrape_configs:
  - job_name: container_logs
    docker_sd_configs:
      - host: unix:///var/run/docker.sock
        refresh_interval: 5s
    relabel_configs:
      - source_labels: [&#x27;__meta_docker_container_name&#x27;]
        regex: &#x27;/(.*)&#x27;
        target_label: &#x27;container&#x27;

  - job_name: system
    static_configs:
    - targets:
        - localhost
      labels:
        job: varlogs
        __path__: /var/log/*log</code></pre><figure class="block-color-orange_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-8158-b09c-e727ad4838ec"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Обратите внимание что в языке разметки YAML необходимо соблюдать отступы строк, иначе файл станет невалидным.</div></figure><ol type="1" id="131aa64c-9d0a-81e9-801b-ee16b4756225" class="numbered-list" start="1"><li><strong>Настройки сервера:</strong><ul id="131aa64c-9d0a-8188-8706-d8e6f8a535e9" class="bulleted-list"><li style="list-style-type:disc"><code><strong>http_listen_port: 9080</strong></code> определяет порт, на котором сервер будет прослушивать HTTP-запросы.</li></ul><ul id="131aa64c-9d0a-81c7-8198-e5477de5b4b6" class="bulleted-list"><li style="list-style-type:disc"><code><strong>grpc_listen_port: 0</strong></code> указывает на то, что gRPC прослушивание отключено.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-8102-bffd-c9abc94d3f83" class="numbered-list" start="2"><li><strong>Позиции:</strong><ul id="131aa64c-9d0a-8132-91bd-d2a153ec17a2" class="bulleted-list"><li style="list-style-type:disc"><code><strong>filename: /tmp/positions.yaml</strong></code> определяет путь к файлу, в котором будут храниться позиции в журналах для отслеживания прогресса чтения.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-816f-91a8-e3a0e581704a" class="numbered-list" start="3"><li><strong>Клиенты:</strong><ul id="131aa64c-9d0a-81ac-8f3c-e252d85b2cf2" class="bulleted-list"><li style="list-style-type:disc">Определен один клиент для отправки данных в Loki.</li></ul><ul id="131aa64c-9d0a-81d5-bb2f-e0053d937fa8" class="bulleted-list"><li style="list-style-type:disc"><code><strong>url: http://loki:3100/loki/api/v1/push</strong></code> указывает адрес, по которому Loki принимает данные.</li></ul><ul id="131aa64c-9d0a-8180-b66e-e6c3d2b66bf7" class="bulleted-list"><li style="list-style-type:disc"><code><strong>external_labels</strong></code> содержит дополнительные метки, которые будут добавлены к каждому отправляемому событию.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-8141-89b5-de4920431e6e" class="numbered-list" start="4"><li><strong>Конфигурация сбора метрик:</strong><ul id="131aa64c-9d0a-81ad-ac5d-f31581bb9fbc" class="bulleted-list"><li style="list-style-type:disc">Определены два сборщика метрик.</li></ul><ul id="131aa64c-9d0a-8153-abe8-cf574a055ad8" class="bulleted-list"><li style="list-style-type:disc"><code><strong>container_logs</strong></code> использует Docker Service Discovery для сбора журнальных данных из контейнеров Docker.</li></ul><ul id="131aa64c-9d0a-81f5-876e-d0209e431c7c" class="bulleted-list"><li style="list-style-type:disc"><code><strong>system</strong></code> использует статическую конфигурацию для сбора системных журналов с локальной машины.</li></ul></li></ol></li></ol><h3 id="131aa64c-9d0a-8196-b628-d5a64332508c" class="">2.3.5 Конфигурирование alertmanager</h3><ol type="1" id="131aa64c-9d0a-8159-b01c-e5c515a6cc3c" class="numbered-list" start="1"><li>Переходим в директорию alertmanager<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81ce-87c5-f5552aee3de9" class="code"><code class="language-Bash">cd ../alertmanager</code></pre></li></ol><ol type="1" id="131aa64c-9d0a-8184-91bb-c5f1e2e859c6" class="numbered-list" start="2"><li>Создаем файл конфигурации:<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81f4-8330-d08297c7bfff" class="code"><code class="language-Bash">nano config.yml</code></pre><p id="131aa64c-9d0a-8156-9a50-f94ba34da777" class="">Внесем в него следующие строки:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81a2-bf2a-e9b3da17d297" class="code"><code class="language-Bash">route:
	receiver: default-telegram

receivers:
- name: &#x27;default-telegram&#x27;
  telegram_configs:
  - api_url: https://api.telegram.org
    chat_id: 1000000000
    bot_token: 7000000000:aaaaaaaaaaa_a_aaaaaaaaa
    disable_notifications: false
    http_config:
      follow_redirects: true
    send_resolved: true
    parse_mode: &quot;&quot;</code></pre><figure class="block-color-orange_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-81cf-bc1d-cef7b265c23b"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Обратите внимание что в языке разметки YAML необходимо соблюдать отступы строк, иначе файл станет невалидным.</div></figure><ol type="1" id="131aa64c-9d0a-81f3-993b-c1b4edea38b1" class="numbered-list" start="1"><li><strong>Маршрутизация:</strong><ul id="131aa64c-9d0a-81fc-a926-c6a8c92403c3" class="bulleted-list"><li style="list-style-type:disc">Все оповещения будут отправляться получателю с именем <code>default-telegram</code>.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-81bd-a8cf-c823d29dfa9a" class="numbered-list" start="2"><li><strong>Получатели:</strong><ul id="131aa64c-9d0a-81af-b03c-e71214317e78" class="bulleted-list"><li style="list-style-type:disc">Определен один получатель <code>default-telegram</code> типа <code>telegram_configs</code>.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-8145-93db-efcf3460bdd0" class="numbered-list" start="3"><li><strong>Конфигурация Telegram:</strong><ul id="131aa64c-9d0a-81de-a099-c80009533426" class="bulleted-list"><li style="list-style-type:disc"><code>api_url</code>: URL-адрес API Telegram (<a href="https://api.telegram.org/">https://api.telegram.org</a>).</li></ul><ul id="131aa64c-9d0a-81b8-baad-e8042a19b9f4" class="bulleted-list"><li style="list-style-type:disc"><code>bot_token</code>: Токен бота Telegram.</li></ul><ul id="131aa64c-9d0a-819c-bc72-ce335b6ce904" class="bulleted-list"><li style="list-style-type:disc"><code>chat_id</code>: ID чата Telegram, куда будут отправляться оповещения.</li></ul><ul id="131aa64c-9d0a-817b-9729-c290af5164a2" class="bulleted-list"><li style="list-style-type:disc"><code>disable_notifications</code>: Отключить уведомления (по умолчанию <code>false</code>).</li></ul><ul id="131aa64c-9d0a-8126-80d3-ccb9e4f08c81" class="bulleted-list"><li style="list-style-type:disc"><code>http_config</code>:<ul id="131aa64c-9d0a-811c-ab99-efbd57fdb7bc" class="bulleted-list"><li style="list-style-type:circle"><code>follow_redirects</code>: Следовать за редиректами (по умолчанию <code>true</code>).</li></ul><ul id="131aa64c-9d0a-815a-9143-dc67df6a0236" class="bulleted-list"><li style="list-style-type:circle"><code>send_resolved</code>: Отправлять сообщения о разрешении оповещений (по умолчанию <code>true</code>).</li></ul></li></ul><ul id="131aa64c-9d0a-81dd-a8d0-c9220988297f" class="bulleted-list"><li style="list-style-type:disc"><code>parse_mode</code>: Режим разметки текста в сообщениях (по умолчанию пустой).</li></ul></li></ol><figure class="block-color-purple_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-81ac-9856-fced742a63f0"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Для корректной работы необходимо заменить <code>bot_token</code> и <code>chat_id</code> на свои данные.</div></figure></li></ol><h3 id="131aa64c-9d0a-8171-bcc4-fda0c5ee3a2b" class="">2.3.6 Конфигурирование grafana</h3><ol type="1" id="131aa64c-9d0a-8197-ba23-f643b09ebfd2" class="numbered-list" start="1"><li>Переходим в директорию grafana<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81a2-a8d8-e393e5d9aff1" class="code"><code class="language-Bash">cd ../grafana</code></pre></li></ol><ol type="1" id="131aa64c-9d0a-810b-bb38-d4e8206048dd" class="numbered-list" start="2"><li>Создаем поддиректорию provisioning, переходим в нее и создаем еще две директории: dashboards и datasources<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8141-abe1-c823c98cbfe5" class="code"><code class="language-Bash">mkdir provisioning
cd provisioning
mkdir dashboards datasources</code></pre></li></ol><ol type="1" id="131aa64c-9d0a-81aa-a0d2-f83325dcee72" class="numbered-list" start="3"><li>Переходим в директорию dashboards <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8103-9aba-f250627c5715" class="code"><code class="language-Bash">cd dashboards</code></pre></li></ol><ol type="1" id="131aa64c-9d0a-818d-bd4d-c2609c6f39c4" class="numbered-list" start="4"><li>Создаем файл конфигурации:<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8111-b205-db1180e783e6" class="code"><code class="language-Bash">nano dashboard.yml</code></pre><p id="131aa64c-9d0a-81d6-abcb-f89053c67127" class="">Внесем в него следующие строки:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8170-8763-df6c0f0157a1" class="code"><code class="language-Bash">apiVersion: 1

providers:
  - name: &#x27;Prometheus&#x27;
    orgId: 1
    folder: &#x27;&#x27;
    type: file
    disableDeletion: false
    editable: true
    allowUiUpdates: true
    options:
      path: /etc/grafana/provisioning/dashboards</code></pre><figure class="block-color-orange_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-81c0-9c61-de88465f5fe9"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Обратите внимание что в языке разметки YAML необходимо соблюдать отступы строк, иначе файл станет невалидным.</div></figure><ol type="1" id="131aa64c-9d0a-815d-85c8-d64170cba72f" class="numbered-list" start="1"><li><strong>Версия API:</strong><ul id="131aa64c-9d0a-81be-9c1b-f9db7329e341" class="bulleted-list"><li style="list-style-type:disc"><code><strong>apiVersion: 1</strong></code> указывает на использование первой версии API Grafana.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-8116-81fb-fa88fd9e1eb1" class="numbered-list" start="2"><li><strong>Настройки поставщиков:</strong><ul id="131aa64c-9d0a-814a-a0af-ece732e886c7" class="bulleted-list"><li style="list-style-type:disc">В разделе <code><strong>providers</strong></code> определен один поставщик.</li></ul><ul id="131aa64c-9d0a-815c-9a3c-c1eac65bd2ed" class="bulleted-list"><li style="list-style-type:disc"><code><strong>name: &#x27;Prometheus&#x27;</strong></code> - имя поставщика, обычно отражает источник данных.</li></ul><ul id="131aa64c-9d0a-81e5-b153-f4cc3ae221b3" class="bulleted-list"><li style="list-style-type:disc"><code><strong>orgId: 1</strong></code> - идентификатор организации в Grafana, к которой привязан данный поставщик.</li></ul><ul id="131aa64c-9d0a-81f3-b001-cc021854bec3" class="bulleted-list"><li style="list-style-type:disc"><code><strong>folder: &#x27;&#x27;</strong></code> - папка, в которой будут сохраняться панели мониторинга. Пустое значение указывает на сохранение в корневую папку.</li></ul><ul id="131aa64c-9d0a-8181-88f6-d67d648f90cc" class="bulleted-list"><li style="list-style-type:disc"><code><strong>type: file</strong></code> - тип поставщика, указывающий, что данные панелей будут загружаться из файловой системы.</li></ul><ul id="131aa64c-9d0a-8134-b469-e47ffdaba5e1" class="bulleted-list"><li style="list-style-type:disc"><code><strong>disableDeletion: false</strong></code> - разрешает или запрещает удаление панелей мониторинга из этого поставщика через веб-интерфейс Grafana.</li></ul><ul id="131aa64c-9d0a-8151-800e-d903d05e9ed5" class="bulleted-list"><li style="list-style-type:disc"><code><strong>editable: true</strong></code> - разрешает или запрещает редактирование панелей мониторинга из этого поставщика через веб-интерфейс Grafana.</li></ul><ul id="131aa64c-9d0a-81ba-8caa-ddcc98a43dd9" class="bulleted-list"><li style="list-style-type:disc"><code><strong>allowUiUpdates: true</strong></code> - разрешает или запрещает обновление интерфейса пользователя Grafana из этого поставщика.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-8157-ac93-f41e32957e46" class="numbered-list" start="3"><li><strong>Параметры поставщика Prometheus:</strong><ul id="131aa64c-9d0a-8194-a5e3-cb25b459b92d" class="bulleted-list"><li style="list-style-type:disc">В блоке <code><strong>options</strong></code> указаны параметры для поставщика Prometheus.</li></ul><ul id="131aa64c-9d0a-8192-a63a-c0b2c6d2f3a7" class="bulleted-list"><li style="list-style-type:disc"><code><strong>path: /etc/grafana/provisioning/dashboards</strong></code> - путь к каталогу, в котором хранятся файлы конфигурации панелей мониторинга для Prometheus.</li></ul></li></ol><p id="131aa64c-9d0a-8184-9ba4-d212026f2877" class="">Этот файл конфигурации определяет настройки, позволяющие Grafana автоматически загружать панели мониторинга из указанного каталога при запуске или перезагрузке.</p></li></ol><ol type="1" id="131aa64c-9d0a-815f-89bb-e85272a089ee" class="numbered-list" start="5"><li>Создадим ряд JSON-файлов, содержащих описания dashboardов<ol type="a" id="131aa64c-9d0a-8175-abe2-d13404d16a37" class="numbered-list" start="1"><li>Dashboard для мониторинга состояний контейнеров<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8117-bc96-f4bf6633160a" class="code"><code class="language-Bash">nano docker_containers.json</code></pre><ul id="131aa64c-9d0a-81b3-963c-ff535f43553f" class="toggle"><li><details open=""><summary>JSON для дашборда docker_containers</summary><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8132-b49b-c03a936eb200" class="code"><code class="language-Bash">{
  &quot;id&quot;: null,
  &quot;title&quot;: &quot;Docker Containers&quot;,
  &quot;description&quot;: &quot;Containers metrics&quot;,
  &quot;tags&quot;: [
    &quot;docker&quot;
  ],
  &quot;style&quot;: &quot;dark&quot;,
  &quot;timezone&quot;: &quot;browser&quot;,
  &quot;editable&quot;: true,
  &quot;hideControls&quot;: false,
  &quot;sharedCrosshair&quot;: true,
  &quot;rows&quot;: [
    {
      &quot;collapse&quot;: false,
      &quot;editable&quot;: true,
      &quot;height&quot;: &quot;150px&quot;,
      &quot;panels&quot;: [
        {
          &quot;cacheTimeout&quot;: null,
          &quot;colorBackground&quot;: false,
          &quot;colorValue&quot;: false,
          &quot;colors&quot;: [
            &quot;rgba(50, 172, 45, 0.97)&quot;,
            &quot;rgba(237, 129, 40, 0.89)&quot;,
            &quot;rgba(245, 54, 54, 0.9)&quot;
          ],
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;decimals&quot;: 2,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;format&quot;: &quot;percent&quot;,
          &quot;gauge&quot;: {
            &quot;maxValue&quot;: 100,
            &quot;minValue&quot;: 0,
            &quot;show&quot;: true,
            &quot;thresholdLabels&quot;: false,
            &quot;thresholdMarkers&quot;: true
          },
          &quot;id&quot;: 4,
          &quot;interval&quot;: null,
          &quot;isNew&quot;: true,
          &quot;links&quot;: [],
          &quot;mappingType&quot;: 1,
          &quot;mappingTypes&quot;: [
            {
              &quot;name&quot;: &quot;value to text&quot;,
              &quot;value&quot;: 1
            },
            {
              &quot;name&quot;: &quot;range to text&quot;,
              &quot;value&quot;: 2
            }
          ],
          &quot;maxDataPoints&quot;: 100,
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;nullText&quot;: null,
          &quot;postfix&quot;: &quot;&quot;,
          &quot;postfixFontSize&quot;: &quot;50%&quot;,
          &quot;prefix&quot;: &quot;&quot;,
          &quot;prefixFontSize&quot;: &quot;50%&quot;,
          &quot;rangeMaps&quot;: [
            {
              &quot;from&quot;: &quot;null&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;to&quot;: &quot;null&quot;
            }
          ],
          &quot;span&quot;: 2,
          &quot;sparkline&quot;: {
            &quot;fillColor&quot;: &quot;rgba(31, 118, 189, 0.18)&quot;,
            &quot;full&quot;: false,
            &quot;lineColor&quot;: &quot;rgb(31, 120, 193)&quot;,
            &quot;show&quot;: false
          },
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;sum(rate(container_cpu_user_seconds_total{image!=\&quot;\&quot;}[1m])) / count(node_cpu_seconds_total{mode=\&quot;user\&quot;}) * 100&quot;,
              &quot;interval&quot;: &quot;10s&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 10
            }
          ],
          &quot;thresholds&quot;: &quot;65, 90&quot;,
          &quot;title&quot;: &quot;CPU Load&quot;,
          &quot;transparent&quot;: false,
          &quot;type&quot;: &quot;singlestat&quot;,
          &quot;valueFontSize&quot;: &quot;80%&quot;,
          &quot;valueMaps&quot;: [
            {
              &quot;op&quot;: &quot;=&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;value&quot;: &quot;null&quot;
            }
          ],
          &quot;valueName&quot;: &quot;avg&quot;,
          &quot;timeFrom&quot;: &quot;10s&quot;,
          &quot;hideTimeOverride&quot;: true
        },
        {
          &quot;cacheTimeout&quot;: null,
          &quot;colorBackground&quot;: false,
          &quot;colorValue&quot;: false,
          &quot;colors&quot;: [
            &quot;rgba(245, 54, 54, 0.9)&quot;,
            &quot;rgba(237, 129, 40, 0.89)&quot;,
            &quot;rgba(50, 172, 45, 0.97)&quot;
          ],
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;format&quot;: &quot;none&quot;,
          &quot;gauge&quot;: {
            &quot;maxValue&quot;: 100,
            &quot;minValue&quot;: 0,
            &quot;show&quot;: false,
            &quot;thresholdLabels&quot;: false,
            &quot;thresholdMarkers&quot;: true
          },
          &quot;id&quot;: 7,
          &quot;interval&quot;: null,
          &quot;isNew&quot;: true,
          &quot;links&quot;: [],
          &quot;mappingType&quot;: 1,
          &quot;mappingTypes&quot;: [
            {
              &quot;name&quot;: &quot;value to text&quot;,
              &quot;value&quot;: 1
            },
            {
              &quot;name&quot;: &quot;range to text&quot;,
              &quot;value&quot;: 2
            }
          ],
          &quot;maxDataPoints&quot;: 100,
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;nullText&quot;: null,
          &quot;postfix&quot;: &quot;&quot;,
          &quot;postfixFontSize&quot;: &quot;50%&quot;,
          &quot;prefix&quot;: &quot;&quot;,
          &quot;prefixFontSize&quot;: &quot;50%&quot;,
          &quot;rangeMaps&quot;: [
            {
              &quot;from&quot;: &quot;null&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;to&quot;: &quot;null&quot;
            }
          ],
          &quot;span&quot;: 2,
          &quot;sparkline&quot;: {
            &quot;fillColor&quot;: &quot;rgba(31, 118, 189, 0.18)&quot;,
            &quot;full&quot;: false,
            &quot;lineColor&quot;: &quot;rgb(31, 120, 193)&quot;,
            &quot;show&quot;: false
          },
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;machine_cpu_cores&quot;,
              &quot;interval&quot;: &quot;&quot;,
              &quot;intervalFactor&quot;: 2,
              &quot;legendFormat&quot;: &quot;&quot;,
              &quot;metric&quot;: &quot;machine_cpu_cores&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 20
            }
          ],
          &quot;thresholds&quot;: &quot;&quot;,
          &quot;title&quot;: &quot;CPU Cores&quot;,
          &quot;type&quot;: &quot;singlestat&quot;,
          &quot;valueFontSize&quot;: &quot;80%&quot;,
          &quot;valueMaps&quot;: [
            {
              &quot;op&quot;: &quot;=&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;value&quot;: &quot;null&quot;
            }
          ],
          &quot;valueName&quot;: &quot;avg&quot;
        },
        {
          &quot;cacheTimeout&quot;: null,
          &quot;colorBackground&quot;: false,
          &quot;colorValue&quot;: false,
          &quot;colors&quot;: [
            &quot;rgba(50, 172, 45, 0.97)&quot;,
            &quot;rgba(237, 129, 40, 0.89)&quot;,
            &quot;rgba(245, 54, 54, 0.9)&quot;
          ],
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;format&quot;: &quot;percent&quot;,
          &quot;gauge&quot;: {
            &quot;maxValue&quot;: 100,
            &quot;minValue&quot;: 0,
            &quot;show&quot;: true,
            &quot;thresholdLabels&quot;: false,
            &quot;thresholdMarkers&quot;: true
          },
          &quot;id&quot;: 5,
          &quot;interval&quot;: null,
          &quot;isNew&quot;: true,
          &quot;links&quot;: [],
          &quot;mappingType&quot;: 1,
          &quot;mappingTypes&quot;: [
            {
              &quot;name&quot;: &quot;value to text&quot;,
              &quot;value&quot;: 1
            },
            {
              &quot;name&quot;: &quot;range to text&quot;,
              &quot;value&quot;: 2
            }
          ],
          &quot;maxDataPoints&quot;: 100,
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;nullText&quot;: null,
          &quot;postfix&quot;: &quot;&quot;,
          &quot;postfixFontSize&quot;: &quot;50%&quot;,
          &quot;prefix&quot;: &quot;&quot;,
          &quot;prefixFontSize&quot;: &quot;50%&quot;,
          &quot;rangeMaps&quot;: [
            {
              &quot;from&quot;: &quot;null&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;to&quot;: &quot;null&quot;
            }
          ],
          &quot;span&quot;: 2,
          &quot;sparkline&quot;: {
            &quot;fillColor&quot;: &quot;rgba(31, 118, 189, 0.18)&quot;,
            &quot;full&quot;: false,
            &quot;lineColor&quot;: &quot;rgb(31, 120, 193)&quot;,
            &quot;show&quot;: false
          },
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;(sum(node_memory_MemTotal_bytes) - sum(node_memory_MemFree_bytes+node_memory_Buffers_bytes+node_memory_Cached_bytes) ) / sum(node_memory_MemTotal_bytes) * 100&quot;,
              &quot;interval&quot;: &quot;10s&quot;,
              &quot;intervalFactor&quot;: 2,
              &quot;legendFormat&quot;: &quot;&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 20
            }
          ],
          &quot;thresholds&quot;: &quot;65, 90&quot;,
          &quot;title&quot;: &quot;Memory Load&quot;,
          &quot;transparent&quot;: false,
          &quot;type&quot;: &quot;singlestat&quot;,
          &quot;valueFontSize&quot;: &quot;80%&quot;,
          &quot;valueMaps&quot;: [
            {
              &quot;op&quot;: &quot;=&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;value&quot;: &quot;null&quot;
            }
          ],
          &quot;valueName&quot;: &quot;avg&quot;,
          &quot;timeFrom&quot;: &quot;10s&quot;,
          &quot;hideTimeOverride&quot;: true
        },
        {
          &quot;cacheTimeout&quot;: null,
          &quot;colorBackground&quot;: false,
          &quot;colorValue&quot;: false,
          &quot;colors&quot;: [
            &quot;rgba(245, 54, 54, 0.9)&quot;,
            &quot;rgba(237, 129, 40, 0.89)&quot;,
            &quot;rgba(50, 172, 45, 0.97)&quot;
          ],
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;decimals&quot;: 2,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;format&quot;: &quot;bytes&quot;,
          &quot;gauge&quot;: {
            &quot;maxValue&quot;: 100,
            &quot;minValue&quot;: 0,
            &quot;show&quot;: false,
            &quot;thresholdLabels&quot;: false,
            &quot;thresholdMarkers&quot;: true
          },
          &quot;id&quot;: 2,
          &quot;interval&quot;: null,
          &quot;isNew&quot;: true,
          &quot;links&quot;: [],
          &quot;mappingType&quot;: 1,
          &quot;mappingTypes&quot;: [
            {
              &quot;name&quot;: &quot;value to text&quot;,
              &quot;value&quot;: 1
            },
            {
              &quot;name&quot;: &quot;range to text&quot;,
              &quot;value&quot;: 2
            }
          ],
          &quot;maxDataPoints&quot;: 100,
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;nullText&quot;: null,
          &quot;postfix&quot;: &quot;&quot;,
          &quot;postfixFontSize&quot;: &quot;50%&quot;,
          &quot;prefix&quot;: &quot;&quot;,
          &quot;prefixFontSize&quot;: &quot;50%&quot;,
          &quot;rangeMaps&quot;: [
            {
              &quot;from&quot;: &quot;null&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;to&quot;: &quot;null&quot;
            }
          ],
          &quot;span&quot;: 2,
          &quot;sparkline&quot;: {
            &quot;fillColor&quot;: &quot;rgba(31, 118, 189, 0.18)&quot;,
            &quot;full&quot;: false,
            &quot;lineColor&quot;: &quot;rgb(31, 120, 193)&quot;,
            &quot;show&quot;: false
          },
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;sum(container_memory_usage_bytes{image!=\&quot;\&quot;})&quot;,
              &quot;interval&quot;: &quot;10s&quot;,
              &quot;intervalFactor&quot;: 2,
              &quot;legendFormat&quot;: &quot;&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 20
            }
          ],
          &quot;thresholds&quot;: &quot;&quot;,
          &quot;timeFrom&quot;: &quot;10s&quot;,
          &quot;title&quot;: &quot;Used Memory&quot;,
          &quot;transparent&quot;: false,
          &quot;type&quot;: &quot;singlestat&quot;,
          &quot;valueFontSize&quot;: &quot;80%&quot;,
          &quot;valueMaps&quot;: [
            {
              &quot;op&quot;: &quot;=&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;value&quot;: &quot;null&quot;
            }
          ],
          &quot;valueName&quot;: &quot;avg&quot;,
          &quot;hideTimeOverride&quot;: true
        },
        {
          &quot;cacheTimeout&quot;: null,
          &quot;colorBackground&quot;: false,
          &quot;colorValue&quot;: false,
          &quot;colors&quot;: [
            &quot;rgba(50, 172, 45, 0.97)&quot;,
            &quot;rgba(237, 129, 40, 0.89)&quot;,
            &quot;rgba(245, 54, 54, 0.9)&quot;
          ],
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;decimals&quot;: null,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;format&quot;: &quot;percent&quot;,
          &quot;gauge&quot;: {
            &quot;maxValue&quot;: 100,
            &quot;minValue&quot;: 0,
            &quot;show&quot;: true,
            &quot;thresholdLabels&quot;: false,
            &quot;thresholdMarkers&quot;: true
          },
          &quot;id&quot;: 6,
          &quot;interval&quot;: null,
          &quot;isNew&quot;: true,
          &quot;links&quot;: [],
          &quot;mappingType&quot;: 1,
          &quot;mappingTypes&quot;: [
            {
              &quot;name&quot;: &quot;value to text&quot;,
              &quot;value&quot;: 1
            },
            {
              &quot;name&quot;: &quot;range to text&quot;,
              &quot;value&quot;: 2
            }
          ],
          &quot;maxDataPoints&quot;: 100,
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;nullText&quot;: null,
          &quot;postfix&quot;: &quot;&quot;,
          &quot;postfixFontSize&quot;: &quot;50%&quot;,
          &quot;prefix&quot;: &quot;&quot;,
          &quot;prefixFontSize&quot;: &quot;50%&quot;,
          &quot;rangeMaps&quot;: [
            {
              &quot;from&quot;: &quot;null&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;to&quot;: &quot;null&quot;
            }
          ],
          &quot;span&quot;: 2,
          &quot;sparkline&quot;: {
            &quot;fillColor&quot;: &quot;rgba(31, 118, 189, 0.18)&quot;,
            &quot;full&quot;: false,
            &quot;lineColor&quot;: &quot;rgb(31, 120, 193)&quot;,
            &quot;show&quot;: false
          },
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;(node_filesystem_size_bytes{fstype=\&quot;aufs\&quot;} - node_filesystem_free_bytes{fstype=\&quot;aufs\&quot;}) / node_filesystem_size_bytes{fstype=\&quot;aufs\&quot;}  * 100&quot;,
              &quot;interval&quot;: &quot;30s&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 30
            }
          ],
          &quot;thresholds&quot;: &quot;65, 90&quot;,
          &quot;title&quot;: &quot;Storage Load&quot;,
          &quot;transparent&quot;: false,
          &quot;type&quot;: &quot;singlestat&quot;,
          &quot;valueFontSize&quot;: &quot;80%&quot;,
          &quot;valueMaps&quot;: [
            {
              &quot;op&quot;: &quot;=&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;value&quot;: &quot;null&quot;
            }
          ],
          &quot;valueName&quot;: &quot;avg&quot;,
          &quot;timeFrom&quot;: &quot;10s&quot;,
          &quot;hideTimeOverride&quot;: true
        },
        {
          &quot;cacheTimeout&quot;: null,
          &quot;colorBackground&quot;: false,
          &quot;colorValue&quot;: false,
          &quot;colors&quot;: [
            &quot;rgba(245, 54, 54, 0.9)&quot;,
            &quot;rgba(237, 129, 40, 0.89)&quot;,
            &quot;rgba(50, 172, 45, 0.97)&quot;
          ],
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;decimals&quot;: 2,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;format&quot;: &quot;bytes&quot;,
          &quot;gauge&quot;: {
            &quot;maxValue&quot;: 100,
            &quot;minValue&quot;: 0,
            &quot;show&quot;: false,
            &quot;thresholdLabels&quot;: false,
            &quot;thresholdMarkers&quot;: true
          },
          &quot;id&quot;: 3,
          &quot;interval&quot;: null,
          &quot;isNew&quot;: true,
          &quot;links&quot;: [],
          &quot;mappingType&quot;: 1,
          &quot;mappingTypes&quot;: [
            {
              &quot;name&quot;: &quot;value to text&quot;,
              &quot;value&quot;: 1
            },
            {
              &quot;name&quot;: &quot;range to text&quot;,
              &quot;value&quot;: 2
            }
          ],
          &quot;maxDataPoints&quot;: 100,
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;nullText&quot;: null,
          &quot;postfix&quot;: &quot;&quot;,
          &quot;postfixFontSize&quot;: &quot;50%&quot;,
          &quot;prefix&quot;: &quot;&quot;,
          &quot;prefixFontSize&quot;: &quot;50%&quot;,
          &quot;rangeMaps&quot;: [
            {
              &quot;from&quot;: &quot;null&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;to&quot;: &quot;null&quot;
            }
          ],
          &quot;span&quot;: 2,
          &quot;sparkline&quot;: {
            &quot;fillColor&quot;: &quot;rgba(31, 118, 189, 0.18)&quot;,
            &quot;full&quot;: false,
            &quot;lineColor&quot;: &quot;rgb(31, 120, 193)&quot;,
            &quot;show&quot;: false
          },
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;sum(container_fs_usage_bytes)&quot;,
              &quot;interval&quot;: &quot;30s&quot;,
              &quot;intervalFactor&quot;: 2,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 60
            }
          ],
          &quot;thresholds&quot;: &quot;&quot;,
          &quot;title&quot;: &quot;Used Storage&quot;,
          &quot;transparent&quot;: false,
          &quot;type&quot;: &quot;singlestat&quot;,
          &quot;valueFontSize&quot;: &quot;80%&quot;,
          &quot;valueMaps&quot;: [
            {
              &quot;op&quot;: &quot;=&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;value&quot;: &quot;null&quot;
            }
          ],
          &quot;valueName&quot;: &quot;avg&quot;,
          &quot;timeFrom&quot;: &quot;10s&quot;,
          &quot;hideTimeOverride&quot;: true
        }
      ],
      &quot;title&quot;: &quot;Overview&quot;
    },
    {
      &quot;collapse&quot;: false,
      &quot;editable&quot;: true,
      &quot;height&quot;: &quot;150px&quot;,
      &quot;panels&quot;: [
        {
          &quot;aliasColors&quot;: {},
          &quot;bars&quot;: true,
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;decimals&quot;: 0,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;fill&quot;: 1,
          &quot;grid&quot;: {
            &quot;threshold1&quot;: null,
            &quot;threshold1Color&quot;: &quot;rgba(216, 200, 27, 0.27)&quot;,
            &quot;threshold2&quot;: null,
            &quot;threshold2Color&quot;: &quot;rgba(234, 112, 112, 0.22)&quot;,
            &quot;thresholdLine&quot;: false
          },
          &quot;id&quot;: 9,
          &quot;isNew&quot;: true,
          &quot;legend&quot;: {
            &quot;avg&quot;: false,
            &quot;current&quot;: false,
            &quot;max&quot;: false,
            &quot;min&quot;: false,
            &quot;show&quot;: false,
            &quot;total&quot;: false,
            &quot;values&quot;: false
          },
          &quot;lines&quot;: false,
          &quot;linewidth&quot;: 2,
          &quot;links&quot;: [],
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;percentage&quot;: false,
          &quot;pointradius&quot;: 5,
          &quot;points&quot;: false,
          &quot;renderer&quot;: &quot;flot&quot;,
          &quot;seriesOverrides&quot;: [],
          &quot;span&quot;: 4,
          &quot;stack&quot;: false,
          &quot;steppedLine&quot;: false,
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;scalar(count(container_memory_usage_bytes{image!=\&quot;\&quot;}) &gt; 0)&quot;,
              &quot;interval&quot;: &quot;&quot;,
              &quot;intervalFactor&quot;: 2,
              &quot;legendFormat&quot;: &quot;containers&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 2
            }
          ],
          &quot;timeFrom&quot;: null,
          &quot;timeShift&quot;: null,
          &quot;title&quot;: &quot;Running Containers&quot;,
          &quot;tooltip&quot;: {
            &quot;msResolution&quot;: true,
            &quot;shared&quot;: true,
            &quot;sort&quot;: 0,
            &quot;value_type&quot;: &quot;cumulative&quot;
          },
          &quot;type&quot;: &quot;graph&quot;,
          &quot;xaxis&quot;: {
            &quot;show&quot;: true
          },
          &quot;yaxes&quot;: [
            {
              &quot;format&quot;: &quot;none&quot;,
              &quot;label&quot;: &quot;&quot;,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: 0,
              &quot;show&quot;: true
            },
            {
              &quot;format&quot;: &quot;short&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: null,
              &quot;show&quot;: false
            }
          ]
        },
        {
          &quot;aliasColors&quot;: {},
          &quot;bars&quot;: true,
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;decimals&quot;: 2,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;fill&quot;: 1,
          &quot;grid&quot;: {
            &quot;threshold1&quot;: null,
            &quot;threshold1Color&quot;: &quot;rgba(216, 200, 27, 0.27)&quot;,
            &quot;threshold2&quot;: null,
            &quot;threshold2Color&quot;: &quot;rgba(234, 112, 112, 0.22)&quot;
          },
          &quot;id&quot;: 10,
          &quot;isNew&quot;: true,
          &quot;legend&quot;: {
            &quot;avg&quot;: false,
            &quot;current&quot;: false,
            &quot;max&quot;: false,
            &quot;min&quot;: false,
            &quot;show&quot;: false,
            &quot;total&quot;: false,
            &quot;values&quot;: false
          },
          &quot;lines&quot;: false,
          &quot;linewidth&quot;: 2,
          &quot;links&quot;: [],
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;percentage&quot;: false,
          &quot;pointradius&quot;: 5,
          &quot;points&quot;: false,
          &quot;renderer&quot;: &quot;flot&quot;,
          &quot;seriesOverrides&quot;: [
            {
              &quot;alias&quot;: &quot;load 1m&quot;,
              &quot;color&quot;: &quot;#BF1B00&quot;
            }
          ],
          &quot;span&quot;: 4,
          &quot;stack&quot;: false,
          &quot;steppedLine&quot;: false,
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;node_load1&quot;,
              &quot;interval&quot;: &quot;&quot;,
              &quot;intervalFactor&quot;: 2,
              &quot;legendFormat&quot;: &quot;load 1m&quot;,
              &quot;metric&quot;: &quot;node_load1&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 2
            }
          ],
          &quot;timeFrom&quot;: null,
          &quot;timeShift&quot;: null,
          &quot;title&quot;: &quot;System Load&quot;,
          &quot;tooltip&quot;: {
            &quot;msResolution&quot;: true,
            &quot;shared&quot;: true,
            &quot;sort&quot;: 0,
            &quot;value_type&quot;: &quot;cumulative&quot;
          },
          &quot;type&quot;: &quot;graph&quot;,
          &quot;xaxis&quot;: {
            &quot;show&quot;: true
          },
          &quot;yaxes&quot;: [
            {
              &quot;format&quot;: &quot;short&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: 0,
              &quot;show&quot;: true
            },
            {
              &quot;format&quot;: &quot;short&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: null,
              &quot;show&quot;: false
            }
          ]
        },
        {
          &quot;aliasColors&quot;: {},
          &quot;bars&quot;: false,
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;fill&quot;: 1,
          &quot;grid&quot;: {
            &quot;threshold1&quot;: null,
            &quot;threshold1Color&quot;: &quot;rgba(216, 200, 27, 0.27)&quot;,
            &quot;threshold2&quot;: null,
            &quot;threshold2Color&quot;: &quot;rgba(234, 112, 112, 0.22)&quot;
          },
          &quot;id&quot;: 15,
          &quot;isNew&quot;: true,
          &quot;legend&quot;: {
            &quot;alignAsTable&quot;: true,
            &quot;avg&quot;: true,
            &quot;current&quot;: false,
            &quot;max&quot;: true,
            &quot;min&quot;: true,
            &quot;rightSide&quot;: true,
            &quot;show&quot;: false,
            &quot;total&quot;: false,
            &quot;values&quot;: true
          },
          &quot;lines&quot;: true,
          &quot;linewidth&quot;: 2,
          &quot;links&quot;: [],
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;percentage&quot;: false,
          &quot;pointradius&quot;: 5,
          &quot;points&quot;: false,
          &quot;renderer&quot;: &quot;flot&quot;,
          &quot;seriesOverrides&quot;: [
            {
              &quot;alias&quot;: &quot;read&quot;,
              &quot;yaxis&quot;: 1
            },
            {
              &quot;alias&quot;: &quot;written&quot;,
              &quot;yaxis&quot;: 1
            },
            {
              &quot;alias&quot;: &quot;io time&quot;,
              &quot;yaxis&quot;: 2
            }
          ],
          &quot;span&quot;: 4,
          &quot;stack&quot;: false,
          &quot;steppedLine&quot;: false,
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;sum(irate(node_disk_read_bytes_total[5m]))&quot;,
              &quot;interval&quot;: &quot;2s&quot;,
              &quot;intervalFactor&quot;: 4,
              &quot;legendFormat&quot;: &quot;read&quot;,
              &quot;metric&quot;: &quot;&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 8
            },
            {
              &quot;expr&quot;: &quot;sum(irate(node_disk_written_bytes_total[5m]))&quot;,
              &quot;interval&quot;: &quot;2s&quot;,
              &quot;intervalFactor&quot;: 4,
              &quot;legendFormat&quot;: &quot;written&quot;,
              &quot;metric&quot;: &quot;&quot;,
              &quot;refId&quot;: &quot;B&quot;,
              &quot;step&quot;: 8
            },
            {
              &quot;expr&quot;: &quot;sum(irate(node_disk_io_time_seconds_total[5m]))&quot;,
              &quot;interval&quot;: &quot;2s&quot;,
              &quot;intervalFactor&quot;: 4,
              &quot;legendFormat&quot;: &quot;io time&quot;,
              &quot;metric&quot;: &quot;&quot;,
              &quot;refId&quot;: &quot;C&quot;,
              &quot;step&quot;: 8
            }
          ],
          &quot;timeFrom&quot;: null,
          &quot;timeShift&quot;: null,
          &quot;title&quot;: &quot;I/O Usage&quot;,
          &quot;tooltip&quot;: {
            &quot;msResolution&quot;: true,
            &quot;shared&quot;: true,
            &quot;sort&quot;: 0,
            &quot;value_type&quot;: &quot;cumulative&quot;
          },
          &quot;type&quot;: &quot;graph&quot;,
          &quot;xaxis&quot;: {
            &quot;show&quot;: true
          },
          &quot;yaxes&quot;: [
            {
              &quot;format&quot;: &quot;bytes&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: null,
              &quot;show&quot;: true
            },
            {
              &quot;format&quot;: &quot;ms&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: null,
              &quot;show&quot;: true
            }
          ]
        }
      ],
      &quot;title&quot;: &quot;Host stats&quot;
    },
    {
      &quot;collapse&quot;: false,
      &quot;editable&quot;: true,
      &quot;height&quot;: &quot;250px&quot;,
      &quot;panels&quot;: [
        {
          &quot;aliasColors&quot;: {},
          &quot;bars&quot;: false,
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;decimals&quot;: 2,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;fill&quot;: 1,
          &quot;grid&quot;: {
            &quot;threshold1&quot;: null,
            &quot;threshold1Color&quot;: &quot;rgba(216, 200, 27, 0.27)&quot;,
            &quot;threshold2&quot;: null,
            &quot;threshold2Color&quot;: &quot;rgba(234, 112, 112, 0.22)&quot;
          },
          &quot;id&quot;: 8,
          &quot;isNew&quot;: true,
          &quot;legend&quot;: {
            &quot;alignAsTable&quot;: true,
            &quot;avg&quot;: true,
            &quot;current&quot;: false,
            &quot;max&quot;: true,
            &quot;min&quot;: true,
            &quot;rightSide&quot;: true,
            &quot;show&quot;: true,
            &quot;total&quot;: false,
            &quot;values&quot;: true
          },
          &quot;lines&quot;: true,
          &quot;linewidth&quot;: 2,
          &quot;links&quot;: [],
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;percentage&quot;: false,
          &quot;pointradius&quot;: 5,
          &quot;points&quot;: false,
          &quot;renderer&quot;: &quot;flot&quot;,
          &quot;seriesOverrides&quot;: [],
          &quot;span&quot;: 12,
          &quot;stack&quot;: false,
          &quot;steppedLine&quot;: false,
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;sum by (name) (rate(container_cpu_usage_seconds_total{image!=\&quot;\&quot;,container_label_org_label_schema_group=\&quot;\&quot;}[1m])) / scalar(count(node_cpu_seconds_total{mode=\&quot;user\&quot;})) * 100&quot;,
              &quot;intervalFactor&quot;: 10,
              &quot;legendFormat&quot;: &quot;{{ name }}&quot;,
              &quot;metric&quot;: &quot;container_cpu_user_seconds_total&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 10
            }
          ],
          &quot;timeFrom&quot;: null,
          &quot;timeShift&quot;: null,
          &quot;title&quot;: &quot;Container CPU Usage&quot;,
          &quot;tooltip&quot;: {
            &quot;msResolution&quot;: true,
            &quot;shared&quot;: true,
            &quot;sort&quot;: 2,
            &quot;value_type&quot;: &quot;cumulative&quot;
          },
          &quot;type&quot;: &quot;graph&quot;,
          &quot;xaxis&quot;: {
            &quot;show&quot;: true
          },
          &quot;yaxes&quot;: [
            {
              &quot;format&quot;: &quot;percent&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: 0,
              &quot;show&quot;: true
            },
            {
              &quot;format&quot;: &quot;short&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: null,
              &quot;show&quot;: false
            }
          ]
        }
      ],
      &quot;title&quot;: &quot;CPU&quot;
    },
    {
      &quot;collapse&quot;: false,
      &quot;editable&quot;: true,
      &quot;height&quot;: &quot;250px&quot;,
      &quot;panels&quot;: [
        {
          &quot;aliasColors&quot;: {},
          &quot;bars&quot;: false,
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;decimals&quot;: 2,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;fill&quot;: 1,
          &quot;grid&quot;: {
            &quot;threshold1&quot;: null,
            &quot;threshold1Color&quot;: &quot;rgba(216, 200, 27, 0.27)&quot;,
            &quot;threshold2&quot;: null,
            &quot;threshold2Color&quot;: &quot;rgba(234, 112, 112, 0.22)&quot;
          },
          &quot;id&quot;: 11,
          &quot;isNew&quot;: true,
          &quot;legend&quot;: {
            &quot;alignAsTable&quot;: true,
            &quot;avg&quot;: true,
            &quot;current&quot;: false,
            &quot;max&quot;: true,
            &quot;min&quot;: true,
            &quot;rightSide&quot;: true,
            &quot;show&quot;: true,
            &quot;total&quot;: false,
            &quot;values&quot;: true
          },
          &quot;lines&quot;: true,
          &quot;linewidth&quot;: 2,
          &quot;links&quot;: [],
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;percentage&quot;: false,
          &quot;pointradius&quot;: 5,
          &quot;points&quot;: false,
          &quot;renderer&quot;: &quot;flot&quot;,
          &quot;seriesOverrides&quot;: [],
          &quot;span&quot;: 12,
          &quot;stack&quot;: false,
          &quot;steppedLine&quot;: false,
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;sum by (name)(container_memory_usage_bytes{image!=\&quot;\&quot;,container_label_org_label_schema_group=\&quot;\&quot;})&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;{{ name }}&quot;,
              &quot;metric&quot;: &quot;container_memory_usage&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 1
            }
          ],
          &quot;timeFrom&quot;: null,
          &quot;timeShift&quot;: null,
          &quot;title&quot;: &quot;Container Memory Usage&quot;,
          &quot;tooltip&quot;: {
            &quot;msResolution&quot;: true,
            &quot;shared&quot;: true,
            &quot;sort&quot;: 0,
            &quot;value_type&quot;: &quot;cumulative&quot;
          },
          &quot;type&quot;: &quot;graph&quot;,
          &quot;xaxis&quot;: {
            &quot;show&quot;: true
          },
          &quot;yaxes&quot;: [
            {
              &quot;format&quot;: &quot;bytes&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: 0,
              &quot;show&quot;: true
            },
            {
              &quot;format&quot;: &quot;short&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: null,
              &quot;show&quot;: false
            }
          ]
        },
        {
          &quot;aliasColors&quot;: {},
          &quot;bars&quot;: false,
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;decimals&quot;: 2,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;fill&quot;: 1,
          &quot;grid&quot;: {
            &quot;threshold1&quot;: null,
            &quot;threshold1Color&quot;: &quot;rgba(216, 200, 27, 0.27)&quot;,
            &quot;threshold2&quot;: null,
            &quot;threshold2Color&quot;: &quot;rgba(234, 112, 112, 0.22)&quot;
          },
          &quot;id&quot;: 12,
          &quot;isNew&quot;: true,
          &quot;legend&quot;: {
            &quot;alignAsTable&quot;: true,
            &quot;avg&quot;: true,
            &quot;current&quot;: false,
            &quot;max&quot;: true,
            &quot;min&quot;: true,
            &quot;rightSide&quot;: true,
            &quot;show&quot;: true,
            &quot;total&quot;: false,
            &quot;values&quot;: true
          },
          &quot;lines&quot;: true,
          &quot;linewidth&quot;: 2,
          &quot;links&quot;: [],
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;percentage&quot;: false,
          &quot;pointradius&quot;: 5,
          &quot;points&quot;: false,
          &quot;renderer&quot;: &quot;flot&quot;,
          &quot;seriesOverrides&quot;: [],
          &quot;span&quot;: 12,
          &quot;stack&quot;: false,
          &quot;steppedLine&quot;: false,
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;sum by (name) (container_memory_cache{image!=\&quot;\&quot;,container_label_org_label_schema_group=\&quot;\&quot;})&quot;,
              &quot;intervalFactor&quot;: 2,
              &quot;legendFormat&quot;: &quot;{{name}}&quot;,
              &quot;metric&quot;: &quot;container_memory_cache&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 2
            }
          ],
          &quot;timeFrom&quot;: null,
          &quot;timeShift&quot;: null,
          &quot;title&quot;: &quot;Container Cached Memory Usage&quot;,
          &quot;tooltip&quot;: {
            &quot;msResolution&quot;: true,
            &quot;shared&quot;: true,
            &quot;sort&quot;: 0,
            &quot;value_type&quot;: &quot;cumulative&quot;
          },
          &quot;type&quot;: &quot;graph&quot;,
          &quot;xaxis&quot;: {
            &quot;show&quot;: true
          },
          &quot;yaxes&quot;: [
            {
              &quot;format&quot;: &quot;bytes&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: 0,
              &quot;show&quot;: true
            },
            {
              &quot;format&quot;: &quot;short&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: null,
              &quot;show&quot;: false
            }
          ]
        }
      ],
      &quot;title&quot;: &quot;Memory&quot;
    },
    {
      &quot;collapse&quot;: false,
      &quot;editable&quot;: true,
      &quot;height&quot;: &quot;250px&quot;,
      &quot;panels&quot;: [
        {
          &quot;aliasColors&quot;: {},
          &quot;bars&quot;: false,
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;decimals&quot;: 2,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;fill&quot;: 1,
          &quot;grid&quot;: {
            &quot;threshold1&quot;: null,
            &quot;threshold1Color&quot;: &quot;rgba(216, 200, 27, 0.27)&quot;,
            &quot;threshold2&quot;: null,
            &quot;threshold2Color&quot;: &quot;rgba(234, 112, 112, 0.22)&quot;
          },
          &quot;id&quot;: 13,
          &quot;isNew&quot;: true,
          &quot;legend&quot;: {
            &quot;alignAsTable&quot;: true,
            &quot;avg&quot;: true,
            &quot;current&quot;: false,
            &quot;max&quot;: true,
            &quot;min&quot;: true,
            &quot;rightSide&quot;: true,
            &quot;show&quot;: true,
            &quot;total&quot;: false,
            &quot;values&quot;: true
          },
          &quot;lines&quot;: true,
          &quot;linewidth&quot;: 2,
          &quot;links&quot;: [],
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;percentage&quot;: false,
          &quot;pointradius&quot;: 5,
          &quot;points&quot;: false,
          &quot;renderer&quot;: &quot;flot&quot;,
          &quot;seriesOverrides&quot;: [],
          &quot;span&quot;: 12,
          &quot;stack&quot;: false,
          &quot;steppedLine&quot;: false,
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;sum by (name) (rate(container_network_receive_bytes_total{image!=\&quot;\&quot;,container_label_org_label_schema_group=\&quot;\&quot;}[1m]))&quot;,
              &quot;intervalFactor&quot;: 10,
              &quot;legendFormat&quot;: &quot;{{ name }}&quot;,
              &quot;metric&quot;: &quot;container_network_receive_bytes_total&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 10
            }
          ],
          &quot;timeFrom&quot;: null,
          &quot;timeShift&quot;: null,
          &quot;title&quot;: &quot;Container Network Input&quot;,
          &quot;tooltip&quot;: {
            &quot;msResolution&quot;: true,
            &quot;shared&quot;: true,
            &quot;sort&quot;: 2,
            &quot;value_type&quot;: &quot;cumulative&quot;
          },
          &quot;type&quot;: &quot;graph&quot;,
          &quot;xaxis&quot;: {
            &quot;show&quot;: true
          },
          &quot;yaxes&quot;: [
            {
              &quot;format&quot;: &quot;bytes&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: 0,
              &quot;show&quot;: true
            },
            {
              &quot;format&quot;: &quot;short&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: null,
              &quot;show&quot;: false
            }
          ]
        },
        {
          &quot;aliasColors&quot;: {},
          &quot;bars&quot;: false,
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;decimals&quot;: 2,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;fill&quot;: 1,
          &quot;grid&quot;: {
            &quot;threshold1&quot;: null,
            &quot;threshold1Color&quot;: &quot;rgba(216, 200, 27, 0.27)&quot;,
            &quot;threshold2&quot;: null,
            &quot;threshold2Color&quot;: &quot;rgba(234, 112, 112, 0.22)&quot;
          },
          &quot;id&quot;: 14,
          &quot;isNew&quot;: true,
          &quot;legend&quot;: {
            &quot;alignAsTable&quot;: true,
            &quot;avg&quot;: true,
            &quot;current&quot;: false,
            &quot;max&quot;: true,
            &quot;min&quot;: true,
            &quot;rightSide&quot;: true,
            &quot;show&quot;: true,
            &quot;total&quot;: false,
            &quot;values&quot;: true
          },
          &quot;lines&quot;: true,
          &quot;linewidth&quot;: 2,
          &quot;links&quot;: [],
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;percentage&quot;: false,
          &quot;pointradius&quot;: 5,
          &quot;points&quot;: false,
          &quot;renderer&quot;: &quot;flot&quot;,
          &quot;seriesOverrides&quot;: [],
          &quot;span&quot;: 12,
          &quot;stack&quot;: false,
          &quot;steppedLine&quot;: false,
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;sum by (name) (rate(container_network_transmit_bytes_total{image!=\&quot;\&quot;,container_label_org_label_schema_group=\&quot;\&quot;}[1m]))&quot;,
              &quot;intervalFactor&quot;: 10,
              &quot;legendFormat&quot;: &quot;{{ name }}&quot;,
              &quot;metric&quot;: &quot;container_network_transmit_bytes_total&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 10
            }
          ],
          &quot;timeFrom&quot;: null,
          &quot;timeShift&quot;: null,
          &quot;title&quot;: &quot;Container Network Output&quot;,
          &quot;tooltip&quot;: {
            &quot;msResolution&quot;: true,
            &quot;shared&quot;: true,
            &quot;sort&quot;: 2,
            &quot;value_type&quot;: &quot;cumulative&quot;
          },
          &quot;type&quot;: &quot;graph&quot;,
          &quot;xaxis&quot;: {
            &quot;show&quot;: true
          },
          &quot;yaxes&quot;: [
            {
              &quot;format&quot;: &quot;bytes&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: 0,
              &quot;show&quot;: true
            },
            {
              &quot;format&quot;: &quot;short&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: null,
              &quot;show&quot;: false
            }
          ]
        }
      ],
      &quot;title&quot;: &quot;Network&quot;
    }
  ],
  &quot;time&quot;: {
    &quot;from&quot;: &quot;now-15m&quot;,
    &quot;to&quot;: &quot;now&quot;
  },
  &quot;timepicker&quot;: {
    &quot;refresh_intervals&quot;: [
      &quot;5s&quot;,
      &quot;10s&quot;,
      &quot;30s&quot;,
      &quot;1m&quot;,
      &quot;5m&quot;,
      &quot;15m&quot;,
      &quot;30m&quot;,
      &quot;1h&quot;,
      &quot;2h&quot;,
      &quot;1d&quot;
    ],
    &quot;time_options&quot;: [
      &quot;5m&quot;,
      &quot;15m&quot;,
      &quot;1h&quot;,
      &quot;6h&quot;,
      &quot;12h&quot;,
      &quot;24h&quot;,
      &quot;2d&quot;,
      &quot;7d&quot;,
      &quot;30d&quot;
    ]
  },
  &quot;templating&quot;: {
    &quot;list&quot;: []
  },
  &quot;annotations&quot;: {
    &quot;list&quot;: []
  },
  &quot;refresh&quot;: &quot;10s&quot;,
  &quot;schemaVersion&quot;: 12,
  &quot;version&quot;: 8,
  &quot;links&quot;: [],
  &quot;gnetId&quot;: null
}</code></pre></details></li></ul></li></ol><ol type="a" id="131aa64c-9d0a-810c-9864-dcc2f279b962" class="numbered-list" start="2"><li>Dashboard для мониторинга состояния хоста<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-816a-9963-c178f102bdb0" class="code"><code class="language-Bash">nano docker_host.json</code></pre><ul id="131aa64c-9d0a-8177-9c18-e8f7644faca9" class="toggle"><li><details open=""><summary>JSON для дашборда docker_host</summary><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8180-b2f3-c66c54bfd08f" class="code"><code class="language-Bash">{
  &quot;id&quot;: null,
  &quot;title&quot;: &quot;Docker Host&quot;,
  &quot;description&quot;: &quot;Docker host metrics&quot;,
  &quot;tags&quot;: [
    &quot;system&quot;
  ],
  &quot;style&quot;: &quot;dark&quot;,
  &quot;timezone&quot;: &quot;browser&quot;,
  &quot;editable&quot;: true,
  &quot;hideControls&quot;: false,
  &quot;sharedCrosshair&quot;: true,
  &quot;rows&quot;: [
    {
      &quot;collapse&quot;: false,
      &quot;editable&quot;: true,
      &quot;height&quot;: &quot;100px&quot;,
      &quot;panels&quot;: [
        {
          &quot;cacheTimeout&quot;: null,
          &quot;colorBackground&quot;: false,
          &quot;colorValue&quot;: false,
          &quot;colors&quot;: [
            &quot;rgba(245, 54, 54, 0.9)&quot;,
            &quot;rgba(237, 129, 40, 0.89)&quot;,
            &quot;rgba(50, 172, 45, 0.97)&quot;
          ],
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;decimals&quot;: 1,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;format&quot;: &quot;s&quot;,
          &quot;gauge&quot;: {
            &quot;maxValue&quot;: 100,
            &quot;minValue&quot;: 0,
            &quot;show&quot;: false,
            &quot;thresholdLabels&quot;: false,
            &quot;thresholdMarkers&quot;: true
          },
          &quot;id&quot;: 1,
          &quot;interval&quot;: null,
          &quot;isNew&quot;: true,
          &quot;links&quot;: [],
          &quot;mappingType&quot;: 1,
          &quot;mappingTypes&quot;: [
            {
              &quot;name&quot;: &quot;value to text&quot;,
              &quot;value&quot;: 1
            },
            {
              &quot;name&quot;: &quot;range to text&quot;,
              &quot;value&quot;: 2
            }
          ],
          &quot;maxDataPoints&quot;: 100,
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;nullText&quot;: null,
          &quot;postfix&quot;: &quot;s&quot;,
          &quot;postfixFontSize&quot;: &quot;80%&quot;,
          &quot;prefix&quot;: &quot;&quot;,
          &quot;prefixFontSize&quot;: &quot;50%&quot;,
          &quot;rangeMaps&quot;: [
            {
              &quot;from&quot;: &quot;null&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;to&quot;: &quot;null&quot;
            }
          ],
          &quot;span&quot;: 2,
          &quot;sparkline&quot;: {
            &quot;fillColor&quot;: &quot;rgba(31, 118, 189, 0.18)&quot;,
            &quot;full&quot;: false,
            &quot;lineColor&quot;: &quot;rgb(31, 120, 193)&quot;,
            &quot;show&quot;: false
          },
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;node_time_seconds - node_boot_time_seconds&quot;,
              &quot;interval&quot;: &quot;30s&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 30
            }
          ],
          &quot;thresholds&quot;: &quot;&quot;,
          &quot;title&quot;: &quot;Uptime&quot;,
          &quot;type&quot;: &quot;singlestat&quot;,
          &quot;valueFontSize&quot;: &quot;80%&quot;,
          &quot;valueMaps&quot;: [
            {
              &quot;op&quot;: &quot;=&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;value&quot;: &quot;null&quot;
            }
          ],
          &quot;valueName&quot;: &quot;avg&quot;,
          &quot;timeFrom&quot;: &quot;10s&quot;,
          &quot;hideTimeOverride&quot;: true
        },
        {
          &quot;cacheTimeout&quot;: null,
          &quot;colorBackground&quot;: false,
          &quot;colorValue&quot;: false,
          &quot;colors&quot;: [
            &quot;rgba(245, 54, 54, 0.9)&quot;,
            &quot;rgba(237, 129, 40, 0.89)&quot;,
            &quot;rgba(50, 172, 45, 0.97)&quot;
          ],
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;format&quot;: &quot;percent&quot;,
          &quot;gauge&quot;: {
            &quot;maxValue&quot;: 100,
            &quot;minValue&quot;: 0,
            &quot;show&quot;: false,
            &quot;thresholdLabels&quot;: false,
            &quot;thresholdMarkers&quot;: true
          },
          &quot;id&quot;: 13,
          &quot;interval&quot;: null,
          &quot;isNew&quot;: true,
          &quot;links&quot;: [],
          &quot;mappingType&quot;: 1,
          &quot;mappingTypes&quot;: [
            {
              &quot;name&quot;: &quot;value to text&quot;,
              &quot;value&quot;: 1
            },
            {
              &quot;name&quot;: &quot;range to text&quot;,
              &quot;value&quot;: 2
            }
          ],
          &quot;maxDataPoints&quot;: 100,
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;nullText&quot;: null,
          &quot;postfix&quot;: &quot;&quot;,
          &quot;postfixFontSize&quot;: &quot;50%&quot;,
          &quot;prefix&quot;: &quot;&quot;,
          &quot;prefixFontSize&quot;: &quot;50%&quot;,
          &quot;rangeMaps&quot;: [
            {
              &quot;from&quot;: &quot;null&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;to&quot;: &quot;null&quot;
            }
          ],
          &quot;span&quot;: 2,
          &quot;sparkline&quot;: {
            &quot;fillColor&quot;: &quot;rgba(31, 118, 189, 0.18)&quot;,
            &quot;full&quot;: false,
            &quot;lineColor&quot;: &quot;rgb(31, 120, 193)&quot;,
            &quot;show&quot;: false
          },
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;sum(rate(node_cpu_seconds_total{mode=\&quot;idle\&quot;}[1m])) * 100 / scalar(count(node_cpu_seconds_total{mode=\&quot;user\&quot;}))&quot;,
              &quot;interval&quot;: &quot;10s&quot;,
              &quot;intervalFactor&quot;: 2,
              &quot;legendFormat&quot;: &quot;&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 20
            }
          ],
          &quot;thresholds&quot;: &quot;&quot;,
          &quot;title&quot;: &quot;CPU Idle&quot;,
          &quot;type&quot;: &quot;singlestat&quot;,
          &quot;valueFontSize&quot;: &quot;80%&quot;,
          &quot;valueMaps&quot;: [
            {
              &quot;op&quot;: &quot;=&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;value&quot;: &quot;null&quot;
            }
          ],
          &quot;valueName&quot;: &quot;avg&quot;,
          &quot;timeFrom&quot;: &quot;10s&quot;,
          &quot;hideTimeOverride&quot;: true
        },
        {
          &quot;cacheTimeout&quot;: null,
          &quot;colorBackground&quot;: false,
          &quot;colorValue&quot;: false,
          &quot;colors&quot;: [
            &quot;rgba(245, 54, 54, 0.9)&quot;,
            &quot;rgba(237, 129, 40, 0.89)&quot;,
            &quot;rgba(50, 172, 45, 0.97)&quot;
          ],
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;format&quot;: &quot;none&quot;,
          &quot;gauge&quot;: {
            &quot;maxValue&quot;: 100,
            &quot;minValue&quot;: 0,
            &quot;show&quot;: false,
            &quot;thresholdLabels&quot;: false,
            &quot;thresholdMarkers&quot;: true
          },
          &quot;id&quot;: 12,
          &quot;interval&quot;: null,
          &quot;isNew&quot;: true,
          &quot;links&quot;: [],
          &quot;mappingType&quot;: 1,
          &quot;mappingTypes&quot;: [
            {
              &quot;name&quot;: &quot;value to text&quot;,
              &quot;value&quot;: 1
            },
            {
              &quot;name&quot;: &quot;range to text&quot;,
              &quot;value&quot;: 2
            }
          ],
          &quot;maxDataPoints&quot;: 100,
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;nullText&quot;: null,
          &quot;postfix&quot;: &quot;&quot;,
          &quot;postfixFontSize&quot;: &quot;50%&quot;,
          &quot;prefix&quot;: &quot;&quot;,
          &quot;prefixFontSize&quot;: &quot;50%&quot;,
          &quot;rangeMaps&quot;: [
            {
              &quot;from&quot;: &quot;null&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;to&quot;: &quot;null&quot;
            }
          ],
          &quot;span&quot;: 2,
          &quot;sparkline&quot;: {
            &quot;fillColor&quot;: &quot;rgba(31, 118, 189, 0.18)&quot;,
            &quot;full&quot;: false,
            &quot;lineColor&quot;: &quot;rgb(31, 120, 193)&quot;,
            &quot;show&quot;: false
          },
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;machine_cpu_cores&quot;,
              &quot;intervalFactor&quot;: 2,
              &quot;metric&quot;: &quot;machine_cpu_cores&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 2
            }
          ],
          &quot;thresholds&quot;: &quot;&quot;,
          &quot;title&quot;: &quot;CPU Cores&quot;,
          &quot;type&quot;: &quot;singlestat&quot;,
          &quot;valueFontSize&quot;: &quot;80%&quot;,
          &quot;valueMaps&quot;: [
            {
              &quot;op&quot;: &quot;=&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;value&quot;: &quot;null&quot;
            }
          ],
          &quot;valueName&quot;: &quot;avg&quot;,
          &quot;timeFrom&quot;: &quot;10s&quot;,
          &quot;hideTimeOverride&quot;: true
        },
        {
          &quot;cacheTimeout&quot;: null,
          &quot;colorBackground&quot;: false,
          &quot;colorValue&quot;: false,
          &quot;colors&quot;: [
            &quot;rgba(245, 54, 54, 0.9)&quot;,
            &quot;rgba(237, 129, 40, 0.89)&quot;,
            &quot;rgba(50, 172, 45, 0.97)&quot;
          ],
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;format&quot;: &quot;bytes&quot;,
          &quot;gauge&quot;: {
            &quot;maxValue&quot;: 100,
            &quot;minValue&quot;: 0,
            &quot;show&quot;: false,
            &quot;thresholdLabels&quot;: false,
            &quot;thresholdMarkers&quot;: true
          },
          &quot;id&quot;: 2,
          &quot;interval&quot;: null,
          &quot;isNew&quot;: true,
          &quot;links&quot;: [],
          &quot;mappingType&quot;: 1,
          &quot;mappingTypes&quot;: [
            {
              &quot;name&quot;: &quot;value to text&quot;,
              &quot;value&quot;: 1
            },
            {
              &quot;name&quot;: &quot;range to text&quot;,
              &quot;value&quot;: 2
            }
          ],
          &quot;maxDataPoints&quot;: 100,
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;nullText&quot;: null,
          &quot;postfix&quot;: &quot;&quot;,
          &quot;postfixFontSize&quot;: &quot;50%&quot;,
          &quot;prefix&quot;: &quot;&quot;,
          &quot;prefixFontSize&quot;: &quot;50%&quot;,
          &quot;rangeMaps&quot;: [
            {
              &quot;from&quot;: &quot;null&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;to&quot;: &quot;null&quot;
            }
          ],
          &quot;span&quot;: 2,
          &quot;sparkline&quot;: {
            &quot;fillColor&quot;: &quot;rgba(31, 118, 189, 0.18)&quot;,
            &quot;full&quot;: false,
            &quot;lineColor&quot;: &quot;rgb(31, 120, 193)&quot;,
            &quot;show&quot;: false
          },
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;node_memory_MemAvailable_bytes&quot;,
              &quot;interval&quot;: &quot;30s&quot;,
              &quot;intervalFactor&quot;: 2,
              &quot;legendFormat&quot;: &quot;&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 60
            }
          ],
          &quot;thresholds&quot;: &quot;&quot;,
          &quot;title&quot;: &quot;Available Memory&quot;,
          &quot;type&quot;: &quot;singlestat&quot;,
          &quot;valueFontSize&quot;: &quot;80%&quot;,
          &quot;valueMaps&quot;: [
            {
              &quot;op&quot;: &quot;=&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;value&quot;: &quot;null&quot;
            }
          ],
          &quot;valueName&quot;: &quot;avg&quot;,
          &quot;timeFrom&quot;: &quot;10s&quot;,
          &quot;hideTimeOverride&quot;: true
        },
        {
          &quot;cacheTimeout&quot;: null,
          &quot;colorBackground&quot;: false,
          &quot;colorValue&quot;: false,
          &quot;colors&quot;: [
            &quot;rgba(245, 54, 54, 0.9)&quot;,
            &quot;rgba(237, 129, 40, 0.89)&quot;,
            &quot;rgba(50, 172, 45, 0.97)&quot;
          ],
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;format&quot;: &quot;bytes&quot;,
          &quot;gauge&quot;: {
            &quot;maxValue&quot;: 100,
            &quot;minValue&quot;: 0,
            &quot;show&quot;: false,
            &quot;thresholdLabels&quot;: false,
            &quot;thresholdMarkers&quot;: true
          },
          &quot;id&quot;: 3,
          &quot;interval&quot;: null,
          &quot;isNew&quot;: true,
          &quot;links&quot;: [],
          &quot;mappingType&quot;: 1,
          &quot;mappingTypes&quot;: [
            {
              &quot;name&quot;: &quot;value to text&quot;,
              &quot;value&quot;: 1
            },
            {
              &quot;name&quot;: &quot;range to text&quot;,
              &quot;value&quot;: 2
            }
          ],
          &quot;maxDataPoints&quot;: 100,
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;nullText&quot;: null,
          &quot;postfix&quot;: &quot;&quot;,
          &quot;postfixFontSize&quot;: &quot;50%&quot;,
          &quot;prefix&quot;: &quot;&quot;,
          &quot;prefixFontSize&quot;: &quot;50%&quot;,
          &quot;rangeMaps&quot;: [
            {
              &quot;from&quot;: &quot;null&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;to&quot;: &quot;null&quot;
            }
          ],
          &quot;span&quot;: 2,
          &quot;sparkline&quot;: {
            &quot;fillColor&quot;: &quot;rgba(31, 118, 189, 0.18)&quot;,
            &quot;full&quot;: false,
            &quot;lineColor&quot;: &quot;rgb(31, 120, 193)&quot;,
            &quot;show&quot;: false
          },
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;node_memory_SwapFree_bytes&quot;,
              &quot;interval&quot;: &quot;30s&quot;,
              &quot;intervalFactor&quot;: 2,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 60
            }
          ],
          &quot;thresholds&quot;: &quot;&quot;,
          &quot;title&quot;: &quot;Free Swap&quot;,
          &quot;type&quot;: &quot;singlestat&quot;,
          &quot;valueFontSize&quot;: &quot;80%&quot;,
          &quot;valueMaps&quot;: [
            {
              &quot;op&quot;: &quot;=&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;value&quot;: &quot;null&quot;
            }
          ],
          &quot;valueName&quot;: &quot;avg&quot;,
          &quot;timeFrom&quot;: &quot;10s&quot;,
          &quot;hideTimeOverride&quot;: true
        },
        {
          &quot;cacheTimeout&quot;: null,
          &quot;colorBackground&quot;: false,
          &quot;colorValue&quot;: false,
          &quot;colors&quot;: [
            &quot;rgba(245, 54, 54, 0.9)&quot;,
            &quot;rgba(237, 129, 40, 0.89)&quot;,
            &quot;rgba(50, 172, 45, 0.97)&quot;
          ],
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;format&quot;: &quot;bytes&quot;,
          &quot;gauge&quot;: {
            &quot;maxValue&quot;: 100,
            &quot;minValue&quot;: 0,
            &quot;show&quot;: false,
            &quot;thresholdLabels&quot;: false,
            &quot;thresholdMarkers&quot;: true
          },
          &quot;id&quot;: 4,
          &quot;interval&quot;: null,
          &quot;isNew&quot;: true,
          &quot;links&quot;: [],
          &quot;mappingType&quot;: 1,
          &quot;mappingTypes&quot;: [
            {
              &quot;name&quot;: &quot;value to text&quot;,
              &quot;value&quot;: 1
            },
            {
              &quot;name&quot;: &quot;range to text&quot;,
              &quot;value&quot;: 2
            }
          ],
          &quot;maxDataPoints&quot;: 100,
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;nullText&quot;: null,
          &quot;postfix&quot;: &quot;&quot;,
          &quot;postfixFontSize&quot;: &quot;50%&quot;,
          &quot;prefix&quot;: &quot;&quot;,
          &quot;prefixFontSize&quot;: &quot;50%&quot;,
          &quot;rangeMaps&quot;: [
            {
              &quot;from&quot;: &quot;null&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;to&quot;: &quot;null&quot;
            }
          ],
          &quot;span&quot;: 2,
          &quot;sparkline&quot;: {
            &quot;fillColor&quot;: &quot;rgba(31, 118, 189, 0.18)&quot;,
            &quot;full&quot;: false,
            &quot;lineColor&quot;: &quot;rgb(31, 120, 193)&quot;,
            &quot;show&quot;: false
          },
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;sum(node_filesystem_avail_bytes{mountpoint=\&quot;\/\&quot;})&quot;,
              &quot;interval&quot;: &quot;30s&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 30
            }
          ],
          &quot;thresholds&quot;: &quot;&quot;,
          &quot;title&quot;: &quot;Free Storage&quot;,
          &quot;type&quot;: &quot;singlestat&quot;,
          &quot;valueFontSize&quot;: &quot;80%&quot;,
          &quot;valueMaps&quot;: [
            {
              &quot;op&quot;: &quot;=&quot;,
              &quot;text&quot;: &quot;N/A&quot;,
              &quot;value&quot;: &quot;null&quot;
            }
          ],
          &quot;valueName&quot;: &quot;avg&quot;,
          &quot;timeFrom&quot;: &quot;10s&quot;,
          &quot;hideTimeOverride&quot;: true
        }
      ],
      &quot;title&quot;: &quot;Available resources&quot;
    },
    {
      &quot;collapse&quot;: false,
      &quot;editable&quot;: true,
      &quot;height&quot;: &quot;150px&quot;,
      &quot;panels&quot;: [
        {
          &quot;aliasColors&quot;: {},
          &quot;bars&quot;: true,
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;decimals&quot;: 2,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;fill&quot;: 1,
          &quot;grid&quot;: {
            &quot;threshold1&quot;: null,
            &quot;threshold1Color&quot;: &quot;rgba(216, 200, 27, 0.27)&quot;,
            &quot;threshold2&quot;: null,
            &quot;threshold2Color&quot;: &quot;rgba(234, 112, 112, 0.22)&quot;
          },
          &quot;id&quot;: 9,
          &quot;isNew&quot;: true,
          &quot;legend&quot;: {
            &quot;avg&quot;: false,
            &quot;current&quot;: false,
            &quot;max&quot;: false,
            &quot;min&quot;: false,
            &quot;show&quot;: false,
            &quot;total&quot;: false,
            &quot;values&quot;: false
          },
          &quot;lines&quot;: false,
          &quot;linewidth&quot;: 2,
          &quot;links&quot;: [],
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;percentage&quot;: false,
          &quot;pointradius&quot;: 5,
          &quot;points&quot;: false,
          &quot;renderer&quot;: &quot;flot&quot;,
          &quot;seriesOverrides&quot;: [
            {
              &quot;alias&quot;: &quot;load 1m&quot;,
              &quot;color&quot;: &quot;#1F78C1&quot;
            }
          ],
          &quot;span&quot;: 4,
          &quot;stack&quot;: false,
          &quot;steppedLine&quot;: false,
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;node_load1&quot;,
              &quot;interval&quot;: &quot;10s&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;load 1m&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 10
            }
          ],
          &quot;timeFrom&quot;: null,
          &quot;timeShift&quot;: null,
          &quot;title&quot;: &quot;Load Average 1m&quot;,
          &quot;tooltip&quot;: {
            &quot;msResolution&quot;: true,
            &quot;shared&quot;: true,
            &quot;sort&quot;: 0,
            &quot;value_type&quot;: &quot;cumulative&quot;
          },
          &quot;type&quot;: &quot;graph&quot;,
          &quot;xaxis&quot;: {
            &quot;show&quot;: true
          },
          &quot;yaxes&quot;: [
            {
              &quot;format&quot;: &quot;short&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: 0,
              &quot;show&quot;: true
            },
            {
              &quot;format&quot;: &quot;short&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: null,
              &quot;show&quot;: false
            }
          ]
        },
        {
          &quot;aliasColors&quot;: {},
          &quot;bars&quot;: true,
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;fill&quot;: 1,
          &quot;grid&quot;: {
            &quot;threshold1&quot;: null,
            &quot;threshold1Color&quot;: &quot;rgba(216, 200, 27, 0.27)&quot;,
            &quot;threshold2&quot;: null,
            &quot;threshold2Color&quot;: &quot;rgba(234, 112, 112, 0.22)&quot;
          },
          &quot;id&quot;: 10,
          &quot;isNew&quot;: true,
          &quot;legend&quot;: {
            &quot;avg&quot;: false,
            &quot;current&quot;: false,
            &quot;max&quot;: false,
            &quot;min&quot;: false,
            &quot;show&quot;: false,
            &quot;total&quot;: false,
            &quot;values&quot;: false
          },
          &quot;lines&quot;: false,
          &quot;linewidth&quot;: 2,
          &quot;links&quot;: [],
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;percentage&quot;: false,
          &quot;pointradius&quot;: 5,
          &quot;points&quot;: false,
          &quot;renderer&quot;: &quot;flot&quot;,
          &quot;seriesOverrides&quot;: [
            {
              &quot;alias&quot;: &quot;blocked by I/O&quot;,
              &quot;color&quot;: &quot;#58140C&quot;
            }
          ],
          &quot;span&quot;: 4,
          &quot;stack&quot;: true,
          &quot;steppedLine&quot;: false,
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;node_procs_running&quot;,
              &quot;interval&quot;: &quot;10s&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;running&quot;,
              &quot;metric&quot;: &quot;node_procs_running&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 10
            },
            {
              &quot;expr&quot;: &quot;node_procs_blocked&quot;,
              &quot;interval&quot;: &quot;10s&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;blocked by I/O&quot;,
              &quot;metric&quot;: &quot;node_procs_blocked&quot;,
              &quot;refId&quot;: &quot;B&quot;,
              &quot;step&quot;: 10
            }
          ],
          &quot;timeFrom&quot;: null,
          &quot;timeShift&quot;: null,
          &quot;title&quot;: &quot;Processes&quot;,
          &quot;tooltip&quot;: {
            &quot;msResolution&quot;: true,
            &quot;shared&quot;: true,
            &quot;sort&quot;: 2,
            &quot;value_type&quot;: &quot;individual&quot;
          },
          &quot;type&quot;: &quot;graph&quot;,
          &quot;xaxis&quot;: {
            &quot;show&quot;: true
          },
          &quot;yaxes&quot;: [
            {
              &quot;format&quot;: &quot;short&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: 0,
              &quot;show&quot;: true
            },
            {
              &quot;format&quot;: &quot;short&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: null,
              &quot;show&quot;: false
            }
          ]
        },
        {
          &quot;aliasColors&quot;: {},
          &quot;bars&quot;: true,
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;fill&quot;: 1,
          &quot;grid&quot;: {
            &quot;threshold1&quot;: null,
            &quot;threshold1Color&quot;: &quot;rgba(216, 200, 27, 0.27)&quot;,
            &quot;threshold2&quot;: null,
            &quot;threshold2Color&quot;: &quot;rgba(234, 112, 112, 0.22)&quot;
          },
          &quot;id&quot;: 11,
          &quot;isNew&quot;: true,
          &quot;legend&quot;: {
            &quot;avg&quot;: false,
            &quot;current&quot;: false,
            &quot;max&quot;: false,
            &quot;min&quot;: false,
            &quot;show&quot;: false,
            &quot;total&quot;: false,
            &quot;values&quot;: false
          },
          &quot;lines&quot;: false,
          &quot;linewidth&quot;: 2,
          &quot;links&quot;: [],
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;percentage&quot;: false,
          &quot;pointradius&quot;: 5,
          &quot;points&quot;: false,
          &quot;renderer&quot;: &quot;flot&quot;,
          &quot;seriesOverrides&quot;: [
            {
              &quot;alias&quot;: &quot;interrupts&quot;,
              &quot;color&quot;: &quot;#806EB7&quot;
            }
          ],
          &quot;span&quot;: 4,
          &quot;stack&quot;: false,
          &quot;steppedLine&quot;: false,
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot; irate(node_intr_total[5m])&quot;,
              &quot;interval&quot;: &quot;10s&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;interrupts&quot;,
              &quot;metric&quot;: &quot;node_intr_total&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 10
            }
          ],
          &quot;timeFrom&quot;: null,
          &quot;timeShift&quot;: null,
          &quot;title&quot;: &quot;Interrupts&quot;,
          &quot;tooltip&quot;: {
            &quot;msResolution&quot;: true,
            &quot;shared&quot;: true,
            &quot;sort&quot;: 0,
            &quot;value_type&quot;: &quot;cumulative&quot;
          },
          &quot;type&quot;: &quot;graph&quot;,
          &quot;xaxis&quot;: {
            &quot;show&quot;: true
          },
          &quot;yaxes&quot;: [
            {
              &quot;format&quot;: &quot;short&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: null,
              &quot;show&quot;: true
            },
            {
              &quot;format&quot;: &quot;short&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: null,
              &quot;show&quot;: false
            }
          ]
        }
      ],
      &quot;title&quot;: &quot;Load&quot;
    },
    {
      &quot;collapse&quot;: false,
      &quot;editable&quot;: true,
      &quot;height&quot;: &quot;250px&quot;,
      &quot;panels&quot;: [
        {
          &quot;aliasColors&quot;: {},
          &quot;bars&quot;: false,
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;decimals&quot;: 2,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;fill&quot;: 4,
          &quot;grid&quot;: {
            &quot;threshold1&quot;: null,
            &quot;threshold1Color&quot;: &quot;rgba(216, 200, 27, 0.27)&quot;,
            &quot;threshold2&quot;: null,
            &quot;threshold2Color&quot;: &quot;rgba(234, 112, 112, 0.22)&quot;
          },
          &quot;id&quot;: 5,
          &quot;isNew&quot;: true,
          &quot;legend&quot;: {
            &quot;alignAsTable&quot;: true,
            &quot;avg&quot;: true,
            &quot;current&quot;: false,
            &quot;max&quot;: true,
            &quot;min&quot;: true,
            &quot;rightSide&quot;: true,
            &quot;show&quot;: true,
            &quot;total&quot;: false,
            &quot;values&quot;: true
          },
          &quot;lines&quot;: true,
          &quot;linewidth&quot;: 2,
          &quot;links&quot;: [],
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;percentage&quot;: false,
          &quot;pointradius&quot;: 5,
          &quot;points&quot;: false,
          &quot;renderer&quot;: &quot;flot&quot;,
          &quot;seriesOverrides&quot;: [],
          &quot;span&quot;: 12,
          &quot;stack&quot;: true,
          &quot;steppedLine&quot;: false,
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;sum(rate(node_cpu_seconds_total[1m])) by (mode) * 100 / scalar(count(node_cpu_seconds_total{mode=\&quot;user\&quot;}))&quot;,
              &quot;intervalFactor&quot;: 10,
              &quot;legendFormat&quot;: &quot;{{ mode }}&quot;,
              &quot;metric&quot;: &quot;node_cpu_seconds_total&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 10
            }
          ],
          &quot;timeFrom&quot;: null,
          &quot;timeShift&quot;: null,
          &quot;title&quot;: &quot;CPU Usage&quot;,
          &quot;tooltip&quot;: {
            &quot;msResolution&quot;: true,
            &quot;shared&quot;: true,
            &quot;sort&quot;: 2,
            &quot;value_type&quot;: &quot;individual&quot;
          },
          &quot;type&quot;: &quot;graph&quot;,
          &quot;xaxis&quot;: {
            &quot;show&quot;: true
          },
          &quot;yaxes&quot;: [
            {
              &quot;format&quot;: &quot;percent&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: 100,
              &quot;min&quot;: 0,
              &quot;show&quot;: true
            },
            {
              &quot;format&quot;: &quot;short&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: 0,
              &quot;show&quot;: true
            }
          ]
        }
      ],
      &quot;title&quot;: &quot;CPU&quot;
    },
    {
      &quot;collapse&quot;: false,
      &quot;editable&quot;: true,
      &quot;height&quot;: &quot;250px&quot;,
      &quot;panels&quot;: [
        {
          &quot;aliasColors&quot;: {},
          &quot;bars&quot;: false,
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;decimals&quot;: 2,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;fill&quot;: 4,
          &quot;grid&quot;: {
            &quot;threshold1&quot;: null,
            &quot;threshold1Color&quot;: &quot;rgba(216, 200, 27, 0.27)&quot;,
            &quot;threshold2&quot;: null,
            &quot;threshold2Color&quot;: &quot;rgba(234, 112, 112, 0.22)&quot;
          },
          &quot;id&quot;: 6,
          &quot;isNew&quot;: true,
          &quot;legend&quot;: {
            &quot;alignAsTable&quot;: true,
            &quot;avg&quot;: true,
            &quot;current&quot;: false,
            &quot;max&quot;: true,
            &quot;min&quot;: true,
            &quot;rightSide&quot;: true,
            &quot;show&quot;: true,
            &quot;total&quot;: false,
            &quot;values&quot;: true
          },
          &quot;lines&quot;: true,
          &quot;linewidth&quot;: 2,
          &quot;links&quot;: [],
          &quot;nullPointMode&quot;: &quot;null&quot;,
          &quot;percentage&quot;: false,
          &quot;pointradius&quot;: 5,
          &quot;points&quot;: false,
          &quot;renderer&quot;: &quot;flot&quot;,
          &quot;seriesOverrides&quot;: [
            {
              &quot;alias&quot;: &quot;Used&quot;,
              &quot;color&quot;: &quot;#BF1B00&quot;
            },
            {
              &quot;alias&quot;: &quot;Free&quot;,
              &quot;color&quot;: &quot;#7EB26D&quot;
            },
            {
              &quot;alias&quot;: &quot;Buffers&quot;,
              &quot;color&quot;: &quot;#6ED0E0&quot;
            },
            {
              &quot;alias&quot;: &quot;Cached&quot;,
              &quot;color&quot;: &quot;#EF843C&quot;
            }
          ],
          &quot;span&quot;: 12,
          &quot;stack&quot;: true,
          &quot;steppedLine&quot;: false,
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;node_memory_MemTotal_bytes - (node_memory_MemFree_bytes + node_memory_Buffers_bytes + node_memory_Cached_bytes)&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;Used&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 1
            },
            {
              &quot;expr&quot;: &quot;node_memory_MemFree_bytes&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;Free&quot;,
              &quot;refId&quot;: &quot;B&quot;,
              &quot;step&quot;: 1
            },
            {
              &quot;expr&quot;: &quot;node_memory_Buffers_bytes&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;Buffers&quot;,
              &quot;refId&quot;: &quot;C&quot;,
              &quot;step&quot;: 1
            },
            {
              &quot;expr&quot;: &quot;node_memory_Cached_bytes&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;Cached&quot;,
              &quot;refId&quot;: &quot;D&quot;,
              &quot;step&quot;: 1
            }
          ],
          &quot;timeFrom&quot;: null,
          &quot;timeShift&quot;: null,
          &quot;title&quot;: &quot;Memory Usage&quot;,
          &quot;tooltip&quot;: {
            &quot;msResolution&quot;: true,
            &quot;shared&quot;: true,
            &quot;sort&quot;: 2,
            &quot;value_type&quot;: &quot;individual&quot;
          },
          &quot;type&quot;: &quot;graph&quot;,
          &quot;xaxis&quot;: {
            &quot;show&quot;: true
          },
          &quot;yaxes&quot;: [
            {
              &quot;format&quot;: &quot;bytes&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: null,
              &quot;show&quot;: true
            },
            {
              &quot;format&quot;: &quot;short&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: null,
              &quot;show&quot;: true
            }
          ]
        }
      ],
      &quot;title&quot;: &quot;Memory&quot;
    },
    {
      &quot;collapse&quot;: false,
      &quot;editable&quot;: true,
      &quot;height&quot;: &quot;250px&quot;,
      &quot;panels&quot;: [
        {
          &quot;aliasColors&quot;: {},
          &quot;bars&quot;: false,
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;decimals&quot;: 2,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;fill&quot;: 1,
          &quot;grid&quot;: {
            &quot;threshold1&quot;: null,
            &quot;threshold1Color&quot;: &quot;rgba(216, 200, 27, 0.27)&quot;,
            &quot;threshold2&quot;: null,
            &quot;threshold2Color&quot;: &quot;rgba(234, 112, 112, 0.22)&quot;
          },
          &quot;id&quot;: 7,
          &quot;isNew&quot;: true,
          &quot;legend&quot;: {
            &quot;alignAsTable&quot;: true,
            &quot;avg&quot;: true,
            &quot;current&quot;: false,
            &quot;max&quot;: true,
            &quot;min&quot;: true,
            &quot;rightSide&quot;: true,
            &quot;show&quot;: true,
            &quot;total&quot;: false,
            &quot;values&quot;: true
          },
          &quot;lines&quot;: true,
          &quot;linewidth&quot;: 2,
          &quot;links&quot;: [],
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;percentage&quot;: false,
          &quot;pointradius&quot;: 5,
          &quot;points&quot;: false,
          &quot;renderer&quot;: &quot;flot&quot;,
          &quot;seriesOverrides&quot;: [
            {
              &quot;alias&quot;: &quot;read&quot;,
              &quot;yaxis&quot;: 1
            },
            {
              &quot;alias&quot;: &quot;written&quot;,
              &quot;yaxis&quot;: 1
            },
            {
              &quot;alias&quot;: &quot;io time&quot;,
              &quot;yaxis&quot;: 2
            }
          ],
          &quot;span&quot;: 12,
          &quot;stack&quot;: false,
          &quot;steppedLine&quot;: false,
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;sum(irate(node_disk_read_bytes_total[1m]))&quot;,
              &quot;interval&quot;: &quot;&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;read&quot;,
              &quot;metric&quot;: &quot;node_disk_read_bytes_total&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 1
            },
            {
              &quot;expr&quot;: &quot;sum(irate(node_disk_written_bytes_total[1m]))&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;written&quot;,
              &quot;metric&quot;: &quot;node_disk_written_bytes_total&quot;,
              &quot;refId&quot;: &quot;B&quot;,
              &quot;step&quot;: 1
            },
            {
              &quot;expr&quot;: &quot;sum(irate(node_disk_io_time_seconds_total[1m]))&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;io time&quot;,
              &quot;metric&quot;: &quot;node_disk_io_time_seconds_total&quot;,
              &quot;refId&quot;: &quot;C&quot;,
              &quot;step&quot;: 1
            }
          ],
          &quot;timeFrom&quot;: null,
          &quot;timeShift&quot;: null,
          &quot;title&quot;: &quot;I/O Usage&quot;,
          &quot;tooltip&quot;: {
            &quot;msResolution&quot;: true,
            &quot;shared&quot;: true,
            &quot;sort&quot;: 0,
            &quot;value_type&quot;: &quot;cumulative&quot;
          },
          &quot;type&quot;: &quot;graph&quot;,
          &quot;xaxis&quot;: {
            &quot;show&quot;: true
          },
          &quot;yaxes&quot;: [
            {
              &quot;format&quot;: &quot;Bps&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: 0,
              &quot;show&quot;: true
            },
            {
              &quot;format&quot;: &quot;ms&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: null,
              &quot;show&quot;: true
            }
          ]
        }
      ],
      &quot;title&quot;: &quot;I/O&quot;
    },
    {
      &quot;collapse&quot;: false,
      &quot;editable&quot;: true,
      &quot;height&quot;: &quot;250px&quot;,
      &quot;panels&quot;: [
        {
          &quot;aliasColors&quot;: {},
          &quot;bars&quot;: false,
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;decimals&quot;: 2,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;fill&quot;: 4,
          &quot;grid&quot;: {
            &quot;threshold1&quot;: null,
            &quot;threshold1Color&quot;: &quot;rgba(216, 200, 27, 0.27)&quot;,
            &quot;threshold2&quot;: null,
            &quot;threshold2Color&quot;: &quot;rgba(234, 112, 112, 0.22)&quot;
          },
          &quot;id&quot;: 8,
          &quot;isNew&quot;: true,
          &quot;legend&quot;: {
            &quot;alignAsTable&quot;: true,
            &quot;avg&quot;: true,
            &quot;current&quot;: false,
            &quot;max&quot;: true,
            &quot;min&quot;: true,
            &quot;rightSide&quot;: true,
            &quot;show&quot;: true,
            &quot;total&quot;: false,
            &quot;values&quot;: true
          },
          &quot;lines&quot;: true,
          &quot;linewidth&quot;: 2,
          &quot;links&quot;: [],
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;percentage&quot;: false,
          &quot;pointradius&quot;: 5,
          &quot;points&quot;: false,
          &quot;renderer&quot;: &quot;flot&quot;,
          &quot;seriesOverrides&quot;: [],
          &quot;span&quot;: 12,
          &quot;stack&quot;: true,
          &quot;steppedLine&quot;: false,
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;irate(node_network_receive_bytes_total{device!=\&quot;lo\&quot;}[1m])&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;In: {{ device }}&quot;,
              &quot;metric&quot;: &quot;node_network_receive_bytes_total&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 1
            },
            {
              &quot;expr&quot;: &quot;irate(node_network_transmit_bytes_total{device!=\&quot;lo\&quot;}[1m])&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;Out: {{ device }}&quot;,
              &quot;metric&quot;: &quot;node_network_transmit_bytes_total&quot;,
              &quot;refId&quot;: &quot;B&quot;,
              &quot;step&quot;: 1
            }
          ],
          &quot;timeFrom&quot;: null,
          &quot;timeShift&quot;: null,
          &quot;title&quot;: &quot;Network Usage&quot;,
          &quot;tooltip&quot;: {
            &quot;msResolution&quot;: true,
            &quot;shared&quot;: true,
            &quot;sort&quot;: 2,
            &quot;value_type&quot;: &quot;individual&quot;
          },
          &quot;type&quot;: &quot;graph&quot;,
          &quot;xaxis&quot;: {
            &quot;show&quot;: true
          },
          &quot;yaxes&quot;: [
            {
              &quot;format&quot;: &quot;Bps&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: 0,
              &quot;show&quot;: true
            },
            {
              &quot;format&quot;: &quot;short&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: null,
              &quot;show&quot;: false
            }
          ]
        }
      ],
      &quot;title&quot;: &quot;Network&quot;
    },
    {
      &quot;collapse&quot;: false,
      &quot;editable&quot;: true,
      &quot;height&quot;: &quot;250px&quot;,
      &quot;panels&quot;: [
        {
          &quot;aliasColors&quot;: {},
          &quot;bars&quot;: false,
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;decimals&quot;: 2,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;fill&quot;: 4,
          &quot;grid&quot;: {
            &quot;threshold1&quot;: null,
            &quot;threshold1Color&quot;: &quot;rgba(216, 200, 27, 0.27)&quot;,
            &quot;threshold2&quot;: null,
            &quot;threshold2Color&quot;: &quot;rgba(234, 112, 112, 0.22)&quot;
          },
          &quot;id&quot;: 14,
          &quot;isNew&quot;: true,
          &quot;legend&quot;: {
            &quot;alignAsTable&quot;: true,
            &quot;avg&quot;: true,
            &quot;current&quot;: false,
            &quot;max&quot;: true,
            &quot;min&quot;: true,
            &quot;rightSide&quot;: false,
            &quot;show&quot;: true,
            &quot;total&quot;: false,
            &quot;values&quot;: true
          },
          &quot;lines&quot;: true,
          &quot;linewidth&quot;: 2,
          &quot;links&quot;: [],
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;percentage&quot;: false,
          &quot;pointradius&quot;: 5,
          &quot;points&quot;: false,
          &quot;renderer&quot;: &quot;flot&quot;,
          &quot;seriesOverrides&quot;: [
            {
              &quot;alias&quot;: &quot;Used&quot;,
              &quot;color&quot;: &quot;#890F02&quot;
            },
            {
              &quot;alias&quot;: &quot;Free&quot;,
              &quot;color&quot;: &quot;#7EB26D&quot;
            }
          ],
          &quot;span&quot;: 6,
          &quot;stack&quot;: true,
          &quot;steppedLine&quot;: false,
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;node_memory_SwapTotal_bytes - node_memory_SwapFree_bytes&quot;,
              &quot;interval&quot;: &quot;10s&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;Used&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 10
            },
            {
              &quot;expr&quot;: &quot;node_memory_SwapFree_bytes&quot;,
              &quot;interval&quot;: &quot;10s&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;Free&quot;,
              &quot;refId&quot;: &quot;B&quot;,
              &quot;step&quot;: 10
            }
          ],
          &quot;timeFrom&quot;: null,
          &quot;timeShift&quot;: null,
          &quot;title&quot;: &quot;Swap Usage&quot;,
          &quot;tooltip&quot;: {
            &quot;msResolution&quot;: true,
            &quot;shared&quot;: true,
            &quot;sort&quot;: 2,
            &quot;value_type&quot;: &quot;individual&quot;
          },
          &quot;type&quot;: &quot;graph&quot;,
          &quot;xaxis&quot;: {
            &quot;show&quot;: true
          },
          &quot;yaxes&quot;: [
            {
              &quot;format&quot;: &quot;bytes&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: 0,
              &quot;show&quot;: true
            },
            {
              &quot;format&quot;: &quot;short&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: null,
              &quot;show&quot;: false
            }
          ]
        },
        {
          &quot;aliasColors&quot;: {},
          &quot;bars&quot;: false,
          &quot;datasource&quot;: &quot;Prometheus&quot;,
          &quot;decimals&quot;: 2,
          &quot;editable&quot;: true,
          &quot;error&quot;: false,
          &quot;fill&quot;: 1,
          &quot;grid&quot;: {
            &quot;threshold1&quot;: null,
            &quot;threshold1Color&quot;: &quot;rgba(216, 200, 27, 0.27)&quot;,
            &quot;threshold2&quot;: null,
            &quot;threshold2Color&quot;: &quot;rgba(234, 112, 112, 0.22)&quot;
          },
          &quot;id&quot;: 15,
          &quot;isNew&quot;: true,
          &quot;legend&quot;: {
            &quot;alignAsTable&quot;: true,
            &quot;avg&quot;: true,
            &quot;current&quot;: false,
            &quot;max&quot;: true,
            &quot;min&quot;: true,
            &quot;show&quot;: true,
            &quot;total&quot;: false,
            &quot;values&quot;: true
          },
          &quot;lines&quot;: true,
          &quot;linewidth&quot;: 2,
          &quot;links&quot;: [],
          &quot;nullPointMode&quot;: &quot;connected&quot;,
          &quot;percentage&quot;: false,
          &quot;pointradius&quot;: 5,
          &quot;points&quot;: false,
          &quot;renderer&quot;: &quot;flot&quot;,
          &quot;seriesOverrides&quot;: [],
          &quot;span&quot;: 6,
          &quot;stack&quot;: false,
          &quot;steppedLine&quot;: false,
          &quot;targets&quot;: [
            {
              &quot;expr&quot;: &quot;rate(node_vmstat_pswpin[1m]) * 4096 or irate(node_vmstat_pswpin[5m]) * 4096&quot;,
              &quot;interval&quot;: &quot;10s&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;In&quot;,
              &quot;refId&quot;: &quot;A&quot;,
              &quot;step&quot;: 10
            },
            {
              &quot;expr&quot;: &quot;rate(node_vmstat_pswpout[1m]) * 4096 or irate(node_vmstat_pswpout[5m]) * 4096&quot;,
              &quot;interval&quot;: &quot;10s&quot;,
              &quot;intervalFactor&quot;: 1,
              &quot;legendFormat&quot;: &quot;Out&quot;,
              &quot;refId&quot;: &quot;B&quot;,
              &quot;step&quot;: 10
            }
          ],
          &quot;timeFrom&quot;: null,
          &quot;timeShift&quot;: null,
          &quot;title&quot;: &quot;Swap I/O&quot;,
          &quot;tooltip&quot;: {
            &quot;msResolution&quot;: true,
            &quot;shared&quot;: true,
            &quot;sort&quot;: 0,
            &quot;value_type&quot;: &quot;cumulative&quot;
          },
          &quot;type&quot;: &quot;graph&quot;,
          &quot;xaxis&quot;: {
            &quot;show&quot;: true
          },
          &quot;yaxes&quot;: [
            {
              &quot;format&quot;: &quot;Bps&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: 0,
              &quot;show&quot;: true
            },
            {
              &quot;format&quot;: &quot;short&quot;,
              &quot;label&quot;: null,
              &quot;logBase&quot;: 1,
              &quot;max&quot;: null,
              &quot;min&quot;: null,
              &quot;show&quot;: false
            }
          ]
        }
      ],
      &quot;title&quot;: &quot;New row&quot;
    }
  ],
  &quot;time&quot;: {
    &quot;from&quot;: &quot;now-15m&quot;,
    &quot;to&quot;: &quot;now&quot;
  },
  &quot;timepicker&quot;: {
    &quot;refresh_intervals&quot;: [
      &quot;5s&quot;,
      &quot;10s&quot;,
      &quot;30s&quot;,
      &quot;1m&quot;,
      &quot;5m&quot;,
      &quot;15m&quot;,
      &quot;30m&quot;,
      &quot;1h&quot;,
      &quot;2h&quot;,
      &quot;1d&quot;
    ],
    &quot;time_options&quot;: [
      &quot;5m&quot;,
      &quot;15m&quot;,
      &quot;1h&quot;,
      &quot;6h&quot;,
      &quot;12h&quot;,
      &quot;24h&quot;,
      &quot;2d&quot;,
      &quot;7d&quot;,
      &quot;30d&quot;
    ]
  },
  &quot;templating&quot;: {
    &quot;list&quot;: []
  },
  &quot;annotations&quot;: {
    &quot;list&quot;: []
  },
  &quot;refresh&quot;: &quot;10s&quot;,
  &quot;schemaVersion&quot;: 12,
  &quot;version&quot;: 2,
  &quot;links&quot;: [],
  &quot;gnetId&quot;: null
}</code></pre></details></li></ul></li></ol><ol type="a" id="131aa64c-9d0a-818d-ba85-dedab3d0268b" class="numbered-list" start="3"><li>Dashboard для мониторинга состояния сервисов, которые учавствуют в мониторинге<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8189-b234-db6135f7cade" class="code"><code class="language-Bash">nano monitor_services.json</code></pre><ul id="131aa64c-9d0a-8195-9477-d3d4c344fe4d" class="toggle"><li><details open=""><summary>JSON для дашборда monitor_services</summary><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8117-b5ef-e873024aa704" class="code"><code class="language-Bash">{
  &quot;id&quot;: null,
  &quot;title&quot;: &quot;Monitor Services&quot;,
  &quot;tags&quot;: [
    &quot;prometheus&quot;
  ],
  &quot;style&quot;: &quot;dark&quot;,
  &quot;timezone&quot;: &quot;browser&quot;,
  &quot;editable&quot;: true,
  &quot;hideControls&quot;: false,
  &quot;sharedCrosshair&quot;: true,
  &quot;panels&quot;: [
    {
      &quot;cacheTimeout&quot;: null,
      &quot;colorBackground&quot;: false,
      &quot;colorValue&quot;: false,
      &quot;colors&quot;: [
        &quot;rgba(245, 54, 54, 0.9)&quot;,
        &quot;rgba(237, 129, 40, 0.89)&quot;,
        &quot;rgba(50, 172, 45, 0.97)&quot;
      ],
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;decimals&quot;: 1,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;format&quot;: &quot;s&quot;,
      &quot;gauge&quot;: {
        &quot;maxValue&quot;: 100,
        &quot;minValue&quot;: 0,
        &quot;show&quot;: false,
        &quot;thresholdLabels&quot;: false,
        &quot;thresholdMarkers&quot;: true
      },
      &quot;gridPos&quot;: {
        &quot;h&quot;: 3,
        &quot;w&quot;: 6,
        &quot;x&quot;: 0,
        &quot;y&quot;: 0
      },
      &quot;hideTimeOverride&quot;: true,
      &quot;id&quot;: 1,
      &quot;interval&quot;: null,
      &quot;links&quot;: [],
      &quot;mappingType&quot;: 1,
      &quot;mappingTypes&quot;: [
        {
          &quot;name&quot;: &quot;value to text&quot;,
          &quot;value&quot;: 1
        },
        {
          &quot;name&quot;: &quot;range to text&quot;,
          &quot;value&quot;: 2
        }
      ],
      &quot;maxDataPoints&quot;: 100,
      &quot;nullPointMode&quot;: &quot;connected&quot;,
      &quot;nullText&quot;: null,
      &quot;postfix&quot;: &quot;s&quot;,
      &quot;postfixFontSize&quot;: &quot;80%&quot;,
      &quot;prefix&quot;: &quot;&quot;,
      &quot;prefixFontSize&quot;: &quot;50%&quot;,
      &quot;rangeMaps&quot;: [
        {
          &quot;from&quot;: &quot;null&quot;,
          &quot;text&quot;: &quot;N/A&quot;,
          &quot;to&quot;: &quot;null&quot;
        }
      ],
      &quot;sparkline&quot;: {
        &quot;fillColor&quot;: &quot;rgba(31, 118, 189, 0.18)&quot;,
        &quot;full&quot;: false,
        &quot;lineColor&quot;: &quot;rgb(31, 120, 193)&quot;,
        &quot;show&quot;: false
      },
      &quot;tableColumn&quot;: &quot;&quot;,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;(time() - process_start_time_seconds{instance=\&quot;localhost:9090\&quot;,job=\&quot;prometheus\&quot;})&quot;,
          &quot;interval&quot;: &quot;10s&quot;,
          &quot;intervalFactor&quot;: 1,
          &quot;legendFormat&quot;: &quot;&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: &quot;&quot;,
      &quot;timeFrom&quot;: &quot;10s&quot;,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Prometheus Uptime&quot;,
      &quot;type&quot;: &quot;singlestat&quot;,
      &quot;valueFontSize&quot;: &quot;80%&quot;,
      &quot;valueMaps&quot;: [
        {
          &quot;op&quot;: &quot;=&quot;,
          &quot;text&quot;: &quot;N/A&quot;,
          &quot;value&quot;: &quot;null&quot;
        }
      ],
      &quot;valueName&quot;: &quot;avg&quot;
    },
    {
      &quot;cacheTimeout&quot;: null,
      &quot;colorBackground&quot;: false,
      &quot;colorValue&quot;: false,
      &quot;colors&quot;: [
        &quot;rgba(245, 54, 54, 0.9)&quot;,
        &quot;rgba(237, 129, 40, 0.89)&quot;,
        &quot;rgba(50, 172, 45, 0.97)&quot;
      ],
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;decimals&quot;: 2,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;format&quot;: &quot;bytes&quot;,
      &quot;gauge&quot;: {
        &quot;maxValue&quot;: 100,
        &quot;minValue&quot;: 0,
        &quot;show&quot;: false,
        &quot;thresholdLabels&quot;: false,
        &quot;thresholdMarkers&quot;: true
      },
      &quot;gridPos&quot;: {
        &quot;h&quot;: 3,
        &quot;w&quot;: 6,
        &quot;x&quot;: 6,
        &quot;y&quot;: 0
      },
      &quot;hideTimeOverride&quot;: true,
      &quot;id&quot;: 5,
      &quot;interval&quot;: null,
      &quot;links&quot;: [],
      &quot;mappingType&quot;: 1,
      &quot;mappingTypes&quot;: [
        {
          &quot;name&quot;: &quot;value to text&quot;,
          &quot;value&quot;: 1
        },
        {
          &quot;name&quot;: &quot;range to text&quot;,
          &quot;value&quot;: 2
        }
      ],
      &quot;maxDataPoints&quot;: 100,
      &quot;nullPointMode&quot;: &quot;connected&quot;,
      &quot;nullText&quot;: null,
      &quot;postfix&quot;: &quot;&quot;,
      &quot;postfixFontSize&quot;: &quot;50%&quot;,
      &quot;prefix&quot;: &quot;&quot;,
      &quot;prefixFontSize&quot;: &quot;50%&quot;,
      &quot;rangeMaps&quot;: [
        {
          &quot;from&quot;: &quot;null&quot;,
          &quot;text&quot;: &quot;N/A&quot;,
          &quot;to&quot;: &quot;null&quot;
        }
      ],
      &quot;sparkline&quot;: {
        &quot;fillColor&quot;: &quot;rgba(31, 118, 189, 0.18)&quot;,
        &quot;full&quot;: false,
        &quot;lineColor&quot;: &quot;rgb(31, 120, 193)&quot;,
        &quot;show&quot;: false
      },
      &quot;tableColumn&quot;: &quot;&quot;,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;sum(container_memory_usage_bytes{container_label_org_label_schema_group=\&quot;monitoring\&quot;})&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;interval&quot;: &quot;10s&quot;,
          &quot;intervalFactor&quot;: 1,
          &quot;legendFormat&quot;: &quot;&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: &quot;&quot;,
      &quot;timeFrom&quot;: &quot;10s&quot;,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Memory Usage&quot;,
      &quot;type&quot;: &quot;singlestat&quot;,
      &quot;valueFontSize&quot;: &quot;80%&quot;,
      &quot;valueMaps&quot;: [
        {
          &quot;op&quot;: &quot;=&quot;,
          &quot;text&quot;: &quot;N/A&quot;,
          &quot;value&quot;: &quot;null&quot;
        }
      ],
      &quot;valueName&quot;: &quot;avg&quot;
    },
    {
      &quot;cacheTimeout&quot;: null,
      &quot;colorBackground&quot;: false,
      &quot;colorValue&quot;: false,
      &quot;colors&quot;: [
        &quot;rgba(245, 54, 54, 0.9)&quot;,
        &quot;rgba(237, 129, 40, 0.89)&quot;,
        &quot;rgba(50, 172, 45, 0.97)&quot;
      ],
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;format&quot;: &quot;none&quot;,
      &quot;gauge&quot;: {
        &quot;maxValue&quot;: 100,
        &quot;minValue&quot;: 0,
        &quot;show&quot;: false,
        &quot;thresholdLabels&quot;: false,
        &quot;thresholdMarkers&quot;: true
      },
      &quot;gridPos&quot;: {
        &quot;h&quot;: 3,
        &quot;w&quot;: 6,
        &quot;x&quot;: 12,
        &quot;y&quot;: 0
      },
      &quot;hideTimeOverride&quot;: true,
      &quot;id&quot;: 3,
      &quot;interval&quot;: null,
      &quot;links&quot;: [],
      &quot;mappingType&quot;: 1,
      &quot;mappingTypes&quot;: [
        {
          &quot;name&quot;: &quot;value to text&quot;,
          &quot;value&quot;: 1
        },
        {
          &quot;name&quot;: &quot;range to text&quot;,
          &quot;value&quot;: 2
        }
      ],
      &quot;maxDataPoints&quot;: 100,
      &quot;nullPointMode&quot;: &quot;connected&quot;,
      &quot;nullText&quot;: null,
      &quot;postfix&quot;: &quot;&quot;,
      &quot;postfixFontSize&quot;: &quot;50%&quot;,
      &quot;prefix&quot;: &quot;&quot;,
      &quot;prefixFontSize&quot;: &quot;50%&quot;,
      &quot;rangeMaps&quot;: [
        {
          &quot;from&quot;: &quot;null&quot;,
          &quot;text&quot;: &quot;N/A&quot;,
          &quot;to&quot;: &quot;null&quot;
        }
      ],
      &quot;sparkline&quot;: {
        &quot;fillColor&quot;: &quot;rgba(31, 118, 189, 0.18)&quot;,
        &quot;full&quot;: false,
        &quot;lineColor&quot;: &quot;rgb(31, 120, 193)&quot;,
        &quot;show&quot;: false
      },
      &quot;tableColumn&quot;: &quot;&quot;,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;prometheus_tsdb_head_chunks&quot;,
          &quot;interval&quot;: &quot;10s&quot;,
          &quot;intervalFactor&quot;: 1,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: &quot;&quot;,
      &quot;timeFrom&quot;: &quot;10s&quot;,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;In-Memory Chunks&quot;,
      &quot;type&quot;: &quot;singlestat&quot;,
      &quot;valueFontSize&quot;: &quot;80%&quot;,
      &quot;valueMaps&quot;: [
        {
          &quot;op&quot;: &quot;=&quot;,
          &quot;text&quot;: &quot;N/A&quot;,
          &quot;value&quot;: &quot;null&quot;
        }
      ],
      &quot;valueName&quot;: &quot;avg&quot;
    },
    {
      &quot;cacheTimeout&quot;: null,
      &quot;colorBackground&quot;: false,
      &quot;colorValue&quot;: false,
      &quot;colors&quot;: [
        &quot;rgba(245, 54, 54, 0.9)&quot;,
        &quot;rgba(237, 129, 40, 0.89)&quot;,
        &quot;rgba(50, 172, 45, 0.97)&quot;
      ],
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;format&quot;: &quot;none&quot;,
      &quot;gauge&quot;: {
        &quot;maxValue&quot;: 100,
        &quot;minValue&quot;: 0,
        &quot;show&quot;: false,
        &quot;thresholdLabels&quot;: false,
        &quot;thresholdMarkers&quot;: true
      },
      &quot;gridPos&quot;: {
        &quot;h&quot;: 3,
        &quot;w&quot;: 6,
        &quot;x&quot;: 18,
        &quot;y&quot;: 0
      },
      &quot;hideTimeOverride&quot;: true,
      &quot;id&quot;: 2,
      &quot;interval&quot;: null,
      &quot;links&quot;: [],
      &quot;mappingType&quot;: 1,
      &quot;mappingTypes&quot;: [
        {
          &quot;name&quot;: &quot;value to text&quot;,
          &quot;value&quot;: 1
        },
        {
          &quot;name&quot;: &quot;range to text&quot;,
          &quot;value&quot;: 2
        }
      ],
      &quot;maxDataPoints&quot;: 100,
      &quot;nullPointMode&quot;: &quot;connected&quot;,
      &quot;nullText&quot;: null,
      &quot;postfix&quot;: &quot;&quot;,
      &quot;postfixFontSize&quot;: &quot;50%&quot;,
      &quot;prefix&quot;: &quot;&quot;,
      &quot;prefixFontSize&quot;: &quot;50%&quot;,
      &quot;rangeMaps&quot;: [
        {
          &quot;from&quot;: &quot;null&quot;,
          &quot;text&quot;: &quot;N/A&quot;,
          &quot;to&quot;: &quot;null&quot;
        }
      ],
      &quot;sparkline&quot;: {
        &quot;fillColor&quot;: &quot;rgba(31, 118, 189, 0.18)&quot;,
        &quot;full&quot;: false,
        &quot;lineColor&quot;: &quot;rgb(31, 120, 193)&quot;,
        &quot;show&quot;: false
      },
      &quot;tableColumn&quot;: &quot;&quot;,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;prometheus_tsdb_head_series&quot;,
          &quot;interval&quot;: &quot;10s&quot;,
          &quot;intervalFactor&quot;: 1,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: &quot;&quot;,
      &quot;timeFrom&quot;: &quot;10s&quot;,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;In-Memory Series&quot;,
      &quot;type&quot;: &quot;singlestat&quot;,
      &quot;valueFontSize&quot;: &quot;80%&quot;,
      &quot;valueMaps&quot;: [
        {
          &quot;op&quot;: &quot;=&quot;,
          &quot;text&quot;: &quot;N/A&quot;,
          &quot;value&quot;: &quot;null&quot;
        }
      ],
      &quot;valueName&quot;: &quot;avg&quot;
    },
    {
      &quot;aliasColors&quot;: {},
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;decimals&quot;: 2,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;grid&quot;: {},
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 24,
        &quot;x&quot;: 0,
        &quot;y&quot;: 3
      },
      &quot;id&quot;: 6,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: false,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;rightSide&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;connected&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;sum by (name) (rate(container_cpu_user_seconds_total{container_label_org_label_schema_group=\&quot;monitoring\&quot;}[1m]) * 100  / scalar(count(node_cpu{mode=\&quot;user\&quot;})))&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;hide&quot;: true,
          &quot;intervalFactor&quot;: 10,
          &quot;legendFormat&quot;: &quot;{{ name }}&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        },
        {
          &quot;expr&quot;: &quot;sum by (name) (rate(container_cpu_user_seconds_total{container_label_org_label_schema_group=\&quot;monitoring\&quot;}[1m]) * 100  / scalar(count(node_cpu_seconds_total{mode=\&quot;user\&quot;})))&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 10,
          &quot;legendFormat&quot;: &quot;{{ name }}&quot;,
          &quot;refId&quot;: &quot;B&quot;
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Container CPU Usage&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: true,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 2,
        &quot;value_type&quot;: &quot;cumulative&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;percent&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: true
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {},
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;decimals&quot;: 2,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;grid&quot;: {},
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 24,
        &quot;x&quot;: 0,
        &quot;y&quot;: 10
      },
      &quot;id&quot;: 7,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: false,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;rightSide&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;connected&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;sum by (name) (container_memory_usage_bytes{container_label_org_label_schema_group=\&quot;monitoring\&quot;})&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;interval&quot;: &quot;&quot;,
          &quot;intervalFactor&quot;: 10,
          &quot;legendFormat&quot;: &quot;{{ name }}&quot;,
          &quot;metric&quot;: &quot;container_memory_usage_bytes&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Container Memory Usage&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: true,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 2,
        &quot;value_type&quot;: &quot;cumulative&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;bytes&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {},
      &quot;bars&quot;: true,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;decimals&quot;: 0,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;grid&quot;: {},
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 24,
        &quot;x&quot;: 0,
        &quot;y&quot;: 17
      },
      &quot;id&quot;: 73,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: false,
        &quot;current&quot;: true,
        &quot;max&quot;: false,
        &quot;min&quot;: false,
        &quot;rightSide&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: false,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;connected&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: true,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;sum(ALERTS{alertstate=\&quot;firing\&quot;}) by (alertname)&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;interval&quot;: &quot;30s&quot;,
          &quot;intervalFactor&quot;: 1,
          &quot;legendFormat&quot;: &quot;{{ alertname }}&quot;,
          &quot;metric&quot;: &quot;container_memory_usage_bytes&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Alerts&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: true,
        &quot;shared&quot;: false,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;cumulative&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;collapsed&quot;: false,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 1,
        &quot;w&quot;: 24,
        &quot;x&quot;: 0,
        &quot;y&quot;: 24
      },
      &quot;id&quot;: 22,
      &quot;panels&quot;: [],
      &quot;repeat&quot;: null,
      &quot;title&quot;: &quot;Prometheus Metrics&quot;,
      &quot;type&quot;: &quot;row&quot;
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Max&quot;: &quot;#e24d42&quot;,
        &quot;Open&quot;: &quot;#508642&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 0,
        &quot;y&quot;: 25
      },
      &quot;id&quot;: 18,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: true,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;process_max_fds{job=\&quot;prometheus\&quot;}&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 1,
          &quot;legendFormat&quot;: &quot;Max&quot;,
          &quot;refId&quot;: &quot;A&quot;
        },
        {
          &quot;expr&quot;: &quot;process_open_fds{job=\&quot;prometheus\&quot;}&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 1,
          &quot;legendFormat&quot;: &quot;Open&quot;,
          &quot;refId&quot;: &quot;B&quot;
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;File Descriptors&quot;,
      &quot;tooltip&quot;: {
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Allocated bytes&quot;: &quot;#7EB26D&quot;,
        &quot;Allocated bytes - 1m max&quot;: &quot;#BF1B00&quot;,
        &quot;Allocated bytes - 1m min&quot;: &quot;#BF1B00&quot;,
        &quot;Allocated bytes - 5m max&quot;: &quot;#BF1B00&quot;,
        &quot;Allocated bytes - 5m min&quot;: &quot;#BF1B00&quot;,
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;,
        &quot;RSS&quot;: &quot;#447EBC&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;decimals&quot;: null,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 8,
        &quot;y&quot;: 25
      },
      &quot;id&quot;: 58,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: true,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [
        {
          &quot;alias&quot;: &quot;/-/&quot;,
          &quot;fill&quot;: 0
        }
      ],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;process_resident_memory_bytes{job=\&quot;prometheus\&quot;}&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;RSS&quot;,
          &quot;metric&quot;: &quot;process_resident_memory_bytes&quot;,
          &quot;refId&quot;: &quot;B&quot;,
          &quot;step&quot;: 10
        },
        {
          &quot;expr&quot;: &quot;prometheus_local_storage_target_heap_size_bytes{job=\&quot;prometheus\&quot;}&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Target heap size&quot;,
          &quot;metric&quot;: &quot;go_memstats_alloc_bytes&quot;,
          &quot;refId&quot;: &quot;D&quot;,
          &quot;step&quot;: 10
        },
        {
          &quot;expr&quot;: &quot;go_memstats_next_gc_bytes{job=\&quot;prometheus\&quot;}&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Next GC&quot;,
          &quot;metric&quot;: &quot;go_memstats_next_gc_bytes&quot;,
          &quot;refId&quot;: &quot;C&quot;,
          &quot;step&quot;: 10
        },
        {
          &quot;expr&quot;: &quot;go_memstats_alloc_bytes{job=\&quot;prometheus\&quot;}&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Allocated&quot;,
          &quot;metric&quot;: &quot;go_memstats_alloc_bytes&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Memory&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;bytes&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Allocated bytes&quot;: &quot;#F9BA8F&quot;,
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;,
        &quot;RSS&quot;: &quot;#890F02&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 16,
        &quot;y&quot;: 25
      },
      &quot;id&quot;: 60,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: true,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;rate(go_memstats_alloc_bytes_total{job=\&quot;prometheus\&quot;}[1m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Allocated&quot;,
          &quot;metric&quot;: &quot;go_memstats_alloc_bytes&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Allocations&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;Bps&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;,
        &quot;Time series&quot;: &quot;#70dbed&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 0,
        &quot;y&quot;: 32
      },
      &quot;id&quot;: 20,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: true,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;prometheus_tsdb_head_series&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Time series&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_memory_series&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Head Time series&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 8,
        &quot;y&quot;: 32
      },
      &quot;id&quot;: 24,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: true,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;prometheus_tsdb_head_active_appenders&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Head Appenders&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_memory_series&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Head Active Appenders&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;samples/s&quot;: &quot;#e5a8e2&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 16,
        &quot;y&quot;: 32
      },
      &quot;id&quot;: 26,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: true,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;connected&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;rate(prometheus_tsdb_head_samples_appended_total[1m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Samples&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_ingested_samples_total&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Samples Appended&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;Bps&quot;,
          &quot;label&quot;: &quot;&quot;,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;,
        &quot;To persist&quot;: &quot;#9AC48A&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 0,
        &quot;y&quot;: 39
      },
      &quot;id&quot;: 28,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: true,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [
        {
          &quot;alias&quot;: &quot;/Max.*/&quot;,
          &quot;fill&quot;: 0
        }
      ],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;prometheus_tsdb_head_chunks&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Chunks&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_memory_chunks&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Head Chunks&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 8,
        &quot;y&quot;: 39
      },
      &quot;id&quot;: 30,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: true,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;rate(prometheus_tsdb_head_chunks_created_total[1m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Created&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_chunk_ops_total&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Head Chunks Created&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;ops&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;,
        &quot;Removed&quot;: &quot;#e5ac0e&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 16,
        &quot;y&quot;: 39
      },
      &quot;id&quot;: 32,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: true,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 1,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;rate(prometheus_tsdb_head_chunks_removed_total[1m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Removed&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_chunk_ops_total&quot;,
          &quot;refId&quot;: &quot;B&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Head Chunks Removed&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;ops&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Max&quot;: &quot;#447ebc&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;,
        &quot;Min&quot;: &quot;#447ebc&quot;,
        &quot;Now&quot;: &quot;#7eb26d&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 0,
        &quot;y&quot;: 46
      },
      &quot;id&quot;: 34,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: false,
        &quot;avg&quot;: false,
        &quot;current&quot;: false,
        &quot;max&quot;: false,
        &quot;min&quot;: false,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: false
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [
        {
          &quot;alias&quot;: &quot;Max&quot;,
          &quot;fillBelowTo&quot;: &quot;Min&quot;,
          &quot;lines&quot;: false
        }
      ],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;prometheus_tsdb_head_min_time&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Min&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_series_chunks_persisted_count&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        },
        {
          &quot;expr&quot;: &quot;time() * 1000&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;hide&quot;: false,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Now&quot;,
          &quot;refId&quot;: &quot;C&quot;
        },
        {
          &quot;expr&quot;: &quot;prometheus_tsdb_head_max_time&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Max&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_series_chunks_persisted_count&quot;,
          &quot;refId&quot;: &quot;B&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Head Time Range&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;decimals&quot;: null,
          &quot;format&quot;: &quot;dateTimeAsIso&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 8,
        &quot;y&quot;: 46
      },
      &quot;id&quot;: 36,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: true,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;rate(prometheus_tsdb_head_gc_duration_seconds_sum[1m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;GC Time&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_series_chunks_persisted_count&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Head GC Time/s&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;s&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 16,
        &quot;y&quot;: 46
      },
      &quot;id&quot;: 38,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: true,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [
        {
          &quot;alias&quot;: &quot;Queue length&quot;,
          &quot;yaxis&quot;: 2
        }
      ],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;prometheus_tsdb_blocks_loaded&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Blocks Loaded&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_indexing_batch_sizes_sum&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Blocks Loaded&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Failed Compactions&quot;: &quot;#bf1b00&quot;,
        &quot;Failed Reloads&quot;: &quot;#bf1b00&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 0,
        &quot;y&quot;: 53
      },
      &quot;id&quot;: 40,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: false,
        &quot;avg&quot;: false,
        &quot;current&quot;: false,
        &quot;max&quot;: false,
        &quot;min&quot;: false,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: false
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;rate(prometheus_tsdb_reloads_total[10m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;interval&quot;: &quot;&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Reloads&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_series_chunks_persisted_count&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;TSDB Reloads&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;ops&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Failed Compactions&quot;: &quot;#bf1b00&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;,
        &quot;{instance=\&quot;demo.robustperception.io:9090\&quot;,job=\&quot;prometheus\&quot;}&quot;: &quot;#bf1b00&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 8,
        &quot;y&quot;: 53
      },
      &quot;id&quot;: 44,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: true,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;rate(prometheus_tsdb_wal_corruptions_total[10m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;interval&quot;: &quot;&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;WAL Corruptions&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_series_chunks_persisted_count&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        },
        {
          &quot;expr&quot;: &quot;rate(prometheus_tsdb_reloads_failures_total[10m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;interval&quot;: &quot;&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Reload Failures&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_series_chunks_persisted_count&quot;,
          &quot;refId&quot;: &quot;B&quot;,
          &quot;step&quot;: 10
        },
        {
          &quot;expr&quot;: &quot;rate(prometheus_tsdb_head_series_not_found[10m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;interval&quot;: &quot;&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Head Series Not Found&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_series_chunks_persisted_count&quot;,
          &quot;refId&quot;: &quot;C&quot;,
          &quot;step&quot;: 10
        },
        {
          &quot;expr&quot;: &quot;rate(prometheus_tsdb_compactions_failed_total[10m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;interval&quot;: &quot;&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Compaction Failures&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_series_chunks_persisted_count&quot;,
          &quot;refId&quot;: &quot;D&quot;,
          &quot;step&quot;: 10
        },
        {
          &quot;expr&quot;: &quot;rate(prometheus_tsdb_retention_cutoffs_failures_total[10m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;interval&quot;: &quot;&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Retention Cutoff Failures&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_series_chunks_persisted_count&quot;,
          &quot;refId&quot;: &quot;E&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;TSDB Problems&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;none&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Failed Compactions&quot;: &quot;#bf1b00&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 16,
        &quot;y&quot;: 53
      },
      &quot;id&quot;: 42,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: true,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;rate(prometheus_tsdb_wal_fsync_duration_seconds_sum[1m]) / rate(prometheus_tsdb_wal_fsync_duration_seconds_count[1m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;interval&quot;: &quot;&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Fsync Latency&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_series_chunks_persisted_count&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        },
        {
          &quot;expr&quot;: &quot;rate(prometheus_tsdb_wal_truncate_duration_seconds_sum[1m]) / rate(prometheus_tsdb_wal_truncate_duration_seconds_count[1m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;interval&quot;: &quot;&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Truncate Latency&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_series_chunks_persisted_count&quot;,
          &quot;refId&quot;: &quot;B&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;WAL Latencies&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;s&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Failed Compactions&quot;: &quot;#bf1b00&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 0,
        &quot;y&quot;: 60
      },
      &quot;id&quot;: 46,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: true,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;rate(prometheus_tsdb_compactions_total[10m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;interval&quot;: &quot;&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Compactions&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_series_chunks_persisted_count&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Compactions&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;none&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 8,
        &quot;y&quot;: 60
      },
      &quot;id&quot;: 48,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: true,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;rate(prometheus_tsdb_compaction_duration_seconds_sum[10m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Compaction Time&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_series_chunks_persisted_count&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Compaction Time&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;s&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Allocated bytes&quot;: &quot;#F9BA8F&quot;,
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;,
        &quot;RSS&quot;: &quot;#890F02&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 16,
        &quot;y&quot;: 60
      },
      &quot;id&quot;: 50,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: true,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;rate(prometheus_tsdb_retention_cutoffs_total[10m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Retention Cutoffs&quot;,
          &quot;metric&quot;: &quot;last&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Retention Cutoffs&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;none&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 0,
        &quot;y&quot;: 67
      },
      &quot;id&quot;: 56,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: true,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;rate(prometheus_tsdb_compaction_chunk_samples_sum[10m]) / rate(prometheus_tsdb_compaction_chunk_samples_count[10m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Chunk Samples&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_series_chunks_persisted_count&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;First Compaction, Avg Chunk Samples&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;none&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {},
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;grid&quot;: {},
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 8,
        &quot;y&quot;: 67
      },
      &quot;id&quot;: 10,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: false,
        &quot;avg&quot;: false,
        &quot;current&quot;: false,
        &quot;max&quot;: false,
        &quot;min&quot;: false,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: false
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;connected&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;rate(prometheus_target_interval_length_seconds_count[5m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;{{ interval }}&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 2
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Target Scrapes&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: true,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;cumulative&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {},
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;grid&quot;: {},
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 16,
        &quot;y&quot;: 67
      },
      &quot;id&quot;: 11,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: false,
        &quot;avg&quot;: false,
        &quot;current&quot;: false,
        &quot;max&quot;: false,
        &quot;min&quot;: false,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: false
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;connected&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;prometheus_target_interval_length_seconds{quantile!=\&quot;0.01\&quot;, quantile!=\&quot;0.05\&quot;}&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;{{quantile}} ({{interval}})&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 2
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Scrape Duration&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: true,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;cumulative&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;description&quot;: &quot;&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 0,
        &quot;y&quot;: 74
      },
      &quot;id&quot;: 62,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: false,
        &quot;avg&quot;: false,
        &quot;current&quot;: false,
        &quot;max&quot;: false,
        &quot;min&quot;: false,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: false
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;rate(prometheus_http_request_duration_seconds_count[1m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;{{handler}}&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_memory_chunkdescs&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;HTTP requests&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;reqps&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;description&quot;: &quot;&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 8,
        &quot;y&quot;: 74
      },
      &quot;id&quot;: 64,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: false,
        &quot;avg&quot;: false,
        &quot;current&quot;: false,
        &quot;max&quot;: false,
        &quot;min&quot;: false,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: false
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;rate(prometheus_http_request_duration_seconds_sum[1m]) / rate(prometheus_http_request_duration_seconds_count[1m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;{{handler}}&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_memory_chunkdescs&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;HTTP request latency&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;s&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;description&quot;: &quot;&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 16,
        &quot;y&quot;: 74
      },
      &quot;id&quot;: 66,
      &quot;legend&quot;: {
        &quot;avg&quot;: false,
        &quot;current&quot;: false,
        &quot;max&quot;: false,
        &quot;min&quot;: false,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: false
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: true,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;rate(prometheus_http_request_duration_seconds_sum[1m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;{{handler}}&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_memory_chunkdescs&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Time spent in HTTP requests&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;s&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;description&quot;: &quot;Time spent in each mode, per second&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 0,
        &quot;y&quot;: 81
      },
      &quot;id&quot;: 68,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: true,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 1,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: true,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;rate(prometheus_engine_query_duration_seconds_sum[1m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;{{slice}}&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_memory_chunkdescs&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Query engine timings&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;s&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 8,
        &quot;y&quot;: 81
      },
      &quot;id&quot;: 70,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: true,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: true,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;rate(prometheus_rule_group_iterations_missed_total[1m])  &quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Rule group missed&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_memory_chunkdescs&quot;,
          &quot;refId&quot;: &quot;B&quot;,
          &quot;step&quot;: 10
        },
        {
          &quot;expr&quot;: &quot;rate(prometheus_rule_evaluation_failures_total[1m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Rule evals failed&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_memory_chunkdescs&quot;,
          &quot;refId&quot;: &quot;C&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Rule group evaulation problems&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    },
    {
      &quot;aliasColors&quot;: {
        &quot;Chunks&quot;: &quot;#1F78C1&quot;,
        &quot;Chunks to persist&quot;: &quot;#508642&quot;,
        &quot;Max chunks&quot;: &quot;#052B51&quot;,
        &quot;Max to persist&quot;: &quot;#3F6833&quot;
      },
      &quot;bars&quot;: false,
      &quot;dashLength&quot;: 10,
      &quot;dashes&quot;: false,
      &quot;datasource&quot;: &quot;Prometheus&quot;,
      &quot;editable&quot;: true,
      &quot;error&quot;: false,
      &quot;fill&quot;: 1,
      &quot;gridPos&quot;: {
        &quot;h&quot;: 7,
        &quot;w&quot;: 8,
        &quot;x&quot;: 16,
        &quot;y&quot;: 81
      },
      &quot;id&quot;: 72,
      &quot;legend&quot;: {
        &quot;alignAsTable&quot;: true,
        &quot;avg&quot;: true,
        &quot;current&quot;: true,
        &quot;max&quot;: true,
        &quot;min&quot;: true,
        &quot;show&quot;: true,
        &quot;total&quot;: false,
        &quot;values&quot;: true
      },
      &quot;lines&quot;: true,
      &quot;linewidth&quot;: 2,
      &quot;links&quot;: [],
      &quot;nullPointMode&quot;: &quot;null&quot;,
      &quot;percentage&quot;: false,
      &quot;pointradius&quot;: 5,
      &quot;points&quot;: false,
      &quot;renderer&quot;: &quot;flot&quot;,
      &quot;seriesOverrides&quot;: [],
      &quot;spaceLength&quot;: 10,
      &quot;stack&quot;: false,
      &quot;steppedLine&quot;: false,
      &quot;targets&quot;: [
        {
          &quot;expr&quot;: &quot;rate(prometheus_rule_group_duration_seconds_sum[1m])&quot;,
          &quot;format&quot;: &quot;time_series&quot;,
          &quot;intervalFactor&quot;: 2,
          &quot;legendFormat&quot;: &quot;Rule evaluation duration&quot;,
          &quot;metric&quot;: &quot;prometheus_local_storage_memory_chunkdescs&quot;,
          &quot;refId&quot;: &quot;A&quot;,
          &quot;step&quot;: 10
        }
      ],
      &quot;thresholds&quot;: [],
      &quot;timeFrom&quot;: null,
      &quot;timeShift&quot;: null,
      &quot;title&quot;: &quot;Evaluation time of rule groups&quot;,
      &quot;tooltip&quot;: {
        &quot;msResolution&quot;: false,
        &quot;shared&quot;: true,
        &quot;sort&quot;: 0,
        &quot;value_type&quot;: &quot;individual&quot;
      },
      &quot;type&quot;: &quot;graph&quot;,
      &quot;xaxis&quot;: {
        &quot;buckets&quot;: null,
        &quot;mode&quot;: &quot;time&quot;,
        &quot;name&quot;: null,
        &quot;show&quot;: true,
        &quot;values&quot;: []
      },
      &quot;yaxes&quot;: [
        {
          &quot;format&quot;: &quot;s&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: &quot;0&quot;,
          &quot;show&quot;: true
        },
        {
          &quot;format&quot;: &quot;short&quot;,
          &quot;label&quot;: null,
          &quot;logBase&quot;: 1,
          &quot;max&quot;: null,
          &quot;min&quot;: null,
          &quot;show&quot;: false
        }
      ],
      &quot;yaxis&quot;: {
        &quot;align&quot;: false,
        &quot;alignLevel&quot;: null
      }
    }
  ],
  &quot;time&quot;: {
    &quot;from&quot;: &quot;now-15m&quot;,
    &quot;to&quot;: &quot;now&quot;
  },
  &quot;timepicker&quot;: {
    &quot;refresh_intervals&quot;: [
      &quot;5s&quot;,
      &quot;10s&quot;,
      &quot;30s&quot;,
      &quot;1m&quot;,
      &quot;5m&quot;,
      &quot;15m&quot;,
      &quot;30m&quot;,
      &quot;1h&quot;,
      &quot;2h&quot;,
      &quot;1d&quot;
    ],
    &quot;time_options&quot;: [
      &quot;5m&quot;,
      &quot;15m&quot;,
      &quot;1h&quot;,
      &quot;6h&quot;,
      &quot;12h&quot;,
      &quot;24h&quot;,
      &quot;2d&quot;,
      &quot;7d&quot;,
      &quot;30d&quot;
    ]
  },
  &quot;templating&quot;: {
    &quot;list&quot;: []
  },
  &quot;annotations&quot;: {
    &quot;list&quot;: []
  },
  &quot;refresh&quot;: &quot;10s&quot;,
  &quot;schemaVersion&quot;: 12,
  &quot;version&quot;: 22,
  &quot;links&quot;: [],
  &quot;gnetId&quot;: null
}</code></pre></details></li></ul></li></ol></li></ol><ol type="1" id="131aa64c-9d0a-819b-ada9-d9be0d3f2c99" class="numbered-list" start="6"><li>Переходим в директорию datasources<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8138-8f3e-e29c1014f94e" class="code"><code class="language-Bash">cd ../datasources</code></pre></li></ol><ol type="1" id="131aa64c-9d0a-8196-a027-ca4b6b7c7c82" class="numbered-list" start="7"><li>Создаем файл конфигурации:<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-814f-9598-d074cb6ca688" class="code"><code class="language-Bash">nano datasource.yml</code></pre><p id="131aa64c-9d0a-81ef-b9ef-d317b9efa590" class="">Внесем в него следующие строки:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81ae-8808-f060e12fc3dd" class="code"><code class="language-Bash">apiVersion: 1

datasources:
  - name: Prometheus
    type: prometheus
    access: proxy
    orgId: 1
    url: http://prometheus:9090
    basicAuth: false
    isDefault: true
    editable: true

  - name: Loki
    type: loki
    access: proxy
    jsonData:
      maxLines: 1000
    basicAuth: false
    url: http://loki:3100
    isDefault: false
    editable: true</code></pre><figure class="block-color-orange_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-81ce-bb35-f6d1bfbb34e0"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Обратите внимание что в языке разметки YAML необходимо соблюдать отступы строк, иначе файл станет невалидным.</div></figure><ol type="1" id="131aa64c-9d0a-8190-a87a-f4f4a15a8085" class="numbered-list" start="1"><li><strong>Версия API:</strong><ul id="131aa64c-9d0a-8146-8440-ec05850d6a5c" class="bulleted-list"><li style="list-style-type:disc"><code><strong>apiVersion: 1</strong></code> указывает на использование первой версии API Grafana.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-81f8-99c3-df419535192e" class="numbered-list" start="2"><li><strong>Настройки источников данных:</strong><ul id="131aa64c-9d0a-8116-ab50-d114a440ee06" class="bulleted-list"><li style="list-style-type:disc">Определены два источника данных.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-810a-bce1-c16aaeef34b0" class="numbered-list" start="3"><li><strong>Источник данных Prometheus:</strong><ul id="131aa64c-9d0a-81d4-a198-fa11347ace3d" class="bulleted-list"><li style="list-style-type:disc"><code><strong>name: Prometheus</strong></code> - имя источника данных.</li></ul><ul id="131aa64c-9d0a-81c7-a313-ffe40f4d6d71" class="bulleted-list"><li style="list-style-type:disc"><code><strong>type: prometheus</strong></code> - тип источника данных.</li></ul><ul id="131aa64c-9d0a-81ce-8210-d8b3efdf8b18" class="bulleted-list"><li style="list-style-type:disc"><code><strong>access: proxy</strong></code> - метод доступа к данным (в данном случае, через прокси).</li></ul><ul id="131aa64c-9d0a-811d-8b06-d9adf563e289" class="bulleted-list"><li style="list-style-type:disc"><code><strong>orgId: 1</strong></code> - идентификатор организации в Grafana, к которой привязан этот источник данных.</li></ul><ul id="131aa64c-9d0a-819a-98c8-c561300207fa" class="bulleted-list"><li style="list-style-type:disc"><code><strong>url: http://prometheus:9090</strong></code> - URL, по которому Grafana может получить данные от Prometheus.</li></ul><ul id="131aa64c-9d0a-8103-823d-d62234cec059" class="bulleted-list"><li style="list-style-type:disc"><code><strong>basicAuth: false</strong></code> - указывает, используется ли базовая аутентификация для доступа к источнику данных (в данном случае, отключена).</li></ul><ul id="131aa64c-9d0a-81ec-84db-d81ac8c351ba" class="bulleted-list"><li style="list-style-type:disc"><code><strong>isDefault: true</strong></code> - указывает, является ли этот источник данных основным (по умолчанию) для Grafana.</li></ul><ul id="131aa64c-9d0a-8133-a3f4-c21301b17cf6" class="bulleted-list"><li style="list-style-type:disc"><code><strong>editable: true</strong></code> - разрешает или запрещает редактирование этого источника данных.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-8180-bc44-e9c775a222bf" class="numbered-list" start="4"><li><strong>Источник данных Loki:</strong><ul id="131aa64c-9d0a-8128-be2c-f3c987bdecdf" class="bulleted-list"><li style="list-style-type:disc"><code><strong>name: Loki</strong></code> - имя источника данных.</li></ul><ul id="131aa64c-9d0a-8159-a19b-d58cb2e368e4" class="bulleted-list"><li style="list-style-type:disc"><code><strong>type: loki</strong></code> - тип источника данных (для Loki).</li></ul><ul id="131aa64c-9d0a-8198-87b3-c6c939d74d76" class="bulleted-list"><li style="list-style-type:disc"><code><strong>access: proxy</strong></code> - метод доступа к данным (через прокси).</li></ul><ul id="131aa64c-9d0a-81df-bad7-d916ef52842f" class="bulleted-list"><li style="list-style-type:disc"><code><strong>jsonData: maxLines: 1000</strong></code> - дополнительные настройки в формате JSON.</li></ul><ul id="131aa64c-9d0a-81cf-8d9b-ece4ab5d7f62" class="bulleted-list"><li style="list-style-type:disc"><code><strong>basicAuth: false</strong></code> - указывает, используется ли базовая аутентификация для доступа к источнику данных (в данном случае, отключена).</li></ul><ul id="131aa64c-9d0a-81f0-99da-da89e2e10694" class="bulleted-list"><li style="list-style-type:disc"><code><strong>url: http://loki:3100</strong></code> - URL, по которому Grafana может получить данные от Loki.</li></ul><ul id="131aa64c-9d0a-81fe-ad94-c79662d8d6ca" class="bulleted-list"><li style="list-style-type:disc"><code><strong>isDefault: false</strong></code> - указывает, что этот источник данных не является основным для Grafana.</li></ul><ul id="131aa64c-9d0a-8195-99d2-c3eb9f890543" class="bulleted-list"><li style="list-style-type:disc"><code><strong>editable: true</strong></code> - разрешает или запрещает редактирование этого источника данных.</li></ul></li></ol></li></ol><h3 id="131aa64c-9d0a-8163-b5ff-f434bbb49457" class="">2.3.7 Конфигурирование caddy</h3><ol type="1" id="131aa64c-9d0a-8182-819c-c9576217e167" class="numbered-list" start="1"><li>Переходим в директорию caddy<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81a8-a599-c141008ca8ab" class="code"><code class="language-Bash">cd ../caddy</code></pre></li></ol><ol type="1" id="131aa64c-9d0a-8160-a180-ff614fed843e" class="numbered-list" start="2"><li>Создаем файл конфигурации:<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81fc-ab15-f7a1ba89fdc6" class="code"><code class="language-Bash">nano Caddyfile</code></pre><p id="131aa64c-9d0a-817b-98ef-ebbe71c5eacd" class="">Внесем в него следующие строки:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8188-9dcf-f08743947397" class="code"><code class="language-Bash">:9090 {
    basicauth /* {
        {$ADMIN_USER} {$ADMIN_PASSWORD_HASH}
    }
    reverse_proxy prometheus:9090
}

:9093 {
    basicauth /* {
        {$ADMIN_USER} {$ADMIN_PASSWORD_HASH}
    }
    reverse_proxy alertmanager:9093
}

:9091 {
    basicauth /* {
        {$ADMIN_USER} {$ADMIN_PASSWORD_HASH}
    }
    
    reverse_proxy pushgateway:9091
}

:3100 {
    basicauth /* {
        {$ADMIN_USER} {$ADMIN_PASSWORD_HASH}
    }
    reverse_proxy loki:3100
}

:8080 {
    basicauth /* {
        {$ADMIN_USER} {$ADMIN_PASSWORD_HASH}
    }    
    reverse_proxy cadvisor:8080
}

:3000 {
    reverse_proxy grafana:3000
}</code></pre><p id="131aa64c-9d0a-8115-8c8e-ea145576f12e" class="">Этот файл конфигурации представляет собой прокси-сервер Caddy, который перенаправляет запросы на различные службы с базовой аутентификацией. Вот основные моменты:</p><ol type="1" id="131aa64c-9d0a-81ac-bb7a-f45c240ca301" class="numbered-list" start="1"><li><strong>Прокси-сервер Caddy:</strong><ul id="131aa64c-9d0a-8166-b975-d2b2092fa30d" class="bulleted-list"><li style="list-style-type:disc">Настроен на прослушивание нескольких портов и перенаправление запросов на соответствующие службы.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-8102-942c-d225c1e72545" class="numbered-list" start="2"><li><strong>Проксирование Prometheus (порт 9090):</strong><ul id="131aa64c-9d0a-8148-bb00-f8fff3f46b8a" class="bulleted-list"><li style="list-style-type:disc">Запросы на порт 9090 перенаправляются на службу Prometheus с использованием базовой аутентификации.</li></ul><ul id="131aa64c-9d0a-8126-82bb-c182083860a8" class="bulleted-list"><li style="list-style-type:disc">Данные аутентификации будут предоставлены через переменные окружения <code><strong>$ADMIN_USER</strong></code> и <code><strong>$ADMIN_PASSWORD_HASH</strong></code>.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-816f-9dfe-fc2eaa9eacb8" class="numbered-list" start="3"><li><strong>Проксирование Alertmanager (порт 9093):</strong><ul id="131aa64c-9d0a-818d-8eff-f9f584e6e33e" class="bulleted-list"><li style="list-style-type:disc">Запросы на порт 9093 перенаправляются на службу Alertmanager с использованием базовой аутентификации.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-8198-bd97-c4abf1d204b4" class="numbered-list" start="4"><li><strong>Проксирование Pushgateway (порт 9091):</strong><ul id="131aa64c-9d0a-8105-a57d-f85227c5d25c" class="bulleted-list"><li style="list-style-type:disc">Запросы на порт 9091 перенаправляются на Pushgateway с использованием базовой аутентификации.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-81ea-8e45-e427b1da01ff" class="numbered-list" start="5"><li><strong>Проксирование Loki (порт 3100):</strong><ul id="131aa64c-9d0a-813b-ad26-fbb78985d767" class="bulleted-list"><li style="list-style-type:disc">Запросы на порт 3100 перенаправляются на службу Loki с использованием базовой аутентификации.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-8166-9288-f848831d0dac" class="numbered-list" start="6"><li><strong>Проксирование cAdvisor (порт 8080):</strong><ul id="131aa64c-9d0a-81c1-83c8-cb2728ec91a3" class="bulleted-list"><li style="list-style-type:disc">Запросы на порт 8080 перенаправляются на cAdvisor с использованием базовой аутентификации.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-8171-937a-c1f49fec9e90" class="numbered-list" start="7"><li><strong>Проксирование Grafana (порт 3000):</strong><ul id="131aa64c-9d0a-8165-ab47-de193b7880f4" class="bulleted-list"><li style="list-style-type:disc">Запросы на порт 3000 проксируются непосредственно на службу Grafana без базовой аутентификации.</li></ul></li></ol></li></ol><h3 id="131aa64c-9d0a-81ef-92ed-f77017e9dc3d" class="">2.3.8 Конфигурирование системы мониторинга</h3><ol type="1" id="131aa64c-9d0a-81e1-ba3b-d46645e8a300" class="numbered-list" start="1"><li>Перейдем в корневую директорию нашего проекта<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-817c-8041-c76d41c6bcff" class="code"><code class="language-Bash">cd ..</code></pre></li></ol><ol type="1" id="131aa64c-9d0a-8118-aa4c-e164ab296604" class="numbered-list" start="2"><li>Создадим файл конфигурации, который будет содержать переменные окружения для Grafana<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8140-8c1b-ff38fc28b1c1" class="code"><code class="language-Bash">nano config</code></pre><p id="131aa64c-9d0a-81eb-8b28-ebb377ac7b05" class="">Внесем в него следующие строки:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8104-aa00-f3932d0ecf17" class="code"><code class="language-Bash">GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=admin
GF_USERS_ALLOW_SIGN_UP=false</code></pre><ol type="1" id="131aa64c-9d0a-8107-84f6-da196bb2bf00" class="numbered-list" start="1"><li><code><strong>GF_SECURITY_ADMIN_USER=admin</strong></code>:<ul id="131aa64c-9d0a-8165-9114-d67b71666bf3" class="bulleted-list"><li style="list-style-type:disc">Устанавливает имя пользователя администратора Grafana.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-818c-aaba-f5283e69cf2c" class="numbered-list" start="2"><li><code><strong>GF_SECURITY_ADMIN_PASSWORD=admin</strong></code>:<ul id="131aa64c-9d0a-81de-8dd0-e5677ddc50d2" class="bulleted-list"><li style="list-style-type:disc">Устанавливает пароль администратора Grafana.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-81e0-b0df-c06de3a37e69" class="numbered-list" start="3"><li><code><strong>GF_USERS_ALLOW_SIGN_UP=false</strong></code>:<ul id="131aa64c-9d0a-81a4-a15e-f6a0755b799e" class="bulleted-list"><li style="list-style-type:disc">Определяет, разрешено ли пользователям регистрироваться в Grafana. Установленное значение &quot;false&quot; отключает возможность регистрации новых пользователей. Это полезно для контроля доступа и предотвращения несанкционированного доступа.</li></ul></li></ol><figure class="block-color-orange_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-8164-aa7a-ec42cdd5a0d5"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Текущие учетные данные для доступа к Grafana очень слабые. Для повышения безопасности стоит их изменить.</div></figure></li></ol><ol type="1" id="131aa64c-9d0a-81f5-a41a-f6d650ee0f7e" class="numbered-list" start="3"><li>Создадим файл конфигурации Docker-compose<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-8139-bbe2-ee976d14cff8" class="code"><code class="language-Bash">nano docker-compose.yml</code></pre><p id="131aa64c-9d0a-8151-bbde-e044e85cabba" class="">Внесем в него следующие строки:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81bd-a193-d4ca43494692" class="code"><code class="language-Bash">networks:
  monitor-net:
    driver: bridge

volumes:
    prometheus_data: {}
    grafana_data: {}

services:

  prometheus:
    image: prom/prometheus:latest
    container_name: prometheus
    volumes:
      - ./prometheus:/etc/prometheus
      - prometheus_data:/prometheus
    command:
      - &#x27;--config.file=/etc/prometheus/prometheus.yml&#x27;
      - &#x27;--storage.tsdb.path=/prometheus&#x27;
      - &#x27;--web.console.libraries=/etc/prometheus/console_libraries&#x27;
      - &#x27;--web.console.templates=/etc/prometheus/consoles&#x27;
      - &#x27;--storage.tsdb.retention.time=200h&#x27;
      - &#x27;--web.enable-lifecycle&#x27;
    restart: always
    expose:
      - 9090
    networks:
      - monitor-net
    labels:
      org.label-schema.group: &quot;monitoring&quot;

  alertmanager:
    image: prom/alertmanager:latest
    container_name: alertmanager
    volumes:
      - ./alertmanager:/etc/alertmanager
    command:
      - &#x27;--config.file=/etc/alertmanager/config.yml&#x27;
      - &#x27;--storage.path=/alertmanager&#x27;
    restart: always
    expose:
      - 9093
    networks:
      - monitor-net
    labels:
      org.label-schema.group: &quot;monitoring&quot;

  nodeexporter:
    image: prom/node-exporter:latest
    container_name: nodeexporter
    volumes:
      - /proc:/host/proc:ro
      - /sys:/host/sys:ro
      - /:/rootfs:ro
    command:
      - &#x27;--path.procfs=/host/proc&#x27;
      - &#x27;--path.rootfs=/rootfs&#x27;
      - &#x27;--path.sysfs=/host/sys&#x27;
      - &#x27;--collector.filesystem.mount-points-exclude=^/(sys|proc|dev|host|etc)($$|/)&#x27;
    restart: always
    expose:
      - 9100
    networks:
      - monitor-net
    labels:
      org.label-schema.group: &quot;monitoring&quot;

  loki:
    image: grafana/loki:latest
    container_name: loki
    volumes:
      - ./loki/loki-config.yaml:/etc/loki/loki-config.yaml
    command: -config.file=/etc/loki/loki-config.yaml
    expose:
      - 3100
    restart: always
    networks:
      - monitor-net
    labels:
      org.label-schema.group: &quot;monitoring&quot;

  promtail:
    image: grafana/promtail:latest
    container_name: promtail
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - /var/log:/var/log:ro
      - ./promtail/promtail-config.yaml:/etc/promtail/promtail-config.yaml
    command: -config.file=/etc/promtail/promtail-config.yaml
    restart: always
    networks:
      - monitor-net
    labels:
      org.label-schema.group: &quot;monitoring&quot;

  cadvisor:
    image: gcr.io/cadvisor/cadvisor:latest
    container_name: cadvisor
    privileged: true
    devices:
      - /dev/kmsg:/dev/kmsg
    volumes:
      - /:/rootfs:ro
      - /var/run:/var/run:ro
      - /sys:/sys:ro
      - /var/lib/docker:/var/lib/docker:ro
    restart: always
    expose:
      - 8080
    networks:
      - monitor-net
    labels:
      org.label-schema.group: &quot;monitoring&quot;

  grafana:
    image: grafana/grafana:latest
    container_name: grafana
    volumes:
      - grafana_data:/var/lib/grafana
      - ./grafana/provisioning/dashboards:/etc/grafana/provisioning/dashboards
      - ./grafana/provisioning/datasources:/etc/grafana/provisioning/datasources
    env_file:
      - config
    restart: always
    expose:
      - 3000
    networks:
      - monitor-net
    labels:
      org.label-schema.group: &quot;monitoring&quot;

  pushgateway:
    image: prom/pushgateway:latest
    container_name: pushgateway
    restart: always
    expose:
      - 9091
    networks:
      - monitor-net
    labels:
      org.label-schema.group: &quot;monitoring&quot;

  caddy:
    image: caddy:latest
    container_name: caddy
    ports:
      - &quot;3000:3000&quot;
      - &quot;9090:9090&quot;
      - &quot;8080:8080&quot;
      - &quot;9093:9093&quot;
      - &quot;9091:9091&quot;
      - &quot;3100:3100&quot;
    volumes:
      - ./caddy:/etc/caddy
    environment:
      - ADMIN_USER=${ADMIN_USER:-admin}
      - ADMIN_PASSWORD=${ADMIN_PASSWORD:-admin}
      - ADMIN_PASSWORD_HASH=${ADMIN_PASSWORD_HASH:-JDJhJDE0JE91S1FrN0Z0VEsyWmhrQVpON1VzdHVLSDkyWHdsN0xNbEZYdnNIZm1pb2d1blg4Y09mL0ZP}
    restart: always
    networks:
      - monitor-net
    labels:
      org.label-schema.group: &quot;monitoring&quot;</code></pre><figure class="block-color-orange_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-817a-8709-f4862ba2af11"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Обратите внимание что в языке разметки YAML необходимо соблюдать отступы строк, иначе файл станет невалидным.</div></figure><ol type="1" id="131aa64c-9d0a-8127-819c-f386fe65a655" class="numbered-list" start="1"><li><strong>Версия файла конфигурации:</strong><ul id="131aa64c-9d0a-81a2-a9fb-f4f0d9a3d38f" class="bulleted-list"><li style="list-style-type:disc"><code><strong>version: &quot;3&quot;</strong></code> указывает на версию файла конфигурации Docker Compose.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-81cd-8746-ee7d0a5be9de" class="numbered-list" start="2"><li><strong>Сети:</strong><ul id="131aa64c-9d0a-8165-8ec8-cf547d5d1ff4" class="bulleted-list"><li style="list-style-type:disc">Определена сеть <code><strong>monitor-net</strong></code> с драйвером <code><strong>bridge</strong></code>, используемая для связи между контейнерами.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-8192-9411-d157c8d732d8" class="numbered-list" start="3"><li><strong>Тома (volumes):</strong><ul id="131aa64c-9d0a-8138-844c-f53ac416e7f5" class="bulleted-list"><li style="list-style-type:disc">Определены два тома: <code><strong>prometheus_data</strong></code> для хранения данных Prometheus и <code><strong>grafana_data</strong></code> для хранения данных Grafana.</li></ul></li></ol><ol type="1" id="131aa64c-9d0a-8113-b41c-fdeafe4b7d94" class="numbered-list" start="4"><li><strong>Сервисы (services):</strong><ul id="131aa64c-9d0a-8179-967d-d7fccb7c6c90" class="bulleted-list"><li style="list-style-type:disc">Определены следующие сервисы:<ul id="131aa64c-9d0a-8123-bbfa-e434bfa042fe" class="bulleted-list"><li style="list-style-type:circle"><code><strong>prometheus</strong></code>: сервис Prometheus.</li></ul><ul id="131aa64c-9d0a-81a3-8015-e87f9159698e" class="bulleted-list"><li style="list-style-type:circle"><code><strong>alertmanager</strong></code>: сервис Alertmanager.</li></ul><ul id="131aa64c-9d0a-81a6-9581-f56203957e1f" class="bulleted-list"><li style="list-style-type:circle"><code><strong>nodeexporter</strong></code>: экспортер метрик для хоста.</li></ul><ul id="131aa64c-9d0a-81d3-a079-fd682f976463" class="bulleted-list"><li style="list-style-type:circle"><code><strong>loki</strong></code>: сервис Loki для сбора и анализа журналов.</li></ul><ul id="131aa64c-9d0a-81fa-911e-ff99f867abfa" class="bulleted-list"><li style="list-style-type:circle"><code><strong>promtail</strong></code>: сервис Promtail для отправки журнальных данных в Loki.</li></ul><ul id="131aa64c-9d0a-8118-b502-ef425ff491b8" class="bulleted-list"><li style="list-style-type:circle"><code><strong>cadvisor</strong></code>: сервис cAdvisor для сбора информации о контейнерах Docker.</li></ul><ul id="131aa64c-9d0a-81c4-a533-de6fed38be26" class="bulleted-list"><li style="list-style-type:circle"><code><strong>grafana</strong></code>: сервис Grafana для визуализации данных.</li></ul><ul id="131aa64c-9d0a-8113-96cd-d4d3669ad31e" class="bulleted-list"><li style="list-style-type:circle"><code><strong>pushgateway</strong></code>: сервис Pushgateway для временного хранения метрик до их сбора Prometheus.</li></ul><ul id="131aa64c-9d0a-81f4-be67-debbaeb71a51" class="bulleted-list"><li style="list-style-type:circle"><code><strong>caddy</strong></code>: прокси-сервер Caddy для маршрутизации трафика и обеспечения безопасности с поддержкой базовой аутентификации.</li></ul></li></ul></li></ol><ol type="1" id="131aa64c-9d0a-81fb-b240-fbf01468a1a8" class="numbered-list" start="5"><li><strong>Настройки для каждого сервиса:</strong><ul id="131aa64c-9d0a-81ca-aec7-f05034e7a579" class="bulleted-list"><li style="list-style-type:disc">Для каждого сервиса указаны образы контейнеров, имена контейнеров, тома для монтирования конфигурации и данных, команды запуска (если применимо), параметры перезапуска, порты и сети, а также метки для организации и категоризации сервисов.</li></ul></li></ol><figure class="block-color-orange_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-81be-9bde-fac93497aa73"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Текущие учетные данные для базовой аутентификации очень слабые. Для повышения безопасности стоит их изменить. Они указаны в настройках сервиса caddy.</div></figure><figure class="block-color-blue_background callout" style="white-space:pre-wrap;display:flex" id="131aa64c-9d0a-81fe-be50-d75d4d682789"><div style="font-size:1.5em"><span class="icon">🔍</span></div><div style="width:100%">Для хэширование пароля по умолчанию используется алгоритм bcrypt, после чего хэш переводится в Base64</div></figure></li></ol><h3 id="131aa64c-9d0a-81cb-820e-e5480e0b5f6c" class="">2.3.9 Запуск системы мониторинга</h3><p id="131aa64c-9d0a-81b3-9385-c032e5045440" class="">Для запуска необходимо выполнить команду:</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="131aa64c-9d0a-81fb-b48d-ee9f42b9fe78" class="code"><code class="language-Bash">docker compose up -d</code></pre><h3 id="131aa64c-9d0a-81f9-a362-f470f64701cd" class="">2.3.10 Обзор</h3><p id="131aa64c-9d0a-8158-bcae-cf15c52350b3" class=""><strong>Dashboard Docker Host</strong></p><p id="131aa64c-9d0a-8147-a4b1-cfa1de1628c6" class="">Содержит информацию о состоянии хоста</p><figure id="131aa64c-9d0a-81c7-a464-d8be0817bb2f" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2036.png"><img style="width:1781px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2036.png"/></a></figure><p id="131aa64c-9d0a-81da-8eec-d3b47c742425" class=""><strong>Dashboard Monitor Services</strong></p><p id="131aa64c-9d0a-811a-87ab-c43ded96c41f" class="">Содержит информацию о состоянии системы мониторинга</p><figure id="131aa64c-9d0a-8179-b1bd-fa0667e35a9d" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2037.png"><img style="width:708px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2037.png"/></a></figure><p id="131aa64c-9d0a-8197-80c3-c89fa1ed9613" class="">Также на этот Dashboard выводится информация о сработавших правилах Alert</p><figure id="131aa64c-9d0a-81d8-b97b-de9430db3359" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2038.png"><img style="width:708px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2038.png"/></a></figure><p id="131aa64c-9d0a-81d0-b7d3-c3eaf4f58221" class=""><strong>Dashboard Docker Containers</strong></p><p id="131aa64c-9d0a-818a-a0bd-eea1aedb8b14" class="">Содержит информацию и метрики контейнеров, которые не имеют отношения к системе мониторинга</p><figure id="131aa64c-9d0a-81ce-9cb8-fa6479073848" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2039.png"><img style="width:708px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2039.png"/></a></figure><p id="131aa64c-9d0a-8126-bd92-f89397722364" class="">Для просмотра логов, которые были получены с помощью Loki, необходимо перейти в Data Sources</p><figure id="131aa64c-9d0a-8142-9f4a-d934476cd6a3" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2040.png"><img style="width:708px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2040.png"/></a></figure><p id="131aa64c-9d0a-81a4-9d56-c99a544b82bf" class="">Выбрать Explore напротив Loki</p><figure id="131aa64c-9d0a-8121-a867-f9c0e167071f" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2041.png"><img style="width:708px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2041.png"/></a></figure><p id="131aa64c-9d0a-819f-92cc-e5859026a61d" class="">И указать фильтры, которые нужны</p><figure id="131aa64c-9d0a-8140-8ad1-f9b3c953d093" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2042.png"><img style="width:708px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2042.png"/></a></figure><p id="131aa64c-9d0a-814e-a767-eccd330c85e8" class="">Например, получение логов из контейнера test</p><figure id="131aa64c-9d0a-8116-a7a6-ed1a0c331dc8" class="image"><a href="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2043.png"><img style="width:1530px" src="%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F%20%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%20%D0%BA%20%D0%BB%D0%B5%D0%BA%D1%86%D0%B8%D0%B8%203%204%20131aa64c9d0a813bad0fcf24c8a3f488/Untitled%2043.png"/></a></figure></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>